!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.Frontend=r():(e.Frontend=e.Frontend||{},e.Frontend["pages/ide"]=r())}(self,(function(){return function(){"use strict";var e,r,n,t,i,o,a,l,u,c={63551:function(e,r,n){n.d(r,{aM:function(){return w},mx:function(){return x}});n(71372),n(15735),n(58188),n(28673),n(6886),n(60523),n(28399),n(18178),n(88233),n(34115),n(634),n(20796),n(32501),n(26936),n(27233),n(77950),n(21850);var t=n(2784),i=n(72045),o=n(63290),a=n(72526),l=n(28684),u=n(73720),c=n(73091),s=n(39493),f=n(96931),d=n(49819),p=n(52322);function m(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return A(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var h=50,y=function(){return(0,i.Z)()},v=1;function b(e,r){switch(r.type){case"INITIAL_FETCH_MESSAGES":return{...e,status:"pending",initialMessagesLoaded:!0};case"FETCH_MESSAGES":return{...e,status:"pending"};case"FETCH_MESSAGES_SUCCESS":return{...e,status:"idle",...(0,u.n)(e.messages,r.messages,e.uniqueMessageIds),lastTimestamp:r.messages[0]?r.messages[0].timestamp:null,atEnd:r.messages.length<h};case"SEND_MESSAGE":return{...e,...(0,u.q)(e.messages,{id:""+v++,user:r.user,content:r.content,timestamp:Date.now()},e.uniqueMessageIds)};case"RECEIVE_MESSAGE":return{...e,...(0,u.q)(e.messages,r.message,e.uniqueMessageIds),unreadMessageCount:e.unreadMessageCount+1};case"MARK_MESSAGES_AS_READ":return{...e,unreadMessageCount:0};case"CLEAR":return{...g};case"ERROR":return{...e,status:"error",error:r.error};default:throw new Error("Unknown action")}}var g={status:"idle",messages:[],initialMessagesLoaded:!1,lastTimestamp:null,atEnd:!1,unreadMessageCount:0,error:null,uniqueMessageIds:[]},j=(0,t.createContext)(void 0),w=function(e){var r=e.children,n=(0,t.useRef)();void 0===n.current&&(n.current=y());var i=(0,o.SE)(),u=(0,a.d)()._id,A=(0,s.l5)().chatIsOpen,v=(0,c.Z)(),w=v.hasFocus,x=v.flashTitle,C=v.stopFlashingTitle,S=m((0,t.useReducer)(b,g),2),E=S[0],I=S[1],_=(0,t.useMemo)((function(){function e(){if(!E.atEnd){var e={limit:String(h)};E.lastTimestamp&&(e.before=String(E.lastTimestamp));var r=new URLSearchParams(e),n="/project/".concat(u,"/messages?").concat(r.toString());(0,l.xA)(n).then((function(){I({type:"FETCH_MESSAGES_SUCCESS",messages:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reverse()})})).catch((function(e){I({type:"ERROR",error:e})}))}}return{loadInitialMessages:function(){E.initialMessagesLoaded||(I({type:"INITIAL_FETCH_MESSAGES"}),e())},loadMoreMessages:function(){I({type:"FETCH_MESSAGES"}),e()},reset:function(){I({type:"CLEAR"}),e()}}}),[u,E.atEnd,E.initialMessagesLoaded,E.lastTimestamp]),k=_.loadInitialMessages,O=_.loadMoreMessages,T=_.reset,F=(0,t.useCallback)((function(e){if(e){I({type:"SEND_MESSAGE",user:i,content:e});var r="/project/".concat(u,"/messages");(0,l.ty)(r,{body:{content:e,client_id:n.current}}).catch((function(e){I({type:"ERROR",error:e})}))}}),[u,i]),R=(0,t.useCallback)((function(){I({type:"MARK_MESSAGES_AS_READ"})}),[]),B=(0,d.Z)(),Z=(0,f.IM)().socket;(0,t.useEffect)((function(){if(Z&&!B)return Z.on("new-chat-message",e),function(){Z&&Z.removeListener("new-chat-message",e)};function e(e){e.clientId!==n.current&&I({type:"RECEIVE_MESSAGE",message:e})}}),[Z,B]),(0,t.useEffect)((function(){w&&(C(),A&&R()),!w&&E.unreadMessageCount>0&&x("New Message")}),[w,A,E.unreadMessageCount,x,C,R]);var P=(0,t.useMemo)((function(){return{status:E.status,messages:E.messages,initialMessagesLoaded:E.initialMessagesLoaded,atEnd:E.atEnd,unreadMessageCount:E.unreadMessageCount,loadInitialMessages:k,loadMoreMessages:O,reset:T,sendMessage:F,markMessagesAsRead:R,error:E.error}}),[k,O,R,T,F,E.atEnd,E.error,E.initialMessagesLoaded,E.messages,E.status,E.unreadMessageCount]);return(0,p.jsx)(j.Provider,{value:P,children:r})};function x(){var e=(0,t.useContext)(j);if(!e)throw new Error("useChatContext is only available inside ChatProvider");return e}},50641:function(e,r,n){n.d(r,{Hc:function(){return s},ou:function(){return c}});n(71372);var t=n(2784),i=n(77241),o=n(45564),a=n(51261),l=n(52322),u=(0,t.createContext)(void 0),c=function(e){var r=e.children,n=(0,i.Z)(),c=n.compiler,s=n.setCompiler,f=n.imageName,d=n.setImageName,p=n.rootDocId,m=n.setRootDocId,A=n.spellCheckLanguage,h=n.setSpellCheckLanguage,y=(0,o.Z)(),v=y.autoComplete,b=y.setAutoComplete,g=y.autoPairDelimiters,j=y.setAutoPairDelimiters,w=y.syntaxValidation,x=y.setSyntaxValidation,C=y.editorTheme,S=y.setEditorTheme,E=y.overallTheme,I=y.setOverallTheme,_=y.mode,k=y.setMode,O=y.fontSize,T=y.setFontSize,F=y.fontFamily,R=y.setFontFamily,B=y.lineHeight,Z=y.setLineHeight,P=y.pdfViewer,M=y.setPdfViewer;(0,a.Z)();var D=(0,t.useMemo)((function(){return{compiler:c,setCompiler:s,imageName:f,setImageName:d,rootDocId:p,setRootDocId:m,spellCheckLanguage:A,setSpellCheckLanguage:h,autoComplete:v,setAutoComplete:b,autoPairDelimiters:g,setAutoPairDelimiters:j,syntaxValidation:w,setSyntaxValidation:x,editorTheme:C,setEditorTheme:S,overallTheme:E,setOverallTheme:I,mode:_,setMode:k,fontSize:O,setFontSize:T,fontFamily:F,setFontFamily:R,lineHeight:B,setLineHeight:Z,pdfViewer:P,setPdfViewer:M}}),[c,s,f,d,p,m,A,h,v,b,g,j,w,x,C,S,E,I,_,k,O,T,F,R,B,Z,P,M]);return(0,l.jsx)(u.Provider,{value:D,children:r})};function s(){var e=(0,t.useContext)(u);if(!e)throw new Error("useProjectSettingsContext is only available inside ProjectSettingsProvider");return e}},36190:function(e,r,n){n.d(r,{Z:function(){return l}});var t=n(13980),i=n.n(t),o=n(86186),a=n(52322);function l(e){var r=e.children;return(0,a.jsx)(o.Z,{bsStyle:"danger",children:r})}l.propTypes={children:i().any.isRequired}},37087:function(e,r,n){n.d(r,{Z:function(){return h}});var t=n(13980),i=n.n(t),o=n(75234),a=n(28684),l=(n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850),n(71372),n(2784)),u=n(72526),c=n(46267);function s(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return f(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function d(){var e=(0,o.$G)().t,r=(0,u.d)()._id,n=s((0,l.useState)(10),2),t=n[0],i=n[1],a=(0,c.T)();return(0,l.useEffect)((function(){i(10);var e=window.setInterval((function(){i((function(n){return 0===n?(window.clearInterval(e),a.assign("/login?redir=/project/".concat(r)),0):n-1}))}),1e3);return function(){window.clearInterval(e)}}),[r,a]),e("session_expired_redirecting_to_login",{seconds:t})}var p=n(17776),m=n(36190),A=n(52322);function h(e){var r=e.error,n=(0,o.$G)().t;if("string"==typeof r)switch(r){case"name-exists":return(0,A.jsx)(m.Z,{children:n("file_already_exists")});case"too-many-files":return(0,A.jsx)(m.Z,{children:n("project_has_too_many_files")});case"remote-service-error":return(0,A.jsx)(m.Z,{children:n("remote_service_error")});case"folder_not_found":return(0,A.jsx)(m.Z,{children:n("the_target_folder_could_not_be_found")});case"invalid_filename":return(0,A.jsx)(m.Z,{children:n("invalid_filename",{nameLimit:150})});case"rate-limit-hit":return(0,A.jsx)(m.Z,{children:n("too_many_files_uploaded_throttled_short_period")});case"not-logged-in":return(0,A.jsx)(m.Z,{children:(0,A.jsx)(d,{})});case"linked-project-compile-error":return(0,A.jsx)(m.Z,{children:n("generic_linked_file_compile_error")});default:return(0,A.jsx)(m.Z,{children:n("generic_something_went_wrong")})}switch(r.constructor){case a.kp:var t,i,l=null===(t=r.data)||void 0===t?void 0:t.message;if(l)return(0,A.jsx)(m.Z,{children:l.text||l});switch(null===(i=r.response)||void 0===i?void 0:i.status){case 400:return(0,A.jsx)(m.Z,{children:n("invalid_request")});case 403:return(0,A.jsx)(m.Z,{children:n("session_error")});case 429:return(0,A.jsx)(m.Z,{children:n("too_many_attempts")});default:return(0,A.jsx)(m.Z,{children:n("something_went_wrong_server")})}case p.w4:case p.I9:case p.Cr:return null;default:return(0,A.jsx)(m.Z,{children:n("generic_something_went_wrong")})}}h.propTypes={error:i().oneOfType([i().string,i().object]).isRequired}},27715:function(e,r,n){n.d(r,{P:function(){return C},Z:function(){return S}});n(71372),n(27233),n(28673),n(26936),n(43450),n(77950),n(21850),n(95342),n(58188),n(49228),n(1939),n(73439),n(18178),n(34115),n(634),n(20796),n(15735),n(6886),n(32501),n(88233);var t=n(2784);function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function a(e,r){return e.reduce((async function(e,n){var t=await e,o=await r(n);return[].concat(i(t),[o])}),Promise.resolve([]))}var l=n(79401),u=n(38113),c=n(86994),s=n(61416),f=n(72526),d=n(84050),p=n(47481),m=n(61985),A=n(17776),h=n(52322);function y(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return v(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var b=(0,t.createContext)(void 0),g=function(e){return e.START_RENAME="START_RENAME",e.START_DELETE="START_DELETE",e.DELETING="DELETING",e.START_CREATE_FILE="START_CREATE_FILE",e.START_CREATE_FOLDER="START_CREATE_FOLDER",e.CREATING_FILE="CREATING_FILE",e.CREATING_FOLDER="CREATING_FOLDER",e.MOVING="MOVING",e.CANCEL="CANCEL",e.CLEAR="CLEAR",e.ERROR="ERROR",e}(g||{}),j={isDeleting:!1,isRenaming:!1,isCreatingFile:!1,isCreatingFolder:!1,isMoving:!1,inFlight:!1,actionedEntities:null,newFileCreateMode:null,error:null};function w(e){return e}function x(e,r){switch(r.type){case g.START_RENAME:return{...j,isRenaming:!0};case g.START_DELETE:return{...j,isDeleting:!0,actionedEntities:r.actionedEntities};case g.START_CREATE_FILE:return{...j,isCreatingFile:!0,newFileCreateMode:r.newFileCreateMode};case g.START_CREATE_FOLDER:return{...j,isCreatingFolder:!0};case g.CREATING_FILE:return{...j,isCreatingFile:!0,newFileCreateMode:e.newFileCreateMode,inFlight:!0};case g.CREATING_FOLDER:return{...j,isCreatingFolder:!0,inFlight:!0};case g.DELETING:return{...j,isDeleting:!0,inFlight:!0,actionedEntities:e.actionedEntities};case g.MOVING:return{...j,isMoving:!0,inFlight:!0};case g.CLEAR:return{...j};case g.CANCEL:return e.inFlight?e:{...j};case g.ERROR:return{...e,inFlight:!1,error:r.error};default:throw new Error("Unknown user action type: ".concat(r.type))}}var C=function(e){var r=e.reindexReferences,n=e.children,i=(0,f.d)()._id,o=(0,d._i)().permissionsLevel,v=y((0,t.useReducer)("readOnly"===o?w:x,j),2),C=v[0],S=v[1],E=(0,p.O)(),I=E.fileTreeData,_=E.dispatchRename,k=E.dispatchMove,O=(0,m.nF)(),T=O.selectedEntityIds,F=O.isRootFolderSelected,R=y((0,t.useState)(null),2),B=R[0],Z=R[1],P=(0,t.useCallback)((function(){S({type:g.START_RENAME})}),[]),M=(0,t.useCallback)((function(e){var r=Array.from(T)[0],n=(0,u.we)(I,r),t=n.entity.name;if(e===t)return S({type:g.CLEAR});var o=function(e,r,n){if(!(0,s.AG)(n))return new A.I9;if(!(0,c.j)(e,r.parentFolderId,n))return new A.w4;var t=1===r.path.length,i="folder"===r.type;if(t&&!i&&(0,s.tQ)(n))return new A.Cr}(I,n,e);return o?S({type:g.ERROR,error:o}):(S({type:g.CLEAR}),_(r,e),(0,l.g6)(i,n.type,n.entity._id,e).catch((function(e){_(r,t),S({type:g.ERROR,error:e})})))}),[_,I,i,T]),D=(0,t.useCallback)((function(e,r){return!(0,c.j)(I,e,r)}),[I]),N=(0,t.useCallback)((function(){var e=Array.from(T).map((function(e){return(0,u.we)(I,e).entity}));S({type:g.START_DELETE,actionedEntities:e})}),[I,T]),L=(0,t.useCallback)((function(){S({type:g.DELETING});var e=!1;return a(Array.from(T),(function(r){var n=(0,u.we)(I,r);return e=e||/\.bib$/.test(n.entity.name),(0,l.c4)(i,n.type,n.entity._id).catch((function(e){if(404!==e.info.statusCode)throw e}))})).then((function(){e&&r(),S({type:g.CLEAR})})).catch((function(e){S({type:g.ERROR,error:e})}))}),[I,i,T,r]),Q=(0,t.useCallback)((function(e,r){S({type:g.MOVING});var n=Array.from(r).map((function(e){return(0,u.we)(I,e)})).filter((function(n){return n.parentFolderId!==e&&!r.has(n.parentFolderId)})),t=e===I._id,o=n.map((function(r){return function(e,r,n,t){if(!(0,c.j)(e,r,n.entity.name)){var i=new A.d9;return i.entityName=n.entity.name,i}var o="folder"===n.type;if(t&&!o&&(0,s.tQ)(n.entity.name))return new A.Cr}(I,e,r,t)})).find((function(e){return e}));if(o)return S({type:g.ERROR,error:o});var f={},d=!1;return n.forEach((function(r){f[r.entity._id]=r.parentFolderId,k(r.entity._id,e)})),a(n,(async function(r){try{await(0,l.zG)(i,r.type,r.entity._id,e)}catch(e){d=!0,k(r.entity._id,f[r.entity._id]),S({type:g.ERROR,error:e})}})).then((function(){d||S({type:g.CLEAR})}))}),[k,I,i]),U=(0,t.useCallback)((function(){S({type:g.START_CREATE_FOLDER})}),[]),H=(0,t.useMemo)((function(){return function(e,r,n){if(n)return e._id;var t=Array.from(r)[0];if(!t)return e._id;var i=(0,u.Z7)(e,t);if(!i)return e._id;return"folder"===i.type?i.entity._id:i.parentFolderId}(I,T,F)}),[I,T,F]),z=(0,t.useMemo)((function(){if(1===T.size){var e,r=y(T,1)[0],n=(0,u.Z7)(I,r);return null==n||null===(e=n.entity)||void 0===e?void 0:e.name}return null}),[I,T]),q=(0,t.useCallback)((function(e){var r=function(e,r,n){if(!(0,s.AG)(n.name))return new A.I9;if(!(0,c.j)(e,r,n.name))return new A.w4;var t=r===e._id,i="folder"===n.endpoint;if(t&&!i&&(0,s.tQ)(n.name))return new A.Cr}(I,H,e);return r?Promise.reject(r):(0,l.Xe)(i,H,e)}),[I,H,i]),K=(0,t.useCallback)((function(e){return S({type:g.CREATING_FOLDER}),q({endpoint:"folder",name:e}).then((function(){S({type:g.CLEAR})})).catch((function(e){S({type:g.ERROR,error:e})}))}),[q]),G=(0,t.useCallback)((function(e){S({type:g.START_CREATE_FILE,newFileCreateMode:e})}),[]),V=(0,t.useCallback)((function(){G("doc")}),[G]),W=(0,t.useCallback)((function(){G("upload")}),[G]),J=(0,t.useCallback)((function(e){return S({type:g.CREATING_FILE}),q(e).then((function(){S({type:g.CLEAR})})).catch((function(e){S({type:g.ERROR,error:e})}))}),[q]),X=(0,t.useCallback)((function(e){return e.endpoint="doc",J(e)}),[J]),Y=(0,t.useCallback)((function(e){return e.endpoint="linked_file",J(e)}),[J]),$=(0,t.useCallback)((function(){S({type:g.CANCEL})}),[]);(0,t.useEffect)((function(){function e(e){S({type:g.START_CREATE_FILE,newFileCreateMode:e.detail.mode})}return window.addEventListener("file-tree.start-creating",e),function(){window.removeEventListener("file-tree.start-creating",e)}}),[]);var ee=(0,t.useMemo)((function(){if(1===T.size){var e=y(T,1)[0],r=(0,u.Z7)(I,e);if("fileRef"===(null==r?void 0:r.type))return"/project/".concat(i,"/file/").concat(e);if("doc"===(null==r?void 0:r.type))return"/project/".concat(i,"/doc/").concat(e,"/download")}}),[I,i,T]),re={canDelete:T.size>0&&!F,canRename:1===T.size&&!F,canCreate:T.size<2,...C,parentFolderId:H,selectedFileName:z,isDuplicate:D,startRenaming:P,finishRenaming:M,startDeleting:N,finishDeleting:L,finishMoving:Q,startCreatingFile:G,startCreatingFolder:U,finishCreatingFolder:K,startCreatingDocOrFile:V,startUploadingDocOrFile:W,finishCreatingDoc:X,finishCreatingLinkedFile:Y,cancel:$,droppedFiles:B,setDroppedFiles:Z,downloadPath:ee};return(0,h.jsx)(b.Provider,{value:re,children:n})};function S(){var e=(0,t.useContext)(b);if(!e)throw new Error("useFileTreeActionable is only available inside FileTreeActionableProvider");return e}},64733:function(e,r,n){n.d(r,{Q:function(){return c},e:function(){return u}});n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var t=n(2784),i=n(52322);function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var l=(0,t.createContext)(void 0);function u(){var e=(0,t.useContext)(l);if(!e)throw new Error("useFileTreeMainContext is only available inside FileTreeMainProvider");return e}var c=function(e){var r=e.refProviders,n=e.reindexReferences,a=e.setRefProviderEnabled,u=e.setStartedFreeTrial,c=e.children,s=o((0,t.useState)(null),2),f=s[0],d=s[1];return(0,i.jsx)(l.Provider,{value:{refProviders:r,reindexReferences:n,setRefProviderEnabled:a,setStartedFreeTrial:u,contextMenuCoords:f,setContextMenuCoords:d},children:c})}},61985:function(e,r,n){n.d(r,{mI:function(){return k},nF:function(){return O},oJ:function(){return I}});n(34115),n(634),n(20796),n(32501),n(88233),n(15735),n(58188),n(93244),n(28673),n(6886),n(71372),n(1939),n(95342),n(43450),n(27233),n(77950),n(21850),n(26936),n(43430),n(18178);var t,i=n(2784),o=n(12524),a=n.n(o),l=n(76635),u=n.n(l),c=n(38113),s=n(47481),f=n(72526),d=n(84050),p=n(39493),m=n(18977),A=n(44694),h=n(64733),y=n(50325),v=n(52322);function b(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||j(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,r){if(e){if("string"==typeof e)return w(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,r):void 0}}function w(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var x=(0,i.createContext)(void 0),C=function(e){return e.SELECT="SELECT",e.MULTI_SELECT="MULTI_SELECT",e.UNSELECT="UNSELECT",e}(C||{});function S(e,r){switch(r.type){case C.SELECT:return new Set(Array.isArray(r.id)?r.id:[r.id]);case C.MULTI_SELECT:var n=new Set(e);return n.has(r.id)?n.size>1&&n.delete(r.id):n.add(r.id),n;case C.UNSELECT:var t=new Set(e);return t.delete(r.id),t;default:throw new Error("Unknown selectable action type: ".concat(r.type))}}function E(e,r){switch(r.type){case C.SELECT:return new Set([r.id]);case C.MULTI_SELECT:case C.UNSELECT:return e;default:throw new Error("Unknown selectable action type: ".concat(r.type))}}var I=function(e){var r=e.onSelect,n=e.children,t=(0,f.d)(),o=t._id,a=t.rootDocId,l=(0,d._i)().permissionsLevel,p=g((0,m.Z)("doc.open_id.".concat(o),a),1)[0],h=(0,s.O)(),y=h.fileTreeData,b=h.setSelectedEntities,j=g((0,i.useState)(!1),2),w=j[0],I=j[1],_=g((0,i.useReducer)("readOnly"===l?E:S,null,(function(){return p&&(0,c.Z7)(y,p)?new Set([p]):new Set})),2),k=_[0],O=_[1],T=g((0,i.useState)(new Set),2),F=T[0],R=T[1];(0,i.useEffect)((function(){var e=new Set;k.forEach((function(r){var n=(0,c.Z7)(y,r);n&&n.path.forEach((function(r){return e.add(r)}))})),R(e)}),[y,k]);var B=(0,A.Z)(k);(0,i.useEffect)((function(){if(!u().isEqual(k,B)){var e=Array.from(k).map((function(e){return(0,c.Z7)(y,e)})).filter(Boolean);r(e),b(e)}}),[y,k,B,r,b]),(0,i.useEffect)((function(){function e(e){var r=(0,c.Z7)(y,e.detail);r&&O({type:C.SELECT,id:r.entity._id})}return window.addEventListener("editor.openDoc",e),function(){return window.removeEventListener("editor.openDoc",e)}}),[y]);var Z=(0,i.useCallback)((function(e){O({type:C.SELECT,id:e})}),[]),P=(0,i.useCallback)((function(e){O({type:C.UNSELECT,id:e})}),[]),M=(0,i.useCallback)((function(e,r){var n=r?C.MULTI_SELECT:C.SELECT;O({type:n,id:e})}),[]),D={selectedEntityIds:k,selectedEntityParentIds:F,select:Z,unselect:P,selectOrMultiSelectEntity:M,isRootFolderSelected:w,setIsRootFolderSelected:I};return(0,v.jsx)(x.Provider,{value:D,children:n})},_=/Mac/.test(null===(t=window.navigator)||void 0===t?void 0:t.platform);function k(e,r){var n=(0,p.l5)(),t=n.view,o=n.setView,l=(0,h.e)().setContextMenuCoords,u=(0,s.O)().fileTreeData,f=O(),d=f.selectedEntityIds,m=f.selectOrMultiSelectEntity,A=f.isRootFolderSelected,y=f.setIsRootFolderSelected,v=d.has(e),b=(0,i.useCallback)((function(e){var r=[],n=!1;for(var t of F(u))if(t===e){if(r.push(t),n)break;n=!0}else if(d.has(t)){if(r.push(t),n)break;n=!0}else n&&r.push(t);return r}),[u,d]),g=(0,i.useCallback)((function(){for(var e of d){var r=(0,c.Z7)(u,e);if("doc"===r.type)return"editor";if("fileRef"===r.type)return"file";if("folder"===r.type)return t}return null}),[u,d,t]),j=(0,i.useCallback)((function(n){n.stopPropagation();var t=!A&&(_?n.metaKey:n.ctrlKey);y(!1),n.shiftKey?m(b(e)):m(e,t),"file"===r?o("file"):"doc"===r?o("editor"):"folder"===r&&o(g())}),[e,A,y,m,o,r,b,g]),w=(0,i.useCallback)((function(e){j(e),e.ctrlKey||e.metaKey||l(null)}),[j,l]),x=(0,i.useCallback)((function(e){"Enter"!==e.key&&" "!==e.key||j(e)}),[j]),C=(0,i.useCallback)((function(r){d.has(e)||j(r)}),[e,j,d]),S=!A&&v&&"pdf"!==t;return{isSelected:v,props:(0,i.useMemo)((function(){return{className:a()({selected:S}),"aria-selected":S,onClick:w,onContextMenu:C,onKeyPress:x}}),[w,C,x,S])}}function O(){var e=(0,i.useContext)(x);if(!e)throw new Error("useFileTreeSelectable is only available inside FileTreeSelectableProvider");return e}var T=function(e,r){return y.W.compare(e.name,r.name)};function*F(e){yield e._id;var r=b(e.folders).sort(T);for(var n of r)for(var t of F(n))yield t;var i=[].concat(b(e.docs),b(e.fileRefs)).sort(T);for(var o of i)yield o._id}},17776:function(e,r,n){n.d(r,{Cr:function(){return A},I9:function(){return m},d9:function(){return y},w4:function(){return h}});n(71372),n(96928),n(58188),n(88233),n(61229),n(92215),n(15735),n(79321),n(28673),n(6886),n(9575),n(96264),n(34115),n(634),n(71245),n(20796);function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,a(t.key),t)}}function o(e,r,n){return r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:String(r)}function l(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function u(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&d(e,r)}function c(e){var r=f();return function(){var n,i=p(e);if(r){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function s(e){var r="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(r){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return function(e,r,n){if(f())return Reflect.construct.apply(null,arguments);var t=[null];t.push.apply(t,r);var i=new(e.bind.apply(e,t));return n&&d(i,n.prototype),i}(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)},s(e)}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function d(e,r){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},d(e,r)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var m=function(e){u(InvalidFilenameError,e);var r=c(InvalidFilenameError);function InvalidFilenameError(){return l(this,InvalidFilenameError),r.call(this,"invalid filename")}return o(InvalidFilenameError)}(s(Error)),A=function(e){u(BlockedFilenameError,e);var r=c(BlockedFilenameError);function BlockedFilenameError(){return l(this,BlockedFilenameError),r.call(this,"blocked filename")}return o(BlockedFilenameError)}(s(Error)),h=function(e){u(DuplicateFilenameError,e);var r=c(DuplicateFilenameError);function DuplicateFilenameError(){return l(this,DuplicateFilenameError),r.call(this,"duplicate filename")}return o(DuplicateFilenameError)}(s(Error)),y=function(e){u(DuplicateFilenameMoveError,e);var r=c(DuplicateFilenameMoveError);function DuplicateFilenameMoveError(){return l(this,DuplicateFilenameMoveError),r.call(this,"duplicate filename on move")}return o(DuplicateFilenameMoveError)}(s(Error))},15270:function(e,r,n){n.d(r,{t:function(){return s}});n(58188),n(73439),n(21515),n(43430),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850),n(71372);var t=n(2784),i=n(28684),o=n(50325),a=n(30286);function l(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var c=function(e,r){return o.W.compare(e.path,r.path)};function s(e){var r=l((0,t.useState)(!1),2),n=r[0],o=r[1],u=l((0,t.useState)(null),2),s=u[0],f=u[1],d=l((0,t.useState)(!1),2),p=d[0],m=d[1],A=(0,a.Z)().signal;return(0,t.useEffect)((function(){e&&(o(!0),m(!1),f(null),(0,i.xA)("/project/".concat(e,"/entities"),{signal:A}).then((function(e){f(e.entities.sort(c))})).catch((function(e){return m(e)})).finally((function(){return o(!1)})))}),[e,A]),{loading:n,data:s,error:p}}},25137:function(e,r,n){n.d(r,{h:function(){return s}});n(58188),n(73439),n(21515),n(95342),n(77950),n(74069),n(1939),n(43430),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(21850),n(71372);var t=n(2784),i=n(28684),o=n(50325),a=n(30286);function l(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var c=function(e,r){return o.W.compare(e.path,r.path)};function s(e){var r=l((0,t.useState)(!1),2),n=r[0],o=r[1],u=l((0,t.useState)(null),2),s=u[0],f=u[1],d=l((0,t.useState)(!1),2),p=d[0],m=d[1],A=(0,a.Z)().signal;return(0,t.useEffect)((function(){e&&(o(!0),m(!1),f(null),(0,i.ty)("/project/".concat(e,"/compile"),{body:{check:"silent",draft:!1,incrementalCompilesEnabled:!1},signal:A}).then((function(e){if("success"===e.status){var r=e.outputFiles.filter((function(e){return e.path.match(/.*\.(pdf|png|jpeg|jpg|gif)/)}));e.outputFiles.forEach((function(r){r.clsiServerId=e.clsiServerId,r.compileGroup=e.compileGroup})),f(r.sort(c))}else m("linked-project-compile-error")})).catch((function(e){return m(e)})).finally((function(){return o(!1)})))}),[e,A]),{loading:n,data:s,error:p}}},87983:function(e,r,n){n.d(r,{Z:function(){return s}});n(26936),n(58188),n(73439),n(21515),n(43430),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(27233),n(77950),n(21850),n(71372);var t=n(2784),i=n(28684),o=n(50325),a=n(30286);function l(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var c=function(e,r){return o.W.compare(e.name,r.name)};function s(){var e=l((0,t.useState)(!0),2),r=e[0],n=e[1],o=l((0,t.useState)(null),2),u=o[0],s=o[1],f=l((0,t.useState)(!1),2),d=f[0],p=f[1],m=(0,a.Z)().signal;return(0,t.useEffect)((function(){(0,i.xA)("/user/projects",{signal:m}).then((function(e){s(e.projects.sort(c))})).catch((function(e){return p(e)})).finally((function(){return n(!1)}))}),[m]),{loading:r,data:u,error:d}}},50325:function(e,r,n){n.d(r,{W:function(){return t}});var t=new Intl.Collator("en",{numeric:!0,sensitivity:"variant",caseFirst:"upper"})},38113:function(e,r,n){n.d(r,{Z7:function(){return c},gl:function(){return a},mz:function(){return u},we:function(){return o}});n(15735),n(58188),n(93244),n(28673),n(6886),n(1939),n(18178);var t=n(91601),i=n.n(t);function o(e,r){var n=c(e,r);if(n)return n;throw new(i())("Entity not found in tree",{entityId:r})}function a(e,r){var n=new Set;return r.forEach((function(r){n.add(o(e,r))})),n}function l(e){var r=new Set([e._id]);for(var n in e.folders){l(e.folders[n]).forEach((function(e){r.add(e)}))}return r}function u(e){var r=new Set;return e.forEach((function(e){l(e).forEach((function(e){r.add(e)}))})),r}function c(e,r,n){for(var t in n||(n=[e._id]),e.docs){var i=e.docs[t];if(i._id===r)return{entity:i,type:"doc",parent:e.docs,parentFolderId:e._id,path:n,index:t}}for(var o in e.fileRefs){var a=e.fileRefs[o];if(a._id===r)return{entity:a,type:"fileRef",parent:e.fileRefs,parentFolderId:e._id,path:n,index:o}}for(var l in e.folders){var u=e.folders[l];if(u._id===r)return{entity:u,type:"folder",parent:e.folders,parentFolderId:e._id,path:n,index:l};var s=c(u,r,n.concat(u._id));if(s)return s}return null}},65487:function(e,r,n){n.d(r,{Z:function(){return t}});n(39529);function t(e){var r=e.split(".").pop();return r=r?r.toLowerCase():r,["png","pdf","jpg","jpeg","gif"].includes(r)?"image":["csv","xls","xlsx"].includes(r)?"table":["py","r"].includes(r)?"file-text":["bib"].includes(r)?"book":"file"}},47897:function(e,r,n){n.d(r,{s:function(){return a}});n(77950),n(74069);var t,i=n(87754),o=n(66041),a=function(e,r){return t||(t=new i.m8((0,o.Z)("ol-ExposedSettings").fileIgnorePattern,{nocase:!0,dot:!0})),!!e&&(!r||!t.match(r+"/"+e))}},86994:function(e,r,n){n.d(r,{j:function(){return i},z:function(){return o}});n(49228),n(58188),n(26936);var t=n(38113);function i(e,r,n){return!o(e,r,n)}function o(e,r,n){return e._id!==r&&(e=(0,t.Z7)(e,r).entity),e.docs.find((function(e){return e.name===n}))||e.fileRefs.find((function(e){return e.name===n}))||e.folders.find((function(e){return e.name===n}))}},61416:function(e,r,n){n.d(r,{AG:function(){return l},tQ:function(){return u}});n(17368),n(24471),n(77950),n(51172),n(88233),n(85940),n(16781),n(74069),n(21850),n(28673),n(15735),n(6886),n(27233);var t=new RegExp("[\\/\\\\\\*\\u0000-\\u001F\\u007F\\u0080-\\u009F\\uD800-\\uDFFF]","g"),i=new RegExp("(^\\.$)|(^\\.\\.$)|(^\\s+)|(\\s+$)","g"),o=new RegExp("^(prototype|constructor|toString|toLocaleString|valueOf|hasOwnProperty|isPrototypeOf|propertyIsEnumerable|__defineGetter__|__lookupGetter__|__defineSetter__|__lookupSetter__|__proto__)$"),a=1024;function l(e){return(r=e).length>0&&r.length<=a&&!e.match(t)&&!e.match(i);var r}function u(e){return o.test(e)}},79401:function(e,r,n){n.d(r,{Xe:function(){return c},c4:function(){return l},g6:function(){return a},zG:function(){return u}});n(18178),n(34769),n(34115);var t=n(28684),i=["endpoint"];function o(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e,r,n,i){return(0,t.ty)("/project/".concat(e,"/").concat(s(r),"/").concat(n,"/rename"),{body:{name:i}})}function l(e,r,n){return(0,t.K$)("/project/".concat(e,"/").concat(s(r),"/").concat(n))}function u(e,r,n,i){return(0,t.ty)("/project/".concat(e,"/").concat(s(r),"/").concat(n,"/move"),{body:{folder_id:i}})}function c(e,r,n){var a=n.endpoint,l=o(n,i);return(0,t.ty)("/project/".concat(e,"/").concat(a),{body:{parent_folder_id:r,...l}})}function s(e){return"fileRef"===e?"file":e}},7242:function(e,r,n){n.d(r,{h:function(){return y},z:function(){return v}});n(96708),n(26936),n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(27233),n(77950),n(21850);var t=n(2784),i=n(72526),o=n(8596),a=n(91661),l=n(48910),u=n(37246),c=n(45177),s=n(32755),f=n(96227),d=n(32687),p=n(52322);function m(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return A(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var h=(0,t.createContext)(void 0),y=function(e){var r=e.children,n=(0,i.d)(),A=n.rootDocId,y=n.owner,v=(0,o.I)(),b=v.eventEmitter,g=v.projectJoined,j=(0,a.QA)(),w=j.openDocId,x=j.currentDocumentId,C=j.openInitialDoc,S=(0,l.f)().selectEntity,E=m((0,u.Z)("openFile"),2)[1],I=m((0,t.useState)(null),2),_=I[0],k=I[1],O=m((0,t.useState)(0),2),T=O[0],F=O[1],R=m((0,t.useState)(!1),2),B=R[0],Z=R[1],P=(0,t.useCallback)((function(){Z(!0)}),[]),M=(0,t.useCallback)((function(e){if(c.c.log("File tree selection changed",e),F(e.length),1===e.length){var r=m(e,1)[0];if("folder"!==r.type){k(r),"doc"===r.type&&B&&(w(r.entity._id,{keepCurrentView:!0}),r.entity.name.endsWith(".bib")&&(0,f.BZ)("open-bib-file",{projectOwner:y._id,isSampleFile:"sample.bib"===r.entity.name,linkedFileProvider:null}));var n="fileRef"===r.type?(0,s.s)(r.entity):null;if(E(n),n){var t,i;if(null!=r&&null!==(t=r.entity)&&void 0!==t&&null!==(t=t.name)&&void 0!==t&&t.endsWith(".bib"))(0,f.BZ)("open-bib-file",{projectOwner:y._id,isSampleFile:!1,linkedFileProvider:null===(i=r.entity.linkedFileData)||void 0===i?void 0:i.provider});window.dispatchEvent(new CustomEvent("file-view:file-opened"))}}}else k(null)}),[B,E,w,y]),D=(0,t.useCallback)((function(e){b.emit("entity:deleted",e),e.entity._id===x&&w(A)}),[b,x,w,A]);(0,d.Z)("doc:after-opened",(0,t.useCallback)((function(e){S(e.detail.docId)}),[S]));var N=(0,t.useRef)(!1);(0,t.useEffect)((function(){A&&B&&g&&!N.current&&(N.current=!0,C(A))}),[B,C,g,A]);var L=(0,t.useMemo)((function(){return{selectedEntityCount:T,openEntity:_,handleFileTreeInit:P,handleFileTreeSelect:M,handleFileTreeDelete:D}}),[D,P,M,_,T]);return(0,p.jsx)(h.Provider,{value:L,children:r})},v=function(){var e=(0,t.useContext)(h);if(!e)throw new Error("useFileTreeOpenContext is only available inside FileTreeOpenProvider");return e}},66624:function(e,r,n){n.d(r,{I:function(){return c},f:function(){return u}});n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var t=n(2784),i=n(52322);function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var l=(0,t.createContext)(void 0),u=function(e){var r=e.children,n=o((0,t.useState)(null),2),a=n[0],u=n[1],c=(0,t.useCallback)((function(e){u(e)}),[]);return(0,i.jsxs)(l.Provider,{value:a,children:[(0,i.jsx)("div",{className:"global-alerts",ref:c}),r]})},c=function(){var e=(0,t.useContext)(l);if(void 0===e)throw new Error("useGlobalAlertsContainer is only available inside GlobalAlertsProvider");return e}},52654:function(e,r,n){n.d(r,{k2:function(){return w},oU:function(){return j}});n(15735),n(79321),n(58188),n(28673),n(6886),n(43450),n(67890),n(35883),n(18178),n(71372),n(34115),n(634),n(20796),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var t=n(2784),i=n(8596),o=n(5446),a=n(91661),l=n(76635),u=n.n(l),c=n(28684),s=n(28865),f=n(84050),d=n(65403),p=n(32687),m=n(50066),A=n(86845),h=n(75234),y=n(52322);function v(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return b(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var g=(0,t.createContext)(void 0),j=function(e){var r=e.children,n=(0,h.$G)().t,l=(0,i.I)(),b=l.eventEmitter,j=l.projectId,w=(0,o.Km)().socket,x=(0,s.uS)().onlineUsersCount,C=(0,f._i)().permissionsLevel,S=(0,A.P_)(),E=(0,a.QA)().currentDocument,I=(0,m.a)().showGenericMessageModal,_=v((0,t.useState)({}),2),k=_[0],O=_[1],T=(0,t.useRef)(new Map);(0,t.useEffect)((function(){var e=function(e){var r=v(e.detail,1)[0];"doc"===r.type&&O((function(e){return u().omit(e,r.entity._id)}))};return b.on("entity:deleted",e),function(){b.off("entity:deleted",e)}}),[b]),(0,t.useEffect)((function(){window.dispatchEvent(new CustomEvent("project:metadata",{detail:k}))}),[k]);var F=(0,t.useCallback)((function(e){var r=e.docId,n=e.meta;null!=r&&null!=n&&O((function(e){return{...e,[r]:n}}))}),[]),R=(0,t.useCallback)((function(){return u().flattenDeep(Object.values(k).map((function(e){return e.labels})))}),[k]),B=(0,t.useCallback)((function(){var e={};for(var r of Object.values(k))for(var n of Object.entries(r.packages)){var t=v(n,2),i=t[0],o=t[1];e[i]=o}return e}),[k]),Z=(0,t.useCallback)((function(){(0,c.xA)("/project/".concat(j,"/metadata")).then((function(e){var r=e.projectMeta;r&&O(r)}))}),[j]),P=(0,t.useCallback)((function(e){var r=x>0;(0,c.ty)("/project/".concat(j,"/doc/").concat(e,"/metadata"),{body:{broadcast:r}}).then((function(e){!r&&e&&F(e)}))}),[F,x,j]),M=(0,t.useCallback)((function(e){if("readOnly"!==C){var r=T.current.get(e);null!=r&&(window.clearTimeout(r),T.current.delete(e)),T.current.set(e,window.setTimeout((function(){P(e),T.current.delete(e)}),2e3))}}),[P,C]),D=(0,t.useCallback)((function(e){F(e)}),[F]);(0,d.Z)(w,"broadcastDocMeta",D);var N=(0,t.useCallback)((function(){E&&M(E.doc_id)}),[E,M]);(0,p.Z)("editor:metadata-outdated",N);var L=(0,t.useRef)(S);(0,t.useEffect)((function(){L.current=S}),[S]),(0,t.useEffect)((function(){var e=function(e){v(e.detail,1)[0].project.deletedByExternalDataSource&&I(n("project_renamed_or_deleted"),n("project_renamed_or_deleted_detail")),window.setTimeout((function(){L.current.write&&Z()}),200)};return b.once("project:joined",e),function(){b.off("project:joined",e)}}),[b,Z,I,n]);var Q=(0,t.useMemo)((function(){return{metadata:{state:{documents:k},getAllLabels:R,getAllPackages:B}}}),[k,R,B]);return(0,y.jsx)(g.Provider,{value:Q,children:r})};function w(){var e=(0,t.useContext)(g);if(!e)throw new Error("useMetadataContext is only available inside MetadataProvider");return e}},19816:function(e,r,n){n.d(r,{H:function(){return A},k:function(){return h}});n(71372),n(28673),n(15735),n(6886),n(34115),n(634),n(58188),n(20796),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var t=n(2784),i=n(44466),o=n(32687),a=n(96227),l=n(37246),u=n(79477),c=n(76066),s=n(72526),f=n(52322);function d(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return p(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var m=(0,t.createContext)(void 0),A=function(e){var r=e.children,n=d((0,t.useState)(void 0),2),p=n[0],A=n[1],h=d((0,t.useState)(-1),2),v=h[0],b=h[1],g=d((0,t.useState)(!1),2),j=g[0],w=g[1],x=d((0,t.useState)(!1),2),C=x[0],S=x[1],E=d((0,t.useState)(!1),2),I=E[0],_=E[1],k=(0,i.Z)("editor:gotoLine",!0);(0,o.Z)("file-view:file-opened",(0,t.useCallback)((function(e){w(!0)}),[])),(0,o.Z)("scroll:editor:update",(0,t.useCallback)((function(e){I?_(!1):b(e.detail+1)}),[I])),(0,o.Z)("cursor:editor:update",(0,t.useCallback)((function(e){C?S(!1):b(e.detail.row+1)}),[C])),(0,o.Z)("doc:after-opened",(0,t.useCallback)((function(e){e.detail.isNewDoc&&S(!0),w(!1),_(!0)}),[]));var O=(0,t.useCallback)((function(e,r){_(!0),k(e,0,r),a.BZ("outline-jump-to-line")}),[k]),T=(0,t.useMemo)((function(){return y(null==p?void 0:p.items,v)}),[p,v]),F=d((0,l.Z)("editor.open_doc_name"),1)[0],R=(0,t.useMemo)((function(){return!!F&&(0,u.Z)(F)}),[F]),B=(0,s.d)()._id,Z="file_outline.expanded.".concat(B),P=d((0,t.useState)((function(){return!1!==c.Z.getItem(Z)})),2),M=P[0],D=P[1],N=R&&!j,L=(0,t.useCallback)((function(){N&&(c.Z.setItem(Z,!M),a.BZ(M?"outline-collapse":"outline-expand"),D(!M))}),[N,M,Z]),Q=(0,t.useMemo)((function(){return{flatOutline:p,setFlatOutline:A,highlightedLine:T,jumpToLine:O,canShowOutline:N,outlineExpanded:M,toggleOutlineExpanded:L}}),[p,T,O,N,M,L]);return(0,f.jsx)(m.Provider,{value:Q,children:r})},h=function(){var e=(0,t.useContext)(m);if(!e)throw new Error("useOutlineProvider is only available inside OutlineProvider");return e},y=function(e,r){if(!e)return-1;var n=-1;for(var t of e){if(t.line>r)return n;n=t.line}return n}},57743:function(e,r,n){n.d(r,{H6:function(){return v},a4:function(){return g},nl:function(){return b}});n(15735),n(58188),n(6886),n(26936),n(96708),n(71372),n(34115),n(634),n(20796),n(28673),n(32501),n(88233),n(27233),n(77950),n(21850);var t=n(42957),i=n(2784),o=n(8596),a=n(5446),l=n(76635),u=n.n(l),c=n(28684),s=n(37246),f=n(47481),d=n(14595),p=n(45177),m=n(52322);function A(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return h(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var y=(0,i.createContext)(void 0);function v(e){e.set("$root._references",{keys:[]})}var b=function(e){var r=e.children,n=(0,f.O)().fileTreeData,l=(0,o.I)(),h=l.eventEmitter,v=l.projectId,b=(0,a.Km)().socket,g=A((0,s.Z)("$root._references"),2),j=g[0],w=g[1],x=A((0,i.useState)({}),2),C=x[0],S=x[1],E=(0,i.useCallback)((function(e,r){var n=j.keys,t=r?e:u().union(n,e);window.dispatchEvent(new CustomEvent("project:references",{detail:t})),w({keys:t})}),[j.keys,w]),I=(0,i.useCallback)((function(e){(0,c.ty)("/project/".concat(v,"/references/indexAll"),{body:{shouldBroadcast:e}}).then((function(e){E(e.keys,!0)})).catch((function(e){p.c.error(e)}))}),[v,E]),_=(0,i.useCallback)((function(e,r){var n=e.doc_id,i=e._doc.snapshot,o=Date.now(),a=(0,t.Y)("blob "+i.length+"\0"+i),l=C[n];l&&l.timestamp>o-216e5&&l.hash===a||(I(r),S((function(e){return{...e,[n]:{hash:a,timestamp:o}}})))}),[C,I]);(0,i.useEffect)((function(){var e=function(e){var r,t=A(e.detail,1)[0];t.doc_id&&null!==(r=(0,d.I)(n,t.doc_id))&&void 0!==r&&null!==(r=r.name)&&void 0!==r&&r.endsWith(".bib")&&_(t,!0)};return h.on("document:closed",e),function(){h.off("document:closed",e)}}),[h,n,_]),(0,i.useEffect)((function(){var e=function(){I(!0)};return h.on("references:should-reindex",e),function(){h.off("references:should-reindex",e)}}),[h,I]),(0,i.useEffect)((function(){var e=function(){b.on("references:keys:updated",(function(e,r){return E(e,r)})),I(!1)};return h.once("project:joined",e),function(){h.off("project:joined",e)}}),[h,I,b,E]);var k=(0,i.useMemo)((function(){return{indexReferencesIfDocModified:_,indexAllReferences:I}}),[_,I]);return(0,m.jsx)(y.Provider,{value:k,children:r})};function g(){var e=(0,i.useContext)(y);if(!e)throw new Error("useReferencesContext is only available inside ReferencesProvider");return e}},32755:function(e,r,n){n.d(r,{P:function(){return i},s:function(){return t}});n(26936);function t(e){return{_id:e._id,name:e.name,id:e._id,type:"file",selected:!0,linkedFileData:e.linkedFileData,created:e.created?new Date(e.created):new Date}}function i(e){return{...t(e),created:e.created}}},14185:function(e,r,n){n.d(r,{XA:function(){return l},bx:function(){return a},yk:function(){return u}});var t=n(39493),i=n(79657),o=n(52322);function a(){return(0,t.l5)().detachRole?null:(0,o.jsx)(i.Z,{})}function l(){var e=(0,t.l5)(),r=e.detachRole,n=e.detachIsLinked;return"detacher"===r&&n?(0,o.jsx)(i.Z,{}):null}function u(){var e=(0,t.l5)(),r=e.detachRole,n=e.detachIsLinked;return"detached"===r&&n?(0,o.jsx)(i.Z,{}):null}},78237:function(e,r,n){n.d(r,{Z:function(){return l},j:function(){return a}});var t=n(2784),i=n(32687),o=n(83976),a=function(e){if(e.shiftKey||e.altKey)return!1;if(e.ctrlKey){if("s"===e.key||"Enter"===e.key||"."===e.key)return!0;if("S"===e.key&&!e.shiftKey)return!0}else if(e.metaKey){if("s"===e.key||"Enter"===e.key)return!0;if("S"===e.key&&!e.shiftKey)return!0}};function l(e,r){var n=(0,t.useCallback)((function(r){a(r)&&(r.preventDefault(),e())}),[e]),l=(0,t.useCallback)((function(){e()}),[e]);(0,i.Z)("pdf:recompile",l),(0,t.useEffect)((function(){return document.body.addEventListener("keydown",n),function(){document.body.removeEventListener("keydown",n)}}),[n]);var u=(0,o.Z)("set-changed-at",r,"detacher","detached"),c=(0,t.useCallback)((function(){u(Date.now())}),[u]);(0,i.Z)("doc:changed",c)}},12296:function(e,r,n){n.d(r,{Z:function(){return E},s:function(){return S}});n(71372),n(95342),n(58188),n(73439),n(21515),n(43105),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var t=n(2784),i=n(17631),o=n(2571),a=n(63584),l=n(75234),u=n(10280),c=n(11685),s=n(84050),f=n(28500),d=n(44872),p=n(52322),m=(0,t.lazy)((function(){return Promise.all([n.e(7198),n.e(5069),n.e(4287),n.e(5963)]).then(n.bind(n,83482)).then((function(e){return{default:e.ReadOnlyTokenLink}}))})),A=(0,t.lazy)((function(){return Promise.all([n.e(7198),n.e(5069),n.e(4287),n.e(2187),n.e(8458),n.e(4542)]).then(n.bind(n,64542))}));function h(e){var r=e.show,n=e.cancel,h=e.animation,v=e.inFlight,b=e.error,g=(0,l.$G)().t,j=(0,s._i)().isRestrictedTokenMember;return(0,p.jsxs)(c.Z,{show:r,onHide:n,animation:h,children:[(0,p.jsx)(i.Z.Header,{closeButton:!0,children:(0,p.jsx)(i.Z.Title,{children:g("share_project")})}),(0,p.jsx)(i.Z.Body,{className:"modal-body-share modal-link-share-new",children:(0,p.jsx)(o.Z,{fluid:!0,children:(0,p.jsx)(t.Suspense,{fallback:(0,p.jsx)(f.w,{minHeight:"15rem"}),children:j?(0,p.jsx)(m,{}):(0,p.jsx)(A,{})})})}),(0,p.jsxs)(i.Z.Footer,{className:"modal-footer-share",children:[(0,p.jsxs)("div",{className:"modal-footer-left",children:[v&&(0,p.jsx)(u.Z,{type:"refresh",spin:!0}),b&&(0,p.jsx)("span",{className:"text-danger error",children:(0,p.jsx)(y,{error:b})})]}),(0,p.jsx)("div",{className:"modal-footer-right",children:(0,p.jsx)(d.Z,{onClick:n,as:a.Z,type:"button",bsStyle:null,className:"btn-secondary",disabled:v,children:g("close")})})]})]})}function y(e){var r=e.error,n=(0,l.$G)().t;switch(r){case"cannot_invite_non_user":return(0,p.jsx)(p.Fragment,{children:n("cannot_invite_non_user")});case"cannot_verify_user_not_robot":return(0,p.jsx)(p.Fragment,{children:n("cannot_verify_user_not_robot")});case"cannot_invite_self":return(0,p.jsx)(p.Fragment,{children:n("cannot_invite_self")});case"invalid_email":return(0,p.jsx)(p.Fragment,{children:n("invalid_email")});case"too_many_requests":return(0,p.jsx)(p.Fragment,{children:n("too_many_requests")});default:return(0,p.jsx)(p.Fragment,{children:n("generic_something_went_wrong")})}}var v=n(72526),b=n(22276),g=n(96227),j=n(76066);function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return x(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var C=(0,t.createContext)(void 0);function S(){var e=(0,t.useContext)(C);if(!e)throw new Error("useShareProjectContext is only available inside ShareProjectProvider");return e}var E=t.memo((function(e){var r=e.handleHide,n=e.show,i=e.handleOpen,o=e.animation,a=void 0===o||o,l=w((0,t.useState)(!1),2),u=l[0],c=l[1],f=w((0,t.useState)(),2),d=f[0],m=f[1],A=(0,v.d)(),y=(0,s._i)().isProjectOwner,x=(0,b.yW)().splitTestVariants;(0,t.useEffect)((function(){var e;if(!(!y||!A.features)&&-1!==A.features.collaborators&&A.members.filter((function(e){return"readAndWrite"===e.privileges})).length>(null!==(e=A.features.collaborators)&&void 0!==e?e:1)){var r="last-shown-share-modal.".concat(A._id),n=j.Z.getItem(r);(!n||n+864e5<Date.now())&&(i(),j.Z.setItem(r,Date.now()))}}),[A,y,i]),(0,t.useEffect)((function(){n&&(0,g.BZ)("share-modal-opened",{splitTestVariant:x["null-test-share-modal"],project_id:A._id})}),[x,A._id,n]),(0,t.useEffect)((function(){n&&m(void 0)}),[n]);var S=(0,t.useCallback)((function(){u||r()}),[r,u]),E=(0,t.useCallback)((function(e){m(void 0),c(!0);var r=e();return r.catch((function(e){var r,n;m((null===(r=e.data)||void 0===r?void 0:r.errorReason)||(null===(n=e.data)||void 0===n?void 0:n.error)||"generic_something_went_wrong")})),r.finally((function(){c(!1)})),r}),[]),I=(0,t.useCallback)((function(e){return Object.assign(A,e)}),[A]);return A?(0,p.jsx)(C.Provider,{value:{updateProject:I,monitorRequest:E,inFlight:u,setInFlight:c,error:d,setError:m},children:(0,p.jsx)(h,{animation:a,cancel:S,error:d,inFlight:u,show:n})}):null}))},72891:function(e,r,n){n.d(r,{Z:function(){return S},s:function(){return C}});n(71372),n(58188),n(73439),n(21515),n(43105),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var t=n(2784),i=n(17631),o=n(2571),a=n(63584),l=n(75234),u=n(10280),c=n(11685),s=n(84050),f=n(28500),d=n(44872),p=n(52322),m=(0,t.lazy)((function(){return Promise.all([n.e(7198),n.e(5069),n.e(4287),n.e(9136)]).then(n.bind(n,56543)).then((function(e){return{default:e.ReadOnlyTokenLink}}))})),A=(0,t.lazy)((function(){return Promise.all([n.e(7198),n.e(5069),n.e(4287),n.e(2187),n.e(8458),n.e(3911)]).then(n.bind(n,93911))}));function h(e){var r=e.show,n=e.cancel,h=e.animation,v=e.inFlight,b=e.error,g=(0,l.$G)().t,j=(0,s._i)().isRestrictedTokenMember;return(0,p.jsxs)(c.Z,{show:r,onHide:n,animation:h,children:[(0,p.jsx)(i.Z.Header,{closeButton:!0,children:(0,p.jsx)(i.Z.Title,{children:g("share_project")})}),(0,p.jsx)(i.Z.Body,{className:"modal-body-share",children:(0,p.jsx)(o.Z,{fluid:!0,children:(0,p.jsx)(t.Suspense,{fallback:(0,p.jsx)(f.w,{minHeight:"15rem"}),children:j?(0,p.jsx)(m,{}):(0,p.jsx)(A,{})})})}),(0,p.jsxs)(i.Z.Footer,{className:"modal-footer-share",children:[(0,p.jsxs)("div",{className:"modal-footer-left",children:[v&&(0,p.jsx)(u.Z,{type:"refresh",spin:!0}),b&&(0,p.jsx)("span",{className:"text-danger error",children:(0,p.jsx)(y,{error:b})})]}),(0,p.jsx)("div",{className:"modal-footer-right",children:(0,p.jsx)(d.Z,{onClick:n,as:a.Z,type:"button",bsStyle:null,className:"btn-secondary",disabled:v,children:g("close")})})]})]})}function y(e){var r=e.error,n=(0,l.$G)().t;switch(r){case"cannot_invite_non_user":return(0,p.jsx)(p.Fragment,{children:n("cannot_invite_non_user")});case"cannot_verify_user_not_robot":return(0,p.jsx)(p.Fragment,{children:n("cannot_verify_user_not_robot")});case"cannot_invite_self":return(0,p.jsx)(p.Fragment,{children:n("cannot_invite_self")});case"invalid_email":return(0,p.jsx)(p.Fragment,{children:n("invalid_email")});case"too_many_requests":return(0,p.jsx)(p.Fragment,{children:n("too_many_requests")});default:return(0,p.jsx)(p.Fragment,{children:n("generic_something_went_wrong")})}}var v=n(72526),b=n(22276),g=n(96227);function j(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return w(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var x=(0,t.createContext)(void 0);function C(){var e=(0,t.useContext)(x);if(!e)throw new Error("useShareProjectContext is only available inside ShareProjectProvider");return e}var S=t.memo((function(e){var r=e.handleHide,n=e.show,i=e.animation,o=void 0===i||i,a=j((0,t.useState)(!1),2),l=a[0],u=a[1],c=j((0,t.useState)(),2),s=c[0],f=c[1],d=(0,v.d)(),m=(0,b.yW)().splitTestVariants;(0,t.useEffect)((function(){n&&(0,g.BZ)("share-modal-opened",{splitTestVariant:m["null-test-share-modal"],project_id:d._id})}),[m,d._id,n]),(0,t.useEffect)((function(){n&&f(void 0)}),[n]);var A=(0,t.useCallback)((function(){l||r()}),[r,l]),y=(0,t.useCallback)((function(e){f(void 0),u(!0);var r=e();return r.catch((function(e){var r,n;f((null===(r=e.data)||void 0===r?void 0:r.errorReason)||(null===(n=e.data)||void 0===n?void 0:n.error)||"generic_something_went_wrong")})),r.finally((function(){u(!1)})),r}),[]),w=(0,t.useCallback)((function(e){return Object.assign(d,e)}),[d]);return d?(0,p.jsx)(x.Provider,{value:{updateProject:w,monitorRequest:y,inFlight:l,setInFlight:u,error:s,setError:f},children:(0,p.jsx)(h,{animation:o,cancel:A,error:s,inFlight:l,show:n})}):null}))},66123:function(e,r,n){n.d(r,{bh:function(){return A},eH:function(){return m},np:function(){return f},c_:function(){return u},GY:function(){return c},yV:function(){return l},xX:function(){return p},h1:function(){return d},hS:function(){return s}});n(18178);var t,i,o=n(28684);n(58188),n(73439);var a=n(66041);function l(e,r,n){var l;return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(r,n){if(e||!window.grecaptcha)return r();try{t||(t=window.grecaptcha.render("recaptcha",{callback:function(e){i&&(i(e),i=void 0),window.grecaptcha.reset()}})),i=r}catch(e){n(e)}}))}(null===(l=(0,a.Z)("ol-ExposedSettings").recaptchaDisabled)||void 0===l?void 0:l.invite).then((function(t){return(0,o.ty)("/project/".concat(e,"/invite"),{body:{email:r,privileges:n,"g-recaptcha-response":t}})}))}function u(e,r){return(0,o.ty)("/project/".concat(e,"/invite/").concat(r._id,"/resend"))}function c(e,r){return(0,o.K$)("/project/".concat(e,"/invite/").concat(r._id))}function s(e,r,n){return(0,o.BS)("/project/".concat(e,"/users/").concat(r._id),{body:n})}function f(e,r){return(0,o.K$)("/project/".concat(e,"/users/").concat(r._id))}function d(e,r){return(0,o.ty)("/project/".concat(e,"/transfer-ownership"),{body:{user_id:r._id}})}function p(e,r){return(0,o.ty)("/project/".concat(e,"/settings/admin"),{body:{publicAccessLevel:r}})}function m(e){return(0,o.xA)("/project/".concat(e,"/members"))}function A(e){return(0,o.xA)("/project/".concat(e,"/invites"))}},81594:function(e,r,n){n.d(r,{U:function(){return l}});var t=n(19034),i=n.n(t);var o,a,l=(o=new Date(2024,6,29),a="MMMM Do",o?(null==a&&(a="Do MMM YYYY, h:mm a"),i()(o).format(a)):"N/A")},17317:function(e,r,n){n.d(r,{LK:function(){return a},UD:function(){return u},mB:function(){return c}});n(28673),n(15735),n(6886),n(95342),n(58188),n(99805);var t=n(1727),i=t.Py.define(),o=t.Py.define(),a=function(){return[l]},l=t.QQ.define({create:function(){return[]},update:function(e,r){var n=function(r){r.is(i)&&e.push(r.value),r.is(o)&&(e=e.filter((function(e){return!(e.effect===r.value.effect&&e.callback===r.value.callback)})));for(var n=function(n){var i,o=e[n];r.is(o.effect)&&(setTimeout((function(){return o.callback(r.value)})),null!==(i=o.options)&&void 0!==i&&i.once&&(e.splice(n,1),--n));t=n},t=0;t<e.length;++t)n(t)};for(var t of r.effects)n(t);return e}}),u=function(e,r,n,t){e.dispatch({effects:i.of({effect:r,callback:n,options:t})})},c=function(e,r,n){e.dispatch({effects:o.of({effect:r,callback:n})})}},78014:function(e,r,n){n.d(r,{HY:function(){return h},Hs:function(){return d},J$:function(){return p},Z0:function(){return m},jv:function(){return A},op:function(){return v}});n(28673),n(15735),n(6886),n(43450),n(58188),n(73439),n(93244),n(26936),n(39529),n(31235),n(9575),n(96264),n(34115),n(634),n(71372),n(71245),n(20796);var t=n(1727),i=n(65329),o=n(17317),a=n(6956),l=n(45177);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,s(t.key),t)}}function s(e){var r=function(e,r){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,r||"default");if("object"!=u(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==u(r)?r:String(r)}function f(e,r){return e?{...e,from:r.mapPos(e.from),to:r.mapPos(e.to)}:e}var d=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=r}var r,n,t;return r=e,(n=[{key:"from",get:function(){return this.props.from}},{key:"to",get:function(){return this.props.to}},{key:"caption",get:function(){return this.props.caption}},{key:"label",get:function(){return this.props.label}},{key:"width",get:function(){return this.props.width}},{key:"unknownGraphicsArguments",get:function(){return this.props.unknownGraphicsArguments}},{key:"graphicsCommandArguments",get:function(){return this.props.graphicsCommandArguments}},{key:"graphicsCommand",get:function(){return this.props.graphicsCommand}},{key:"file",get:function(){return this.props.file}},{key:"map",value:function(r){return new e({from:r.mapPos(this.from),to:r.mapPos(this.to),caption:f(this.caption,r),label:f(this.label,r),graphicsCommand:f(this.graphicsCommand,r),width:this.width,file:f(this.file,r),graphicsCommandArguments:f(this.graphicsCommandArguments,r),unknownGraphicsArguments:this.unknownGraphicsArguments})}}])&&c(r.prototype,n),t&&c(r,t),Object.defineProperty(r,"prototype",{writable:!1}),e}(),p=t.Py.define(),m=t.QQ.define({create:function(){return null},update:function(e,r){var n;for(var t of r.effects)t.is(p)&&(n=t.value);return void 0!==n?n:e?e.map(r.changes):e}}),A=function(){return[m]};function h(e){var r=new AbortController,n=new Promise((function(n){var t=function(){l.c.warn("Aborting wait for file tree update"),(0,o.mB)(e,a.tw,i),n()};function i(){r.signal.aborted||(r.signal.removeEventListener("abort",t),n())}r.signal.addEventListener("abort",t,{once:!0}),(0,o.UD)(e,a.tw,i,{once:!0})}));return{withTimeout:function(){return setTimeout((function(){return r.abort()}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:500),n},promise:n}}var y=new Set(["image/jpeg","image/png","application/pdf"]),v=function(){return i.tk.domEventHandlers({drop:function(e){if(e.dataTransfer&&0!==e.dataTransfer.files.length){var r=e.dataTransfer.files[0];y.has(r.type)&&window.dispatchEvent(new CustomEvent("figure-modal:paste-image",{detail:{name:r.name,type:r.type,data:r}}))}},paste:function(e){if(e.clipboardData&&0!==e.clipboardData.files.length&&!e.clipboardData.types.includes("text/plain")){var r=e.clipboardData.files[0];y.has(r.type)&&window.dispatchEvent(new CustomEvent("figure-modal:paste-image",{detail:{name:r.name,type:r.type,data:r}}))}}})}},6956:function(e,r,n){n.d(r,{DN:function(){return v},L3:function(){return f},S3:function(){return b},dK:function(){return p},jF:function(){return u},m0:function(){return A},tw:function(){return h},uk:function(){return c},yC:function(){return y}});n(28673),n(15735),n(6886);var t=n(1727),i=n(9685),o=n(65329),a=n(77120),l=n(31931),u=t.Py.define(),c=(0,l.V)(u),s=new t.F6,f=t.QQ.define({create:function(){},update:function(e,r){for(var n of r.effects)if(n.is(h))return n.value;return e}}),d=new t.F6,p=function(e,r,n){var t=n.syntaxValidation;return d.of(m(e,r,t))},m=function(e,r,n){var t=a.c6.matchFilename(i.M,e);return t?[s.of(a.c.of("    ")),f,o.lg.define((function(e){return t.load().then((function(t){e.dispatch({effects:[s.reconfigure(t),u.of(null)]}),e.dispatch({effects:[h.of(r),v.of(n)]})})),{}})),f]:[]},A=function(e,r,n){return{effects:d.reconfigure(m(e,r,n))}},h=t.Py.define(),y=function(e){return{effects:h.of(e)}},v=t.Py.define(),b=function(e){return{effects:v.of(e)}}},9685:function(e,r,n){n.d(r,{M:function(){return i}});n(15735),n(58188),n(73439),n(28673),n(6886);var t=n(77120),i=[t.c6.of({name:"latex",extensions:["tex","sty","cls","clo","bst","bbl","pdf_tex","pdf_t","map","fd","enc","def","mf","pgf","tikz","bbx","cbx","dbx","lbx","lco","ldf","xmpdata","Rnw","rnw","lyx","inc","dtx","hak","eps_tex","brf","ins","hva","Rtex","rtex","pstex","pstex_t","gin","fontspec","pygstyle","pygtex","ps_tex","ltx"],load:function(){return Promise.all([n.e(3539),n.e(7042),n.e(7029),n.e(6511),n.e(375)]).then(n.bind(n,10375)).then((function(e){return e.latex()}))}}),t.c6.of({name:"bibtex",extensions:["bib"],load:function(){return Promise.all([n.e(3539),n.e(5303)]).then(n.bind(n,5303)).then((function(e){return e.bibtex()}))}}),t.c6.of({name:"markdown",extensions:["md","markdown"],load:function(){return Promise.all([n.e(3539),n.e(915),n.e(7029),n.e(7544)]).then(n.bind(n,7544)).then((function(e){return e.markdown()}))}})]},49272:function(e,r,n){n.r(r),n.d(r,{AffilCtrlSeq:function(){return te},AffiliationCtrlSeq:function(){return ie},Ampersand:function(){return dr},AuthorCtrlSeq:function(){return ne},BareFilePathArgument:function(){return Ar},Begin:function(){return A},BibKeyArgument:function(){return $e},BibliographyCtrlSeq:function(){return ee},BibliographyStyleCtrlSeq:function(){return re},BlankLine:function(){return Te},Book:function(){return Gr},BookCtrlSeq:function(){return L},BottomRuleCtrlSeq:function(){return fe},BracketMath:function(){return Fr},CaptionCtrlSeq:function(){return F},CenteringCtrlSeq:function(){return $},Chapter:function(){return Wr},ChapterCtrlSeq:function(){return U},CiteCtrlSeq:function(){return b},CiteStarrableCtrlSeq:function(){return g},CloseBrace:function(){return Ze},CloseBracket:function(){return He},CloseBracketCtrlSym:function(){return Ee},CloseBracketMath:function(){return Br},CloseParenCtrlSym:function(){return Ce},CloseParenMath:function(){return Mr},ColorBoxCtrlSeq:function(){return le},Command:function(){return Ne},Comment:function(){return _e},Csname:function(){return u},CtrlSeq:function(){return lr},CtrlSym:function(){return er},DefCtrlSeq:function(){return R},DefinitionArgument:function(){return tr},DefinitionFragment:function(){return or},DefinitionFragmentArgument:function(){return ur},DefinitionFragmentCommand:function(){return ar},DisplayMath:function(){return Tr},DocumentClassCtrlSeq:function(){return S},DocumentEnvName:function(){return me},DocumentEnvironment:function(){return Re},Dollar:function(){return sr},DollarMath:function(){return br},End:function(){return h},EnvName:function(){return qe},Environment:function(){return ze},EquationArrayEnvName:function(){return ye},EquationArrayEnvironment:function(){return Lr},EquationEnvName:function(){return he},EquationEnvironment:function(){return Nr},FigureEnvName:function(){return ge},FigureEnvironment:function(){return zr},FilePathArgument:function(){return Je},HLineCtrlSeq:function(){return ue},HboxCtrlSeq:function(){return x},HrefCtrlSeq:function(){return I},IncludeCtrlSeq:function(){return W},IncludeGraphicsCtrlSeq:function(){return T},InlineMath:function(){return gr},InputCtrlSeq:function(){return V},ItemCtrlSeq:function(){return J},KnownCtrlSym:function(){return cr},KnownEnvironment:function(){return Fe},LaTeX:function(){return ke},LabelArgument:function(){return Xe},LabelCtrlSeq:function(){return j},LeftCtrlSeq:function(){return B},LineBreakCtrlSym:function(){return Ie},ListEnvName:function(){return je},ListEnvironment:function(){return qr},LiteralArgContent:function(){return o},LongArg:function(){return Ue},LstInlineContent:function(){return i},LstInlineCtrlSeq:function(){return O},MacroParameter:function(){return rr},MaketitleCtrlSeq:function(){return oe},Math:function(){return jr},MathArgument:function(){return xr},MathChar:function(){return Or},MathClosing:function(){return Ir},MathCommand:function(){return wr},MathDelimitedGroup:function(){return Cr},MathDelimiter:function(){return Er},MathOpening:function(){return Sr},MathSpecialChar:function(){return _r},MathTextCtrlSeq:function(){return w},MidRuleCtrlSeq:function(){return se},MultiColumnCtrlSeq:function(){return de},NewCommandCtrlSeq:function(){return P},NewEnvironmentCtrlSeq:function(){return D},NewLine:function(){return ir},NewTheoremCtrlSeq:function(){return X},Normal:function(){return fr},Number:function(){return kr},OpenBrace:function(){return Be},OpenBracket:function(){return Me},OpenBracketCtrlSym:function(){return Se},OpenBracketMath:function(){return Rr},OpenParenCtrlSym:function(){return xe},OpenParenMath:function(){return Pr},OptionalArgument:function(){return Pe},OptionalMacroParameter:function(){return nr},PackageArgument:function(){return Ve},ParBoxCtrlSeq:function(){return pe},Paragraph:function(){return $r},ParagraphCtrlSeq:function(){return K},ParenMath:function(){return Zr},Part:function(){return Vr},PartCtrlSeq:function(){return Q},RefArgument:function(){return Ye},RefCtrlSeq:function(){return y},RefStarrableCtrlSeq:function(){return v},RenewCommandCtrlSeq:function(){return M},RenewEnvironmentCtrlSeq:function(){return N},RightCtrlSeq:function(){return Z},Section:function(){return Jr},SectionCtrlSeq:function(){return H},SectioningArgument:function(){return mr},ShortArg:function(){return Ge},ShortOptionalArg:function(){return De},ShortTextArgument:function(){return Ke},SpaceDelimitedLiteralArgContent:function(){return a},SubParagraph:function(){return en},SubParagraphCtrlSeq:function(){return G},SubSection:function(){return Xr},SubSectionCtrlSeq:function(){return z},SubSubSection:function(){return Yr},SubSubSectionCtrlSeq:function(){return q},TableEnvName:function(){return we},TableEnvironment:function(){return Kr},TabularArgument:function(){return hr},TabularContent:function(){return yr},TabularEnvName:function(){return Ae},TabularEnvironment:function(){return Dr},Text:function(){return Oe},TextArgument:function(){return Qe},TextColorCtrlSeq:function(){return ae},TheoremStyleCtrlSeq:function(){return Y},TikzPictureContent:function(){return Hr},TikzPictureEnvName:function(){return be},TikzPictureEnvironment:function(){return Ur},Tilde:function(){return pr},TitleCtrlSeq:function(){return C},TopRuleCtrlSeq:function(){return ce},TrailingContent:function(){return s},TrailingWhitespaceOnly:function(){return c},UnknownCommand:function(){return vr},UrlArgument:function(){return We},UrlCtrlSeq:function(){return _},UsePackageCtrlSeq:function(){return E},VerbContent:function(){return t},VerbCtrlSeq:function(){return k},VerbatimContent:function(){return l},VerbatimEnvName:function(){return ve},VerbatimEnvironment:function(){return Qr},Whitespace:function(){return Le},endOfArguments:function(){return d},endOfArgumentsAndOptionals:function(){return m},hasMoreArguments:function(){return f},hasMoreArgumentsOrOptionals:function(){return p}});var t=1,i=2,o=3,a=4,l=5,u=6,c=7,s=8,f=334,d=335,p=336,m=337,A=9,h=10,y=11,v=12,b=13,g=14,j=15,w=16,x=17,C=18,S=19,E=20,I=21,_=22,k=23,O=24,T=25,F=26,R=27,B=28,Z=29,P=30,M=31,D=32,N=33,L=34,Q=35,U=36,H=37,z=38,q=39,K=40,G=41,V=42,W=43,J=44,X=45,Y=46,$=47,ee=48,re=49,ne=50,te=51,ie=52,oe=53,ae=54,le=55,ue=56,ce=57,se=58,fe=59,de=60,pe=61,me=62,Ae=63,he=64,ye=65,ve=66,be=67,ge=68,je=69,we=70,xe=71,Ce=72,Se=73,Ee=74,Ie=75,_e=76,ke=77,Oe=78,Te=79,Fe=80,Re=81,Be=84,Ze=85,Pe=86,Me=87,De=88,Ne=89,Le=92,Qe=93,Ue=94,He=95,ze=97,qe=100,Ke=108,Ge=109,Ve=116,We=120,Je=128,Xe=131,Ye=133,$e=135,er=137,rr=138,nr=139,tr=140,ir=141,or=142,ar=143,lr=145,ur=146,cr=147,sr=150,fr=151,dr=152,pr=153,mr=155,Ar=163,hr=173,yr=174,vr=177,br=178,gr=179,jr=180,wr=181,xr=195,Cr=230,Sr=231,Er=232,Ir=233,_r=234,kr=235,Or=236,Tr=237,Fr=238,Rr=239,Br=240,Zr=241,Pr=242,Mr=243,Dr=246,Nr=251,Lr=256,Qr=260,Ur=265,Hr=269,zr=272,qr=276,Kr=280,Gr=285,Vr=288,Wr=291,Jr=294,Xr=297,Yr=300,$r=303,en=306},31931:function(e,r,n){n.d(r,{B:function(){return t},V:function(){return i}});n(58188);var t=function(e){return function(r){return r.effects.some((function(r){return r.is(e)}))}},i=function(e){return function(r){return r.transactions.some((function(r){return r.effects.some((function(r){return r.is(e)}))}))}}},30864:function(e,r,n){n.d(r,{DC:function(){return a},Mt:function(){return o},rG:function(){return i}});n(58188),n(26936);var t=n(77120);var i=function(e,r,n){var i=(0,t.l)(e,r,100);if(!i)return null;var o=i.resolve(r),a=null==o?void 0:o.prevSibling;return(null==a?void 0:a.type.name)===n},o=function(e,r){var n=r.getChild("ShortOptionalArg");if(n)return e.doc.sliceString(n.from,n.to)},a=function(e,r,n){if(!e.type.is("UnknownCommand"))return!1;var t=e.getChild("CtrlSeq");return!!t&&n.doc.sliceString(t.from,t.to)===r}},77904:function(e,r,n){n.d(r,{M2:function(){return f},Oh:function(){return d},RV:function(){return s},XP:function(){return a},a5:function(){return u},dr:function(){return c},y4:function(){return l}});n(18178),n(77950),n(85940),n(74069),n(9575),n(96264),n(34115),n(634),n(58188),n(71372),n(71245),n(96928),n(61229),n(92215),n(20796),n(15735),n(28673),n(6886);var t=n(77120),i=n(30864),o=(n(759),n(78014));var a=function(e,r,n,t){if(r.type.is("EnvNameGroup")){var i;if(!t(r.node))return!1;if(null===(i=r.node.prevSibling)||void 0===i||!i.type.is("Begin"))return!1;var o=r.node.getChild("OpenBrace");if(!o)return!1;var a=o.node.nextSibling;if(!a)return!1;var l=e.doc.sliceString(a.from,a.to);if(l.length<1)return!1;var u={title:l,from:a.from,to:a.to,line:e.doc.lineAt(a.from).number};n.push(u)}else if(r.type.is("NewEnvironment")||r.type.is("RenewEnvironment")){if(!t(r.node))return!1;var c=r.node.getChild("LiteralArgContent");if(!c)return;var s=e.doc.sliceString(c.from,c.to);if(!s)return;var f={title:s,from:c.from,to:c.to,line:e.doc.lineAt(c.from).number};n.push(f)}},l=function(e,r){var n=(0,t.l)(e,r,100);if(n){var o=n.resolve(r);if(o){if(o.type.is("EnvNameGroup")&&(0,i.rG)(e,r,"Begin"))return!0;if(o.type.is("$Environment")||o.type.is("LaTeX")&&r===e.doc.length){if(!(o=n.resolve(r,-1)))return;if(o.type.is("OpenBrace")||o.type.is("$EnvName"))return!0}}}},u=function(e,r){var n=(0,t.l)(e,r,100);if(n){var o=n.resolve(r);if(o){if(o.type.is("EnvNameGroup")&&(0,i.rG)(e,r,"End"))return!0;if(o.type.is("$Environment")||o.type.is("Content")){if(!(o=n.resolve(r,-1)))return;if(o.type.is("OpenBrace")||o.type.is("EnvName"))return!0}}}};function c(e,r){var n,t,i,o;if(null!==(n=e)&&void 0!==n&&n.type.is("$Environment")&&(e=e.getChild("BeginEnv")),!(null!==(t=e)&&void 0!==t&&t.type.is("BeginEnv")||null!==(i=e)&&void 0!==i&&i.type.is("EndEnv")))return null;var a=null===(o=e)||void 0===o||null===(o=o.getChild("EnvNameGroup"))||void 0===o||null===(o=o.getChild("OpenBrace"))||void 0===o?void 0:o.nextSibling;return a?a.type.is("CloseBrace")?null:r.sliceDoc(a.from,a.to):null}var s=function(e,r){var n;return null===(n=c(e,r))||void 0===n?void 0:n.replace(/\*$/,"")};function f(e){var r;return null===(r=e.getChild("BeginEnv"))||void 0===r?void 0:r.getChildren("TextArgument")}function d(e,r){var n,t,i,a,l=null,u=null,c=null,s=e.from,f=e.to,d=!1;return e.cursor().iterate((function(e){if(d)return!1;if(e.type.is("Caption")){if(l)return d=!0,!1;l={from:e.from,to:e.to}}if(e.type.is("Label")){if(u)return d=!0,!1;u={from:e.from,to:e.to}}if(e.type.is("IncludeGraphics")){var o,s;if(n)return d=!0,!1;a={from:e.from,to:e.to};var f=null===(o=e.node.getChild("IncludeGraphicsArgument"))||void 0===o||null===(o=o.getChild("FilePathArgument"))||void 0===o?void 0:o.getChild("LiteralArgContent");if(!f)return d=!0,!1;n={from:f.from,to:f.to,path:r.sliceDoc(f.from,f.to)};var p=null===(s=e.node.getChild("OptionalArgument"))||void 0===s?void 0:s.getChild("ShortOptionalArg");if(!p)return t=void 0,!1;c={from:p.from,to:p.to};var m=r.sliceDoc(p.from,p.to),A=m.match(/^width=([0-9]|(?:[0-9]*\.[0-9]+)|(?:[0-9]+\.))\\(linewidth|pagewidth|textwidth|hsize|columnwidth)$/);A?(t=parseFloat(A[1]),"linewidth"!==A[2]&&(i=m)):i=m}})),d||void 0===a||void 0===n?null:new o.Hs({caption:l,label:u,file:n,from:s,to:f,width:t,unknownGraphicsArguments:i,graphicsCommand:a,graphicsCommandArguments:c})}},85209:function(e,r,n){n.d(r,{XP:function(){return c},zz:function(){return f}});n(18178),n(16781),n(43450),n(28673),n(15735),n(6886),n(9575),n(96264),n(34115),n(634),n(58188),n(71372),n(71245),n(96928),n(61229),n(92215),n(20796),n(759);var t=n(49272),i=n(77904);var o=function(e){return e[e.Book=1]="Book",e[e.Part=2]="Part",e[e.Chapter=3]="Chapter",e[e.Section=4]="Section",e[e.SubSection=5]="SubSection",e[e.SubSubSection=6]="SubSubSection",e[e.Paragraph=7]="Paragraph",e[e.SubParagraph=8]="SubParagraph",e[e.Frame=9]="Frame",e[e.Invalid=-1]="Invalid",e}(o||{}),a={book:o.Book,part:o.Part,chapter:o.Part,section:o.Section,subsection:o.SubSection,subsubsection:o.SubSubSection,paragraph:o.Paragraph,subparagraph:o.SubParagraph,frame:o.Frame},l=function(e){var r;if("string"==typeof e)return null!==(r=a[e])&&void 0!==r?r:o.Invalid;switch(e){case t.Book:return o.Book;case t.Part:return o.Part;case t.Chapter:return o.Chapter;case t.Section:return o.Section;case t.SubSection:return o.SubSection;case t.SubSubSection:return o.SubSubSection;case t.Paragraph:return o.Paragraph;case t.SubParagraph:return o.SubParagraph;default:return o.Invalid}},u=function(e,r){var n=[];return r.node.cursor().iterate((function(t){return!(t.from>=r.to)&&(!t.type.is("Label")&&(!!t.node.firstChild||void n.push(e.doc.sliceString(t.from,t.to))))})),n.join("")},c=function(e,r,n,t){if(r.type.is("SectioningCommand")){var a,c=r.node,s=c.parent;if(!t(c))return;var f=null===(a=c.getChild("SectioningArgument"))||void 0===a?void 0:a.getChild("LongArg");if(!f)return;for(var d=s;d;d=d.parent)if(d.type.is("NewCommand")||d.type.is("RenewCommand"))return!1;var p=null!=s&&s.type.is("$SectioningCommand")?l(s.type.id):l((A=c.firstChild)?e.doc.sliceString(A.from+1,A.to):""),m={line:e.doc.lineAt(c.from).number,title:u(e,f),from:c.from,to:c.to,level:p};n.push(m)}var A;if(r.type.is("$Environment")){var h=r.node;if("frame"===(0,i.dr)(h,e)){var y,v=h.getChild("BeginEnv");if(!t(v))return;var b=null===(y=(0,i.M2)(h))||void 0===y?void 0:y.map((function(e){return e.getChild("LongArg")}));if(null!=b&&b.length){var g=b[0],j=g?e.sliceDoc(g.from,g.to):"",w={line:e.doc.lineAt(v.from).number,title:j,from:v.from,to:v.to,level:o.Frame};n.push(w)}}}},s=function(e){return{title:e.title,line:e.line,level:e.level}},f=function(e){var r=[],n=[];for(var t of e){for(var i=s(t);r.length&&r[r.length-1].level>=i.level;)r.pop();if(r.length){var o=r[r.length-1];o.children?o.children.push(i):o.children=[i],r.push(i)}else r.push(i),n.push(i)}return n}},759:function(e,r,n){n.d(r,{vt:function(){return l},y0:function(){return c}});n(43450),n(95342),n(58188),n(43430),n(9575),n(96264),n(34115),n(634),n(71372),n(71245),n(20796),n(15735),n(28673),n(6886);var t=n(77120),i=n(21649);var o=20,a=500,l=function(e){return e[e.Pending=0]="Pending",e[e.Partial=1]="Partial",e[e.Complete=2]="Complete",e}({}),u=function(e,r,n,t){return!(r<n||e>t)};function c(e,r,n,c,s){var f=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d=arguments.length>6?arguments[6]:void 0,p=arguments.length>7?arguments[7]:void 0,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{items:[],status:l.Pending},A=m.status===l.Complete?m.items.filter((function(e){return!u(e.from,e.to,r,n)})).map((function(e){return function(e,r){if(!r)return e;var n=e.from,t=e.to,i=r.changes.mapPos(n),o=r.changes.mapPos(t),a=r.state.doc.lineAt(i).number;return i===n&&o===t&&a===e.line?e:{...e,from:i,to:o,line:a}}(e,p)})):[];m.status!==l.Complete&&(s=e.doc.length,c=0);var h=(0,t.l)(e,s,f?a:o);return h?(h.iterate({from:c,to:s,enter:function(r){return d(e,r,A,(function(e){return u(e.from,e.to,c,s)}))},mode:i.vj.IgnoreMounts|i.vj.IgnoreOverlays}),{status:l.Complete,items:A.sort((function(e,r){return e.from-r.from}))}):m.status!==l.Pending?{status:l.Partial,items:m.items}:{items:[],status:l.Pending}}},6754:function(e,r,n){n.d(r,{Cq:function(){return f},ZP:function(){return p}});n(34769),n(34115);var t=n(55185),i=n(63584),o=n(95135),a=n(12524),l=n.n(a),u=n(52322),c=["bs3Props"];function s(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f(e){return{bsStyle:null,bsSize:d(e.size),className:l()("btn-".concat(e.variant||"primary"),e.className),disabled:e.isLoading||e.disabled,form:e.form,href:e.href,target:e.target,rel:e.rel,onClick:e.onClick,type:e.type}}var d=function(e){return"small"===e?"sm":"large"===e?"lg":void 0};function p(e){var r=e.bs3Props,n=s(e,c);return(0,u.jsx)(t.Z,{bs3:(0,u.jsx)(i.Z,{...f(n),...r,children:(null==r?void 0:r.loading)||n.children}),bs5:(0,u.jsx)(o.Z,{...n})})}},7585:function(e,r,n){n.d(r,{K8:function(){return a},WP:function(){return l},mr:function(){return o},oT:function(){return u}});var t=n(19034),i=n.n(t);function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h:mm a";return i()(e).format(r)}function a(e){return i()(e).calendar()}function l(e){return i()().diff(e,"years")>0?o(e,"D MMMM YYYY, h:mm a"):o(e,"D MMMM, h:mm a")}function u(e){return Date.parse(e)/1e3}i().updateLocale("en",{calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"ddd, Do MMM YY",nextWeek:"ddd, Do MMM YY",sameElse:"ddd, Do MMM YY"}})},73545:function(e,r,n){n(15735),n(58188),n(73439),n(28673),n(6886);var t=n(24991),i=n(75234),o=n(66041),a=(0,o.Z)("ol-i18n").currentLangCode;t.ZP.use(i.Db).init({lng:a,compatibilityJSON:"v3",react:{useSuspense:!1,bindI18nStore:"added",transSupportBasicHtmlNodes:!1},interpolation:{prefix:"__",suffix:"__",unescapeSuffix:"HTML",skipOnVariables:!0,escapeValue:!1,defaultVariables:{appName:(0,o.Z)("ol-ExposedSettings").appName}}});var l=n(88135)("./".concat(a,".json")).then((function(e){t.ZP.addResourceBundle(a,"translation",e)}));r.Z=l},14642:function(e,r,n){n(49228),n(58188),n(27233),n(28673),n(77950),n(74069),n(32501),n(88233),n(34115),n(634),n(20796),n(15735),n(6886),n(26936),n(21850),n(71372);var t=n(92193),i=n(66041);function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}r.Z={getColorScheme:function(e,r){return this.isDarkTheme(r)?{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 100%, 28%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 100%, 20%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 100%, 60%);")}:{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 70%, 85%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 70%, 95%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 70%, 40%);")}},isDarkTheme:function(e){var r=e.find(".ace_editor").css("background-color"),n=o(Array.from(r.match(/rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)/)),4),t=(n[0],n[1]),i=n[2],a=n[3];return(t=parseInt(t,10))+(i=parseInt(i,10))+(a=parseInt(a,10))<384},ANONYMOUS_HUE:100,OWN_HUE:200,OWN_HUE_BLOCKED_SIZE:20,TOTAL_HUES:360,getHueForUserId:function(e){if(null==e||"anonymous-user"===e)return this.ANONYMOUS_HUE;if((0,i.Z)("ol-user").id===e)return this.OWN_HUE;var r=this.getHueForId(e);return r>this.OWN_HUE-this.OWN_HUE_BLOCKED_SIZE&&r<this.OWN_HUE+this.OWN_HUE_BLOCKED_SIZE&&(r=(r-=this.OWN_HUE)+this.TOTAL_HUES-this.OWN_HUE_BLOCKED_SIZE),r},getHueForTagId:function(e){return this.getHueForId(e)},getHueForId:function(e){var r=(0,t.M)(e);return parseInt(r.toString().slice(0,8),16)%(this.TOTAL_HUES-2*this.OWN_HUE_BLOCKED_SIZE)}}},43363:function(e,r,n){n.d(r,{A:function(){return C},N:function(){return _}});n(39529),n(31235),n(58188),n(1939),n(28673),n(15735),n(6886),n(95342),n(43430),n(43450);var t=n(1727),i=n(76635),o=n(34097),a=n(66041),l=n(45177),u="CM6-BeforeUpdate",c="CM6-AfterUpdate",s="CM6-DomUpdate",f="CM6-Update",d="CM6-Keypress-Measure",p=0,m=Date.now(),A=!1;try{var h="featureTestMark";performance.mark(h,{startTime:performance.now(),detail:{test:1}}),performance.clearMarks(h);var y="featureTestMeasure";performance.measure(y,{start:performance.now(),detail:{test:1}}),performance.clearMeasures(y),A=!0}catch(e){}var v=!1;function b(){return performance.memory.usedJSHeapSize}try{"memory"in window.performance&&(b(),v=!0)}catch(e){}var g=!1,j=0;try{if(PerformanceObserver.supportedEntryTypes.includes("longtask"))g=!0,new PerformanceObserver((function(e){j+=e.getEntries().length})).observe({entryTypes:["longtask"]})}catch(e){}function w(e){return!!e&&["input","delete"].includes(e.split(".")[0])}function x(e){return!!e&&["input.type","delete.forward","delete.backward"].includes(e)}function C(){if(!A)return{start:function(){},end:function(){}};var e=0,r=0,n=[];return{start:function(e){var r=performance.now();e.forEach((function(e){x(e.annotation(t.YW.userEvent))&&n.push(r)})),performance.mark(u)},end:function(i,o){performance.mark(c);var a=!1;i.forEach((function(n){var i=n.annotation(t.YW.userEvent);w(i)&&(a=!0,++e,x(i)&&++r,performance.measure(f,{start:u,end:c,detail:{userEventType:i,userEventsSinceDomUpdateCount:e}}))})),a&&o.requestMeasure({key:"inputEventCounter",read:function(){performance.mark(s,{detail:{keypressesSinceDomUpdateCount:r}}),e=0,r=0;var t=performance.now();for(var i of n)performance.measure(d,{start:i,end:t});n.length=0}}),p=i[i.length-1].state.doc.length}}}function S(e){return 0===e.length?0:e.reduce((function(e,r){return e+r}),0)/e.length}function E(e){return e.reduce((function(e,r){return Math.max(e,r)}),0)}function I(e){switch(e){case"measure":performance.clearMeasures(f),performance.clearMarks(u),performance.clearMarks(c);break;case"dom":performance.clearMarks(s);break;case"keypress":performance.clearMeasures(d)}}function _(){var e,r=performance.getEntriesByName(f,"measure");I("measure");var n,t=r.filter((function(e){return w(e.detail.userEventType)})),l=t.map((function(e){return e.duration})).sort((function(e,r){return e-r})),u=(0,i.round)(E(l),2),c=(0,i.round)(S(l),2),A=(0,i.round)(function(e){if(0===e.length)return 0;var r=Math.floor(e.length/2);return e.length%2==0?(e[r-1]+e[r])/2:e[r]}(l),2),h=(0,i.round)(0===(n=l).length?0:n[Math.round(.95*(n.length-1))],2),y=E(t.map((function(e){return e.detail.userEventsSinceDomUpdateCount}))),x=(0,o.Z)(),C=Math.floor((Date.now()-m)/1e3),_=v?b():null,k=performance.getEntriesByName(s,"mark");I("dom");var O=0,T=0,F=0,R=0;for(var B of k){var Z=B.detail.keypressesSinceDomUpdateCount;1===Z?++T:Z>1&&++O,Z>F&&(F=Z),R+=Z}var P=(0,i.round)(O/(O+T),4),M=(0,i.round)(R/(O+T),4),D=performance.getEntriesByName(d,"measure").map((function(e){return e.duration})),N=(0,i.round)(S(D),2);I("keypress");var L=null;g&&(L=j,j=0);var Q=(null===(e=(0,a.Z)("ol-ExposedSettings"))||void 0===e?void 0:e.sentryRelease)||null;return{max:u,mean:c,median:A,ninetyFifthPercentile:h,maxUserEventsBetweenDomUpdates:y,docLength:p,numberOfEntries:l.length,grammarly:x,sessionLength:C,memory:_,lags:O,nonLags:T,longestLag:F,meanLagsPerMeasure:P,meanKeypressesPerMeasure:M,meanKeypressPaint:N,longTasks:L,release:Q}}window.addEventListener("editor:visual-switch",(function(){I("measure"),I("dom"),I("keypress")})),window._reportCM6Perf=function(){l.c.warn(_())}},28684:function(e,r,n){n.d(r,{BS:function(){return y},K$:function(){return v},kp:function(){return g},ty:function(){return h},xA:function(){return A}});n(61229),n(92215),n(71372),n(9575),n(96264),n(34115),n(634),n(71245),n(34769),n(20796),n(15735),n(28673),n(6886),n(6710),n(58188),n(73439),n(26936),n(77950),n(21850),n(96928);var t=n(91601),i=n.n(t),o=n(66041);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var l=["body","headers","method","credentials","swallowAbortError"];function u(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,s(t.key),t)}}function s(e){var r=function(e,r){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,r||"default");if("object"!=a(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==a(r)?r:String(r)}function f(e,r){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},f(e,r)}function d(e){var r=p();return function(){var n,t=m(e);if(r){var i=m(this).constructor;n=Reflect.construct(t,arguments,i)}else n=t.apply(this,arguments);return function(e,r){if(r&&("object"===a(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function A(e,r){return j(e,{...r,method:"GET"})}function h(e,r){return j(e,{...r,method:"POST"})}function y(e,r){return j(e,{...r,method:"PUT"})}function v(e,r){return j(e,{...r,method:"DELETE"})}function b(e){var r;if(!e)return"Unknown Error";return null!==(r={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"}[e])&&void 0!==r?r:"Unexpected Error: ".concat(e)}var g=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&f(e,r)}(FetchError,e);var r,n,t,i=d(FetchError);function FetchError(e,r,n,t,o){var a;return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,FetchError),e||(e=b(null==t?void 0:t.status)),(a=i.call(this,e,{statusCode:t?t.status:void 0})).url=r,a.options=n,a.response=t,a.data=o,a}return r=FetchError,(n=[{key:"getErrorMessageKey",value:function(){var e;return null===(e=this.data)||void 0===e||null===(e=e.message)||void 0===e?void 0:e.key}},{key:"getUserFacingMessage",value:function(){var e,r,n,t=null===(e=this.response)||void 0===e?void 0:e.status,i=b(t),o=(null===(r=this.data)||void 0===r||null===(r=r.message)||void 0===r?void 0:r.text)||(null===(n=this.data)||void 0===n?void 0:n.message);if(o&&o!==i)return o;var a={400:"Invalid Request. Please correct the data and try again.",403:"Session error. Please check you have cookies enabled. If the problem persists, try clearing your cache and cookies.",429:"Too many attempts. Please wait for a while and try again."};return t&&a[t]?a[t]:"Something went wrong. Please try again."}}])&&c(r.prototype,n),t&&c(r,t),Object.defineProperty(r,"prototype",{writable:!1}),FetchError}(i());function j(e,r){var n=r.body,t=r.headers,i=void 0===t?{}:t,a=r.method,c=void 0===a?"GET":a,s=r.credentials,f=void 0===s?"same-origin":s,d=r.swallowAbortError,p=void 0===d||d,m={...u(r,l),headers:{...i,"Content-Type":"application/json","X-Csrf-Token":(0,o.Z)("ol-csrfToken"),Accept:"application/json"},credentials:f,method:c};return void 0!==n&&(m.body=JSON.stringify(n)),new Promise((function(r,n){fetch(e,m).then((function(t){return async function(e){var r=e.headers.get("Content-Type");if(!r)return{};if(/application\/json/.test(r))return e.json();if(/text\/plain/.test(r)){return{message:await e.text()}}if(/text\/html/.test(r)){var n=await e.text();if(!/^\s*</.test(n))return{message:n}}return{}}(t).then((function(i){t.ok?r(i):n(new g(t.statusText,e,m,t,i))}),(function(r){p&&"AbortError"===r.name||n(new g("There was an error parsing the response body",e,m,t).withCause(r))}))}),(function(r){p&&"AbortError"===r.name||n(new g("There was an error fetching the JSON",e,m).withCause(r))}))}))}},45643:function(e,r,n){n.d(r,{Vs:function(){return i},eR:function(){return o},xG:function(){return a}});n(15735),n(58188),n(28673),n(6886),n(60523),n(28399),n(88233);var t=n(96227);function i(e,r,n,i){var o={"paywall-type":e};i&&(o.variant=i),t.lW("subscription-funnel","upgraded-free-trial",e),t.BZ("paywall-click",o);var a=new URLSearchParams({itm_campaign:e});r&&a.set("itm_content",r),n&&(n.startedFreeTrial=!0),window.open("/user/subscription/choose-your-plan?".concat(a.toString()))}function o(e,r){var n=window.open();!function(){"function"==typeof ga&&ga("send","event","subscription-funnel","upgraded-plan",e);r&&(r.startedFreeTrial=!0),n.location="/user/subscription"}()}function a(e){t.BZ("paywall-prompt",{"paywall-type":e})}},73047:function(e,r,n){n.r(r);var t={};n.r(t),n.d(t,{default:function(){return Ce}});var i={};n.r(i),n.d(i,{CreateFileMode:function(){return $t},CreateFilePane:function(){return ei}});var o={};n.r(o),n.d(o,{CreateFileMode:function(){return ri},CreateFilePane:function(){return ni}});var a={};n.r(a),n.d(a,{default:function(){return ci}});var l={};n.r(l),n.d(l,{TPRFileViewNotOriginalImporter:function(){return yo}});var u={};n.r(u),n.d(u,{TPRFileViewInfo:function(){return go}});var c={};n.r(c),n.d(c,{TPRFileViewRefreshButton:function(){return wo}});var s={};n.r(s),n.d(s,{TPRFileViewRefreshError:function(){return TPRFileViewRefreshError}});var f={};n.r(f),n.d(f,{WritefullPromotion:function(){return sa},default:function(){return fa}});var d={};n.r(d),n.d(d,{default:function(){return va}});n(48176),n(46181);var p=n(28316),m=(n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850),n(71372),n(2784)),A=(n(18178),n(75234)),h=n(10280),y=n(63584),v=n(46267),b=n(61179),g=n(52322),j=n(23357),w=n(90350),x=n(86186);function C(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return S(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function E(e){var r=e.reconnectAt,n=e.tryReconnectNow,t=(0,A.$G)().t,i=C((0,m.useState)((0,w.o)(r)),2),o=i[0],a=i[1];return(0,m.useEffect)((function(){var e=window.setInterval((function(){a((0,w.o)(r))}),1e3);return function(){return window.clearInterval(e)}}),[r]),(0,g.jsxs)(x.Z,{bsStyle:"warning",className:"small",children:[(0,g.jsx)("strong",{children:t("lost_connection")})," ",t("reconnecting_in_x_secs",{seconds:o}),".",(0,g.jsx)("button",{id:"try-reconnect-now-button",className:"pull-right",onClick:function(){return n()},children:t("try_now")})]})}var I=n(5446),_=n(45177),k=n(37246),O=n(66624);function T(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return F(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function R(){var e=(0,A.$G)().t,r=(0,I.Km)(),n=r.connectionState,t=r.isConnected,i=r.isStillReconnecting,o=r.tryReconnectNow,a=r.secondsUntilReconnect,l=(0,O.I)(),u=T((0,k.Z)("sync_tex_error"),1)[0];return l?(0,p.createPortal)((0,g.jsxs)(g.Fragment,{children:[n.forceDisconnected?(0,g.jsx)(x.Z,{bsStyle:"danger",className:"small",children:(0,g.jsx)("strong",{children:e("disconnected")})}):null,n.reconnectAt?(0,g.jsx)(E,{reconnectAt:n.reconnectAt,tryReconnectNow:o}):null,i?(0,g.jsx)(x.Z,{bsStyle:"warning",className:"small",children:(0,g.jsxs)("strong",{children:[e("reconnecting"),"…"]})}):null,u?(0,g.jsxs)(x.Z,{bsStyle:"warning",className:"small",children:[(0,g.jsx)("strong",{children:e("synctex_failed")}),(0,g.jsx)("a",{href:"/learn/how-to/SyncTeX_Errors",target:"_blank",id:"synctex-more-info-button",className:"alert-link-as-btn pull-right",children:e("more_info")})]}):null,n.inactiveDisconnect||n.readyState===WebSocket.CLOSED&&("rate-limited"===n.error||"unable-to-connect"===n.error)&&!a()?(0,g.jsx)(x.Z,{bsStyle:"warning",className:"small",children:(0,g.jsx)("strong",{children:e("editor_disconected_click_to_reconnect")})}):null,_.j?(0,g.jsx)(x.Z,{bsStyle:"warning",className:"small",children:(0,g.jsxs)("strong",{children:["Connected: ",t.toString()]})}):null]}),l):null}var B=n(95641),Z=(n(34769),n(12524)),P=n.n(Z),M=["children","resizable","onDoubleClick"];function D(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return N(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function L(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Q=function(e){var r=e.children,n=e.resizable,t=void 0===n||n,i=e.onDoubleClick,o=L(e,M),a=(0,A.$G)().t,l=D((0,m.useState)(!1),2),u=l[0],c=l[1];return(0,m.useEffect)((function(){if(u){var e=function(){var e;null===(e=o.onDragging)||void 0===e||e.call(o,!0)};return document.addEventListener("pointermove",e),function(){document.removeEventListener("pointermove",e)}}var r;null===(r=o.onDragging)||void 0===r||r.call(o,!1)}),[u,o]),(0,g.jsx)(B.OT,{disabled:!t&&!u,...o,onDragging:function(e){(u||t)&&c(e)},children:(0,g.jsx)("div",{className:P()("horizontal-resize-handle",{"horizontal-resize-handle-enabled":t}),title:a("resize"),onDoubleClick:function(){return null==i?void 0:i()},children:r})})},U=n(39493),H=n(28865),z=n(91661),q=n(96227),K=n(13980),G=n.n(K),V=(n(73439),n(84050)),W=n(63290),J=n(39488),X=n(49169),Y=n(72526),$=n(47481),ee=n(28684),re=n(96931);function ne(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return te(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var ie=(0,m.createContext)(void 0),oe=function(e){var r,n,t,i=e.children,o=(0,W.SE)(),a=o.first_name,l=o.last_name,u=(0,Y.d)(),c=u._id,s=u.name,f=u.rootDocId,d=(0,$.O)().hasFolders,p=(0,re.IM)(),A=(0,V._i)().cobranding,h=(0,J.Im)(),y=h.pdfDownloadUrl,v=h.pdfUrl,b=h.logEntries,j=(0,J.Im)().uncompiled;A&&(A.publishGuideHtml||A.partner)?A.brandedMenu?(n="/journals/".concat(A.brandId),r="branded"):A.partner?(n="/journals/".concat(A.brandId),r="export",t=A.brandVariationId):(n="/journals/".concat(A.brandId),r="guide",t=A.brandVariationId):(n="/journals",r="basic");var w=ne((0,m.useState)(null),2),x=w[0],C=w[1],S=ne((0,m.useState)(null),2),E=S[0],I=S[1],_=(0,X.Z)(),k=(0,m.useCallback)((function(){var e="/latest_template/".concat(c);return Promise.all([(0,ee.xA)(e),(0,ee.xA)(n)]).then((function(e){var r=ne(e,2),n=r[0],t=r[1];if(_.current){var i=n.title?{title:n.title}:{};i.description=n.description,i.author=n.author,i.license=n.license,I(n),C(t)}}))}),[_,n,c]),O=(0,m.useCallback)((function(){var e=f;if(p.editorManager.getCurrentDocId()===e)return!1;var r=p.editorManager.getCurrentDocValue();if(null==r)return!1;for(var n of r.split("\n"))if(/^[^%]*\\documentclass/.test(n))return!0;return!1}),[p.editorManager,f]),T={entries:x,initialShown:r,brandVariationId:t,fetchData:k,initParams:{projectId:c,pdfUrl:v?y:void 0,logs:b,uncompiled:j,hasFolders:d,rootDocOverridden:O(),firstName:a,lastName:l,title:s,...E}};return(0,g.jsx)(ie.Provider,{value:T,children:i})};var ae=n(17631),le=n(11685);n(96928),n(61229),n(92215),n(9575),n(96264),n(71245);function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function ce(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,se(t.key),t)}}function se(e){var r=function(e,r){if("object"!=ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,r||"default");if("object"!=ue(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==ue(r)?r:String(r)}function fe(e,r){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},fe(e,r)}function de(e){var r=pe();return function(){var n,t=me(e);if(r){var i=me(this).constructor;n=Reflect.construct(t,arguments,i)}else n=t.apply(this,arguments);return function(e,r){if(r&&("object"===ue(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pe=function(){return!!e})()}function me(e){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},me(e)}var Ae=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&fe(e,r)}(DestinationsError,e);var r,n,t,i=de(DestinationsError);function DestinationsError(){return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DestinationsError),i.apply(this,arguments)}return r=DestinationsError,(n=[{key:"render",value:function(){return(0,g.jsx)("span",{children:(0,g.jsxs)("p",{children:["Sorry, we had trouble retrieving our list of submission destinations. If you give us a minute, retry, and still find this error, please notify support at"," ",(0,g.jsx)("a",{href:"mailto:support@overleaf.com?subject=Unable to submit",children:"support@overleaf.com"})]})})}}])&&ce(r.prototype,n),t&&ce(r,t),Object.defineProperty(r,"prototype",{writable:!1}),DestinationsError}(m.Component);function he(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return ye(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var ve=(0,m.lazy)((function(){return n.e(3229).then(n.bind(n,59516))}));function be(e){var r,t=e.handleHide,i=(0,A.$G)().t,o=function(){var e=(0,m.useContext)(ie);if(!e)throw new Error("usePublishContext is only available inside PublishProvider");return e}(),a=o.entries,l=o.initialShown,u=o.initParams,c=o.fetchData,s=o.brandVariationId,f=he((0,m.useState)(!0),2),d=f[0],p=f[1],h=he((0,m.useState)(!1),2),v=h[0],b=h[1],j=he((0,m.useState)(!1),2),w=j[0],x=j[1],C=(0,X.Z)();function S(){t(),p(!1)}return(0,m.useEffect)((function(){n.e(3229).then(n.bind(n,59516)).catch((function(){return x(!0)})),v||(c().catch((function(){C.current&&x(!0)})),b(!0))}),[C,v,c]),r=a&&null!=u&&u.logs?(0,g.jsx)(m.Suspense,{fallback:(0,g.jsx)(ge,{}),children:(0,g.jsx)(ve,{entries:a,initialShown:l,initParams:u,brandVariationId:s})}):w?(0,g.jsx)(Ae,{}):(0,g.jsx)(ge,{}),(0,g.jsxs)(le.Z,{bsSize:"large",show:d,onHide:S,children:[(0,g.jsx)(ae.Z.Header,{closeButton:!0,children:(0,g.jsxs)(ae.Z.Title,{children:[" ",i("submit_title")," "]})}),(0,g.jsx)(ae.Z.Body,{children:(0,g.jsxs)("div",{className:"modal-body-publish",children:[r," "]})}),(0,g.jsx)(ae.Z.Footer,{children:(0,g.jsx)(y.Z,{bsStyle:null,className:"btn-secondary",onClick:S,children:i("close")})})]})}function ge(){var e=(0,A.$G)().t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.Z,{type:"refresh",fw:!0,spin:!0})," ",(0,g.jsxs)("span",{children:[e("loading"),"…"]})]})}function je(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return we(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function xe(e){var r=e.cobranding,n=(0,A.$G)().t,t=je((0,m.useState)(!1),2),i=t[0],o=t[1];var a=P()("btn","btn-full-height");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{id:"publishButton",className:a,onClick:function(){q.BZ("navigation-clicked-submit"),o(!0)},children:[(0,g.jsx)(h.Z,{type:"globe",fw:!0}),null!=r&&r.submitBtnHtml?(0,g.jsx)("p",{className:"toolbar-label toolbar-label-multiline",dangerouslySetInnerHTML:{__html:r.submitBtnHtml}}):(0,g.jsx)("p",{className:"toolbar-label",children:n("submit_title")})]})}),i&&(0,g.jsx)(oe,{children:(0,g.jsx)(be,{handleHide:function(){o(!1)}})})]})}xe.propTypes={cobranding:G().shape({submitBtnHtml:G().string})};var Ce=(0,j.Z)(xe);function Se(e){var r=e.onClick,n=(0,A.$G)().t;return(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{className:"btn btn-full-height",onClick:r,children:[(0,g.jsx)(h.Z,{type:"bars",fw:!0,className:"editor-menu-icon"}),(0,g.jsx)("p",{className:"toolbar-label",children:n("menu")})]})})}Se.propTypes={onClick:G().func.isRequired};var Ee=Se;function Ie(e){var r=e.brandVariationHomeUrl,n=e.brandVariationName,t=e.logoImgUrl;return(0,g.jsx)("a",{className:"btn btn-full-height header-cobranding-logo-container",href:r,target:"_blank",rel:"noreferrer noopener",children:(0,g.jsx)("img",{src:t,className:"header-cobranding-logo",alt:n})})}Ie.propTypes={brandVariationHomeUrl:G().string.isRequired,brandVariationName:G().string.isRequired,logoImgUrl:G().string.isRequired};var _e=Ie,ke=n(24958);var Oe=function(){var e=(0,A.$G)().t;return(0,g.jsx)(ke.Z,{id:"back-to-projects",description:e("back_to_your_projects"),overlayProps:{placement:"right"},children:(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsx)("a",{className:"btn btn-full-height",draggable:"false",href:"/project",onClick:function(){q.BZ("navigation-clicked-home")},children:(0,g.jsx)(h.Z,{type:"home",fw:!0,accessibilityLabel:e("back_to_your_projects")})})})})};var Te=function(){var e=(0,A.$G)().t;return(0,g.jsx)("a",{className:"toolbar-header-upgrade-prompt btn btn-primary btn-xs",href:"/user/subscription/plans?itm_referrer=editor-header-upgrade-prompt",target:"_blank",onClick:function(e){q.lW("subscription-funnel","code-editor","upgrade"),q.BZ("upgrade-button-click",{source:"code-editor"})},children:e("upgrade")})};function Fe(e){var r=e.chatIsOpen,n=e.unreadMessageCount,t=e.onClick,i=(0,A.$G)().t,o=P()("btn","btn-full-height","btn-full-height-no-border",{active:r}),a=n>0;return(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{className:o,onClick:t,children:[(0,g.jsx)(h.Z,{type:"comment",fw:!0,className:a?"bounce":""}),a&&(0,g.jsx)("span",{className:"label label-info",children:n}),(0,g.jsx)("p",{className:"toolbar-label",children:i("chat")})]})})}Fe.propTypes={chatIsOpen:G().bool,unreadMessageCount:G().number.isRequired,onClick:G().func.isRequired};var Re=Fe,Be=n(13253),Ze=n(82752);var Pe=function(){var e=(0,A.$G)().t;return(0,g.jsx)(h.Z,{type:"check",fw:!0,accessibilityLabel:e("selected")})},Me=n(15300),De=n(32687),Ne=["checkmark","icon","text"];function Le(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qe(){return(0,g.jsx)(h.Z,{type:"",fw:!0})}function Ue(){return(0,g.jsx)(h.Z,{type:"refresh",fw:!0,spin:!0})}function He(){return(0,g.jsx)(h.Z,{type:"columns",fw:!0})}function ze(){return(0,g.jsx)(h.Z,{type:"columns",fw:!0})}function qe(){return(0,g.jsx)(h.Z,{type:"window-restore",fw:!0})}function Ke(){return(0,g.jsx)(h.Z,{type:"code",fw:!0})}function Ge(){return(0,g.jsx)(h.Z,{type:"file-pdf-o",fw:!0})}function Ve(e){var r=e.iconFor,n=e.pdfLayout,t=e.view;return"detacher"===e.detachRole||"history"===t?(0,g.jsx)(Qe,{}):"editorOnly"!==r||"flat"!==n||"editor"!==t&&"file"!==t?"pdfOnly"===r&&"flat"===n&&"pdf"===t||"sideBySide"===r&&"sideBySide"===n?(0,g.jsx)(Pe,{}):(0,g.jsx)(Qe,{}):(0,g.jsx)(Pe,{})}function We(e){var r=e.checkmark,n=e.icon,t=e.text,i=Le(e,Ne);return(0,g.jsx)(Be.Z,{...i,children:(0,g.jsx)("div",{className:"layout-menu-item",children:(0,g.jsxs)("div",{className:"layout-menu-item-start",children:[(0,g.jsx)("div",{children:r}),(0,g.jsx)("div",{children:n}),(0,g.jsx)("div",{children:t})]})})})}function Je(){var e=(0,A.$G)().t;return(0,g.jsx)(ke.Z,{id:"detach-disabled",description:e("your_browser_does_not_support_this_feature"),overlayProps:{placement:"left"},children:(0,g.jsx)(We,{disabled:!0,checkmark:(0,g.jsx)(Qe,{}),icon:(0,g.jsx)(qe,{}),text:e("pdf_in_separate_tab")})})}function Xe(){var e=(0,A.$G)().t,r=(0,U.l5)(),n=r.reattach,t=r.detach,i=r.detachIsLinked,o=r.detachRole,a=r.changeLayout,l=r.view,u=r.pdfLayout,c=(0,m.useCallback)((function(){t(),q.BZ("project-layout-detach")}),[t]),s=(0,m.useCallback)((function(){"detacher"===o&&(n(),q.BZ("project-layout-reattach"))}),[o,n]);(0,De.Z)("ui:pdf-open",s);var f=(0,m.useCallback)((function(e,r){s(),a(e,r),q.BZ("project-layout-change",{layout:e,view:r})}),[a,s]),d=!i&&"detacher"===o;return(0,g.jsxs)(g.Fragment,{children:[d&&(0,g.jsx)("div",{"aria-live":"assertive",className:"sr-only",children:e("layout_processing")}),(0,g.jsxs)(Me.Z,{id:"layout-dropdown",onMainButtonClick:function(){q.BZ("navigation-clicked-layout")},className:"toolbar-item layout-dropdown",pullRight:!0,children:[(0,g.jsxs)(Ze.Z.Toggle,{className:"btn-full-height",bsStyle:"link",children:[d?(0,g.jsx)(Ue,{}):(0,g.jsx)(He,{}),(0,g.jsx)("span",{className:"toolbar-label",children:e("layout")})]}),(0,g.jsxs)(Ze.Z.Menu,{className:"layout-dropdown-list",children:[(0,g.jsx)(We,{onSelect:function(){return f("sideBySide")},checkmark:(0,g.jsx)(Ve,{iconFor:"sideBySide",pdfLayout:u,view:l,detachRole:o}),icon:(0,g.jsx)(ze,{}),text:e("editor_and_pdf")}),(0,g.jsx)(We,{onSelect:function(){return f("flat","editor")},checkmark:(0,g.jsx)(Ve,{iconFor:"editorOnly",pdfLayout:u,view:l,detachRole:o}),icon:(0,g.jsx)(Ke,{}),text:(0,g.jsx)(A.cC,{i18nKey:"editor_only_hide_pdf",components:[(0,g.jsx)("span",{className:"subdued"},"editor_only_hide_pdf")]})}),(0,g.jsx)(We,{onSelect:function(){return f("flat","pdf")},checkmark:(0,g.jsx)(Ve,{iconFor:"pdfOnly",pdfLayout:u,view:l,detachRole:o}),icon:(0,g.jsx)(Ge,{}),text:(0,g.jsx)(A.cC,{i18nKey:"pdf_only_hide_editor",components:[(0,g.jsx)("span",{className:"subdued"},"pdf_only_hide_editor")]})}),"BroadcastChannel"in window?(0,g.jsx)(We,{onSelect:function(){return c()},checkmark:"detacher"===o?i?(0,g.jsx)(Pe,{}):(0,g.jsx)(Ue,{}):(0,g.jsx)(Qe,{}),icon:(0,g.jsx)(qe,{}),text:e("pdf_in_separate_tab")}):(0,g.jsx)(Je,{})]})]})]})}var Ye=(0,m.memo)(Xe),$e=(n(43450),n(56556));function er(e){return function(e){if(Array.isArray(e))return rr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return rr(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function nr(e){var r=e.onlineUsers,n=e.goToUser,t=(0,A.$G)().t;return r.length>=4?(0,g.jsxs)(Me.Z,{id:"online-users",className:"online-users",pullRight:!0,children:[(0,g.jsx)(ir,{bsRole:"toggle",onlineUserCount:r.length}),(0,g.jsxs)(Ze.Z.Menu,{children:[(0,g.jsx)(Be.Z,{header:!0,children:t("connected_users")}),r.map((function(e,r){return(0,g.jsx)(Be.Z,{as:"button",eventKey:e,onSelect:n,children:(0,g.jsx)(tr,{user:e,onClick:n,showName:!0})},"".concat(e.user_id,"_").concat(r))}))]})]}):(0,g.jsx)("div",{className:"online-users",children:r.map((function(e,r){return(0,g.jsx)(ke.Z,{id:"online-user",description:e.name,overlayProps:{placement:"bottom",trigger:["hover","focus"]},children:(0,g.jsx)("span",{children:(0,g.jsx)(tr,{user:e,onClick:n})})},"".concat(e.user_id,"_").concat(r))}))})}function tr(e){var r=e.user,n=e.showName,t=e.onClick,i="hsl(".concat((0,$e.V)(r.user_id),", 70%, 50%)");var o=er(r.name)[0];return(0,g.jsxs)("span",{onClick:function(){t(r)},children:[(0,g.jsx)("span",{className:"online-user",style:{backgroundColor:i},children:o}),n&&r.name]})}nr.propTypes={onlineUsers:G().arrayOf(G().shape({user_id:G().string.isRequired,name:G().string.isRequired})).isRequired,goToUser:G().func.isRequired},tr.propTypes={user:G().shape({user_id:G().string.isRequired,name:G().string.isRequired}),showName:G().bool,onClick:G().func.isRequired};var ir=m.forwardRef((function(e,r){var n=(0,A.$G)().t;return(0,g.jsx)(ke.Z,{id:"connected-users",description:n("connected_users"),overlayProps:{placement:"left"},children:(0,g.jsxs)("button",{className:"btn online-user online-user-multi",onClick:e.onClick,children:[(0,g.jsx)("strong",{children:e.onlineUserCount}),(0,g.jsx)(h.Z,{type:"users",fw:!0})]})})}));ir.displayName="DropDownToggleButton",ir.propTypes={onlineUserCount:G().number.isRequired,onClick:G().func};var or=nr;function ar(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return lr(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var ur=function(e){var r=e.projectName,n=e.hasRenamePermissions,t=e.onChange,i=e.className,o=(0,A.$G)().t,a=ar((0,m.useState)(!1),2),l=a[0],u=a[1],c=n&&!l,s=ar((0,m.useState)(r),2),f=s[0],d=s[1],p=(0,m.useRef)(null);function y(){c&&(d(r),u(!0))}function v(){u(!1),t(f)}return(0,m.useEffect)((function(){var e;l&&(null===(e=p.current)||void 0===e||e.select())}),[l]),(0,g.jsxs)("div",{className:P()("project-name",i),children:[!l&&(0,g.jsx)("span",{className:"name",onDoubleClick:y,children:r}),l&&(0,g.jsx)("input",{ref:p,type:"text",className:"form-control",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),v())},onChange:function(e){d(e.target.value)},onBlur:function(){l&&v()},value:f}),c&&(0,g.jsx)(ke.Z,{id:"online-user",description:o("rename"),overlayProps:{placement:"bottom",trigger:["hover","focus"]},children:(0,g.jsx)("a",{className:"rename",role:"button",onClick:y,children:(0,g.jsx)(h.Z,{type:"pencil",fw:!0})})})]})};function cr(e){var r=e.trackChangesIsOpen,n=e.disabled,t=e.onMouseDown,i=(0,A.$G)().t,o=P()("btn","btn-full-height",{active:r&&!n,disabled:n});return(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{disabled:n,className:o,onMouseDown:t,children:[(0,g.jsx)("i",{className:"review-icon"}),(0,g.jsx)("p",{className:"toolbar-label",children:i("review")})]})})}cr.propTypes={trackChangesIsOpen:G().bool,disabled:G().bool,onMouseDown:G().func.isRequired};var sr=cr;function fr(e){var r=e.onClick,n=(0,A.$G)().t;return(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{className:"btn btn-full-height",onClick:r,children:[(0,g.jsx)(h.Z,{type:"history",fw:!0}),(0,g.jsx)("p",{className:"toolbar-label",children:n("history")})]})})}fr.propTypes={onClick:G().func.isRequired};var dr=fr;function pr(e){var r=e.onClick,n=(0,A.$G)().t;return(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{className:"btn btn-full-height",onClick:r,children:[(0,g.jsx)(h.Z,{type:"group",fw:!0}),(0,g.jsx)("p",{className:"toolbar-label",children:n("share")})]})})}pr.propTypes={onClick:G().func.isRequired};var mr=pr,Ar=n(34557);var hr=function(e){var r=e.onClick,n=(0,A.$G)().t;return(0,g.jsxs)(y.Z,{bsSize:"sm",bsStyle:null,onClick:r,className:"back-to-editor-btn",children:[(0,g.jsx)(Ar.Z,{type:"arrow_back",className:"toolbar-btn-secondary-icon"}),(0,g.jsx)("p",{className:"toolbar-label",children:n("back_to_editor")})]})},yr=n(66041),vr={import:t,path:"/overleaf/services/web/modules/publish-modal/frontend/js/components/publish-toolbar-button"},br=null==vr?void 0:vr.import.default,gr=m.memo((function(e){var r=e.cobranding,n=e.onShowLeftMenuClick,t=e.chatIsOpen,i=e.toggleChatOpen,o=e.reviewPanelOpen,a=e.toggleReviewPanelOpen,l=e.historyIsOpen,u=e.toggleHistoryOpen,c=e.unreadMessageCount,s=e.onlineUsers,f=e.goToUser,d=e.isRestrictedTokenMember,p=e.hasPublishPermissions,m=e.chatVisible,h=e.projectName,y=e.renameProject,v=e.hasRenamePermissions,b=e.openShareModal,j=e.trackChangesVisible,w=(0,A.$G)().t,x=p&&br;return(0,g.jsxs)("header",{className:"toolbar toolbar-header toolbar-with-labels",role:"navigation","aria-label":w("project_layout_sharing_submission"),children:[(0,g.jsxs)("div",{className:"toolbar-left",children:[(0,g.jsx)(Ee,{onClick:n}),r&&r.logoImgUrl&&(0,g.jsx)(_e,{...r}),(0,g.jsx)(Oe,{})]}),(0,yr.Z)("ol-showUpgradePrompt")&&(0,g.jsx)(Te,{}),(0,g.jsx)(ur,{className:"toolbar-center",projectName:h,hasRenamePermissions:v,onChange:y}),(0,g.jsxs)("div",{className:"toolbar-right",children:[(0,g.jsx)(or,{onlineUsers:s,goToUser:f}),l?(0,g.jsx)(hr,{onClick:u}):(0,g.jsxs)(g.Fragment,{children:[j&&(0,g.jsx)(sr,{onMouseDown:a,disabled:l,trackChangesIsOpen:o}),(0,g.jsx)(mr,{onClick:b}),x&&(0,g.jsx)(br,{cobranding:r}),!d&&(0,g.jsx)(dr,{onClick:u}),(0,g.jsx)(Ye,{}),m&&(0,g.jsx)(Re,{chatIsOpen:t,onClick:i,unreadMessageCount:c})]})]})]})}));gr.propTypes={onShowLeftMenuClick:G().func.isRequired,cobranding:G().object,chatIsOpen:G().bool,toggleChatOpen:G().func.isRequired,reviewPanelOpen:G().bool,toggleReviewPanelOpen:G().func.isRequired,historyIsOpen:G().bool,toggleHistoryOpen:G().func.isRequired,unreadMessageCount:G().number.isRequired,onlineUsers:G().array.isRequired,goToUser:G().func.isRequired,isRestrictedTokenMember:G().bool,hasPublishPermissions:G().bool,chatVisible:G().bool,projectName:G().string.isRequired,renameProject:G().func.isRequired,hasRenamePermissions:G().bool,openShareModal:G().func.isRequired,trackChangesVisible:G().bool};var jr=gr,wr=n(63551),xr=n(49819);function Cr(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Sr(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sr(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function Er(e){return e?"open":"close"}var Ir=m.memo((function(e){var r=e.onlineUsersArray,n=e.openDoc,t=e.openShareProjectModal,i=(0,Y.d)(),o=i.name,a=i.features.trackChangesVisible,l=(0,V._i)(),u=l.cobranding,c=l.isRestrictedTokenMember,s=l.renameProject,f=l.permissionsLevel,d=(0,U.l5)(),p=d.chatIsOpen,A=d.setChatIsOpen,h=d.reviewPanelOpen,y=d.setReviewPanelOpen,v=d.view,b=d.setView,j=d.setLeftMenuShown,w=(0,wr.mx)(),x=w.markMessagesAsRead,C=w.unreadMessageCount,S=!(0,xr.Z)(),E=(0,m.useCallback)((function(){p||x(),q.BZ("navigation-clicked-chat",{action:Er(!p)}),A(!p)}),[p,A,x]),I=(0,m.useCallback)((function(e){e.preventDefault(),q.BZ("navigation-clicked-review",{action:Er(!h)}),y((function(e){return!e}))}),[h,y]),_=Cr((0,m.useState)(p),2),k=_[0],O=_[1],T=(0,m.useCallback)((function(){var e="history"===v?"close":"open";q.BZ("navigation-clicked-history",{action:e}),p&&"open"===e&&(O(!0),E()),k&&"close"===e&&(O(!1),E()),b("history"===v?"editor":"history")}),[v,p,k,b,E]),F=(0,m.useCallback)((function(){q.BZ("navigation-clicked-share"),t()}),[t]),R=(0,m.useCallback)((function(){q.BZ("navigation-clicked-menu"),j((function(e){return!e}))}),[j]),B=(0,m.useCallback)((function(e){e.doc&&"number"==typeof e.row&&n(e.doc,{gotoLine:e.row+1})}),[n]);return(0,g.jsx)(jr,{cobranding:u,onShowLeftMenuClick:R,chatIsOpen:p,unreadMessageCount:C,toggleChatOpen:E,reviewPanelOpen:h,toggleReviewPanelOpen:I,historyIsOpen:"history"===v,toggleHistoryOpen:T,onlineUsers:r,goToUser:B,isRestrictedTokenMember:c,hasPublishPermissions:"owner"===f||"readAndWrite"===f,chatVisible:!(c||!S),projectName:o,renameProject:s,hasRenamePermissions:"owner"===f,openShareModal:F,trackChangesVisible:S&&a})})),_r=n(12296),kr=n(72891),Or=(n(95342),n(81594));function Tr(e){var r=e.handleHide,n=(0,A.$G)().t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ae.Z.Header,{closeButton:!0,children:(0,g.jsx)(ae.Z.Title,{children:n("do_you_need_edit_access")})}),(0,g.jsxs)(ae.Z.Body,{children:[(0,g.jsx)("p",{children:n("this_project_has_more_than_max_collabs",{linkSharingDate:Or.U})}),(0,g.jsx)("p",{children:n("to_keep_edit_access")})]}),(0,g.jsxs)(ae.Z.Footer,{children:[(0,g.jsx)(y.Z,{bsStyle:null,className:"btn-secondary",href:"/blog/changes-to-project-sharing",target:"_blank",rel:"noreferrer",onClick:function(){(0,q.BZ)("notification-click",{name:"link-sharing-collaborator-limit",button:"learn"})},children:n("learn_more")}),(0,g.jsx)(y.Z,{className:"btn-primary",onClick:function(){(0,q.BZ)("notification-click",{name:"link-sharing-collaborator-limit",button:"ok"}),r()},children:n("ok")})]})]})}var Fr=n(76066);function Rr(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Br(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Br(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Zr=function(){var e=Rr((0,m.useState)(!1),2),r=e[0],n=e[1],t=(0,V._i)(),i=t.isProjectOwner,o=t.permissionsLevel,a=(0,Y.d)(),l=a.members,u=a.features,c=a._id,s=function(){n(!1)};return(0,m.useEffect)((function(){var e;if(!(i||!u||"readOnly"===o)&&-1!==u.collaborators&&l.filter((function(e){return"readAndWrite"===e.privileges})).length>(null!==(e=u.collaborators)&&void 0!==e?e:1)){var r="last-shown-need-edit-modal.".concat(c),t=Fr.Z.getItem(r);(!t||t+864e5<Date.now())&&(n(!0),Fr.Z.setItem(r,Date.now()),(0,q.BZ)("notification-prompt",{name:"link-sharing-collaborator-limit"}))}}),[u,i,l,o,c]),r?(0,g.jsx)(le.Z,{animation:!0,show:r,onHide:function(){(0,q.BZ)("notification-dismiss",{name:"link-sharing-collaborator-limit"}),s()},id:"editor-over-limit-modal",children:(0,g.jsx)(Tr,{handleHide:s})}):null};function Pr(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Mr(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mr(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Dr=function(){var e=Pr((0,m.useState)(!1),2),r=e[0],n=e[1],t=(0,H.uS)().onlineUsersArray,i=(0,z.QA)().openDoc,o=(0,m.useCallback)((function(){q.xQ("ide-open-share-modal-once"),n(!0)}),[]),a=(0,m.useCallback)((function(){n(!1)}),[]),l=(0,yr.Z)("ol-linkSharingWarning");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Ir,{onlineUsersArray:t,openDoc:i,openShareProjectModal:o}),l?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Zr,{}),(0,g.jsx)(_r.Z,{show:r,handleOpen:o,handleHide:a})]}):(0,g.jsx)(kr.Z,{show:r,handleHide:a})]})};var Nr=function(e){var r=e.resetUnreadMessages,n=e.sendMessage,t=(0,A.$G)().t;return(0,g.jsxs)("form",{className:"new-message",children:[(0,g.jsx)("label",{htmlFor:"chat-input",className:"sr-only",children:t("your_message_to_collaborators")}),(0,g.jsx)("textarea",{id:"chat-input",placeholder:"".concat(t("your_message_to_collaborators"),"…"),onKeyDown:function(e){var r=e.nativeEvent.isComposing;if("Enter"===e.key&&!r){e.preventDefault();var t=e.target;n(t.value),window.setTimeout((function(){var e;t.blur(),null===(e=t.closest("form"))||void 0===e||e.reset(),t.focus()}),0)}},onClick:r})]})},Lr=n(76635),Qr=n.n(Lr);function Ur(e){var r=e.atEnd,n=e.children,t=e.className,i=void 0===t?"":t,o=e.fetchData,a=e.itemCount,l=e.isLoading,u=(0,m.useRef)(null),c=(0,m.useRef)(0);function s(){u.current.scrollTop=u.current.scrollHeight-u.current.clientHeight-c.current}return(0,m.useLayoutEffect)(s,[a]),(0,m.useEffect)((function(){var e=Qr().debounce(s,400);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,g.jsx)("div",{ref:u,onScroll:function(e){var n,t;n=u.current.scrollHeight-u.current.scrollTop-u.current.clientHeight,c.current=n,e.target===e.currentTarget&&(t=u.current.children[0].clientHeight<u.current.clientHeight,!(r||l||t)&&u.current.scrollTop<30&&o())},className:"infinite-scroll ".concat(i),children:n})}Ur.propTypes={atEnd:G().bool,children:G().element.isRequired,className:G().string,fetchData:G().func.isRequired,itemCount:G().number.isRequired,isLoading:G().bool};var Hr=Ur;function ChatFallbackError(e){var r=e.reconnect,n=(0,A.$G)().t;return(0,g.jsx)("aside",{className:"chat",children:(0,g.jsxs)("div",{className:"chat-error",children:[(0,g.jsx)(x.Z,{bsStyle:"danger",children:n("chat_error")}),r&&(0,g.jsx)("p",{className:"text-center",children:(0,g.jsx)(y.Z,{bsStyle:"info",type:"button",onClick:r,children:n("reconnect")})})]})})}ChatFallbackError.propTypes={reconnect:G().any};var zr=ChatFallbackError,qr=n(28500);function Kr(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Gr(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gr(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gr(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Vr=(0,m.lazy)((function(){return Promise.all([n.e(3546),n.e(551)]).then(n.bind(n,60551))})),Wr=m.memo((function(){var e=(0,A.$G)().t,r=(0,U.l5)(),n=r.setChatIsOpen,t=r.chatIsOpen,i=(0,W.SE)(),o=(0,wr.mx)(),a=o.status,l=o.messages,u=o.initialMessagesLoaded,c=o.atEnd,s=o.loadInitialMessages,f=o.loadMoreMessages,d=o.reset,p=o.sendMessage,h=o.markMessagesAsRead,y=o.error;(0,m.useEffect)((function(){t&&!u&&s()}),[t,s,u]);var v="pending"!==a&&0===l.length,b=l.reduce((function(e,r){return e+r.contents.length}),0),j=!(0,xr.Z)(),w=Kr((0,m.useState)(t),2),x=w[0],C=w[1];if((0,m.useEffect)((function(){t&&j?C(!0):t&&!j&&n(!1)}),[t,n,j]),y){if(y instanceof ee.kp)return(0,g.jsx)(zr,{reconnect:d});throw y}return i&&x?(0,g.jsxs)("aside",{className:"chat",children:[(0,g.jsx)(Hr,{atEnd:c,className:"messages",fetchData:f,isLoading:"pending"===a,itemCount:b,children:(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"sr-only",children:e("chat")}),(0,g.jsxs)(m.Suspense,{fallback:(0,g.jsx)(qr.Z,{delay:500}),children:["pending"===a&&(0,g.jsx)(qr.Z,{delay:500}),v&&(0,g.jsx)(Jr,{}),(0,g.jsx)(Vr,{messages:l,userId:i.id,resetUnreadMessages:h})]})]})}),(0,g.jsx)(Nr,{resetUnreadMessages:h,sendMessage:p})]}):null}));function Jr(){var e=(0,A.$G)().t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"no-messages text-center small",children:e("no_messages")}),(0,g.jsxs)("div",{className:"first-message text-center",children:[e("send_first_message"),(0,g.jsx)("br",{}),(0,g.jsx)(h.Z,{type:"arrow-down"})]})]})}var Xr=(0,j.Z)(Wr,zr);function Yr(e){var r=e.id,n=e.isOpen,t=e.setIsOpen,i=e.togglerType,o=e.tooltipWhenOpen,a=e.tooltipWhenClosed,l=n?o:a;return(0,g.jsx)(ke.Z,{id:r,description:l,overlayProps:{placement:"east"===i?"left":"right"},children:(0,g.jsx)("button",{className:P()("custom-toggler","custom-toggler-".concat(i),{"custom-toggler-open":n,"custom-toggler-closed":!n}),"aria-label":l,title:"",onClick:function(){return t(!n)}})})}function $r(){return(0,g.jsx)("aside",{id:"history-file-tree",className:"ide-react-editor-sidebar history-file-tree"})}function en(e){var r=(0,A.$G)().t;return(0,g.jsx)(B.OT,{...e,children:(0,g.jsx)("div",{className:P()("vertical-resize-handle",{"vertical-resize-handle-enabled":!e.disabled}),title:r("resize")})})}var rn=n(57743),nn=n(8596),tn=n(64733),on=n(27715),an=n(61985),ln=(n(93244),n(5247)),un=n(74450),cn=n(49243),sn=n(79412),fn=n(48493),dn=n(84153),pn=n(24272),mn=n(38113),An=n(47897);function hn(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return yn(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yn(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yn(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var vn="ENTITY",bn=function(e){var r=e.fileTreeContainer,n=e.children,t=(0,m.useMemo)((function(){return{rootElement:r}}),[r]);return(0,g.jsx)(un.W,{backend:fn.PD,options:t,children:n})};function gn(e){var r=(0,A.$G)().t,n=(0,V._i)().permissionsLevel,t=(0,$.O)().fileTreeData,i=(0,an.nF)(),o=i.selectedEntityIds,a=i.isRootFolderSelected,l=(0,on.Z)().finishMoving,u=hn((0,m.useState)(!0),2),c=u[0],s=u[1],f=(0,cn.c)({type:vn,item:function(){var n=function(e,r){return e.size>1&&e.has(r)?new Set(e):new Set([r])}(a?new Set:o,e),i=(0,mn.gl)(t,n);return{type:vn,title:wn(i,r),forbiddenFolderIds:xn(i),draggedEntityIds:n}},canDrag:function(){return"readOnly"!==n&&c},end:function(e,r){if(r.didDrop()){var n=r.getDropResult();n&&l(n.targetEntityId,e.draggedEntityIds)}}}),d=hn(f,3),p=d[1],h=d[2];return(0,m.useEffect)((function(){h((0,dn.r)())}),[h]),{dragRef:p,setIsDraggable:s}}function jn(e){var r=(0,on.Z)(),n=r.setDroppedFiles,t=r.startUploadingDocOrFile,i=hn((0,sn.L)({accept:[vn,pn.FILE],canDrop:function(r,n){return!!n.isOver({shallow:!0})&&!(r.type===vn&&r.forbiddenFolderIds.has(e))},drop:function(r,i){if(!i.didDrop())return r.type===vn?{targetEntityId:e}:void(0,ln.Z)(r).then((function(e){return e.filter((function(e){return(0,An.s)(e.name,e.relativePath)}))})).then((function(r){n({files:r,targetFolderId:e}),t()}))},collect:function(e){return{isOver:e.canDrop()}}}),2),o=i[0].isOver;return{dropRef:i[1],isOver:o}}function wn(e,r){return 1===e.size?Array.from(e)[0].entity.name:r("n_items",{count:e.size})}function xn(e){var r=Array.from(e).filter((function(e){return"folder"===e.type})).map((function(e){return e.entity})),n=new Set(r);return(0,mn.mz)(n)}var Cn=function(e){var r=e.refProviders,n=e.reindexReferences,t=e.setRefProviderEnabled,i=e.setStartedFreeTrial,o=e.onSelect,a=e.fileTreeContainer,l=e.children;return(0,g.jsx)(tn.Q,{refProviders:r,setRefProviderEnabled:t,setStartedFreeTrial:i,reindexReferences:n,children:(0,g.jsx)(an.oJ,{onSelect:o,children:(0,g.jsx)(on.P,{reindexReferences:n,children:(0,g.jsx)(bn,{fileTreeContainer:a,children:l})})})})};function Sn(e){var r,n=e.isOver,t=e.isDragging,i=e.item,o=e.clientOffset,a=(0,m.useRef)();return(0,g.jsx)("div",{ref:a,className:P()("dnd-draggable-preview-layer",{"dnd-droppable-hover":n}),children:t&&(null==i?void 0:i.title)&&(0,g.jsx)("div",{style:In(o,null===(r=a.current)||void 0===r?void 0:r.getBoundingClientRect()),children:(0,g.jsx)(En,{title:i.title})})})}function En(e){var r=e.title;return(0,g.jsx)("div",{className:"dnd-draggable-preview-item",children:r})}function In(e,r){if(!r||!e)return{display:"none"};var n=r.x,t=r.y,i=e.x,o=e.y-t-15,a="translate(".concat(i-n-15,"px, ").concat(o,"px)");return{transform:a,WebkitTransform:a}}Sn.propTypes={isOver:G().bool.isRequired,isDragging:G().bool.isRequired,item:G().shape({title:G().string}),clientOffset:G().shape({x:G().number,y:G().number})},En.propTypes={title:G().string.isRequired};var _n=Sn,kn=(n(43430),n(93057)),On=n(41061);function Tn(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Fn(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function Rn(e){var r=e.name,n=e.isSelected,t=e.setIsDraggable,i=(0,on.Z)(),o=i.isRenaming,a=i.startRenaming,l=i.finishRenaming,u=i.error,c=i.cancel,s=o&&n&&!u;return(0,m.useEffect)((function(){t(!s)}),[t,s]),s?(0,g.jsx)(Zn,{initialValue:r,finishRenaming:l,cancel:c}):(0,g.jsx)(Bn,{name:r,isSelected:n,startRenaming:a})}function Bn(e){var r=e.name,n=e.isSelected,t=e.startRenaming,i=Tn((0,m.useState)(0),2),o=i[0],a=i[1];return(0,g.jsx)("button",{className:"item-name-button",onClick:function(){a(o+1),n||a(0)},onDoubleClick:function(){o<2||t()},children:(0,g.jsx)("span",{children:r})})}function Zn(e){var r=e.initialValue,n=e.finishRenaming,t=e.cancel,i=Tn((0,m.useState)(r),2),o=i[0],a=i[1],l=(0,On.Z)().autoFocusedRef;return(0,g.jsx)("span",{className:"rename-input",children:(0,g.jsx)("input",{type:"text",value:o,onKeyDown:function(e){"Enter"===e.key&&n(o),"Escape"===e.key&&t()},onChange:function(e){a(e.target.value)},onBlur:function(){n(o)},onFocus:function(e){var r=e.target.value.lastIndexOf(".");e.target.setSelectionRange(0,r)},ref:l})})}Rn.propTypes={name:G().string.isRequired,isSelected:G().bool.isRequired,setIsDraggable:G().func.isRequired},Bn.propTypes={name:G().string.isRequired,startRenaming:G().func.isRequired,isSelected:G().bool.isRequired},Zn.propTypes={initialValue:G().string.isRequired,finishRenaming:G().func.isRequired,cancel:G().func.isRequired};var Pn=Rn;function Mn(e){var r=e.id,n=(0,A.$G)().t,t=(0,tn.e)(),i=t.contextMenuCoords,o=t.setContextMenuCoords,a=(0,m.useRef)();return(0,g.jsx)("div",{className:"menu-button btn-group",children:(0,g.jsx)("button",{className:"entity-menu-toggle btn btn-sm",id:"menu-button-".concat(r),onClick:function(e){if(e.stopPropagation(),i)o(null);else{var r=a.current.getBoundingClientRect();o({top:r.top+r.height/2,left:r.right})}},ref:a,children:(0,g.jsx)(h.Z,{type:"ellipsis-v",accessibilityLabel:n("menu")})})})}Mn.propTypes={id:G().string.isRequired};var Dn=Mn,Nn=n(70819);var Ln=function(e){var r,n=e.id,t=e.name,i=e.type,o=e.isSelected,a=e.icons,l=(0,V._i)().permissionsLevel,u=(0,tn.e)().setContextMenuCoords,c=(0,on.Z)().isRenaming,s=(0,an.nF)().selectedEntityIds,f="readOnly"!==l&&o&&1===s.size,d=gn(n),p=d.dragRef,A=d.setIsDraggable,h=(0,Nn.N)().getMonitor().getItem(),y=(0,m.useRef)(null);return(0,m.useEffect)((function(){var e=y.current;o&&e&&setTimeout((function(){e&&(0,kn.Z)(e,{scrollMode:"if-needed"})}),100)}),[o,y]),(0,g.jsx)("div",{className:P()("entity",{"file-tree-entity-dragging":null==h||null===(r=h.draggedEntityIds)||void 0===r?void 0:r.has(n)}),role:"presentation",ref:p,draggable:!c,onContextMenu:function(e){e.preventDefault(),u({top:e.pageY,left:e.pageX})},"data-file-id":n,"data-file-type":i,children:(0,g.jsxs)("div",{className:"entity-name entity-name-react",role:"presentation",ref:y,children:[a,(0,g.jsx)(Pn,{name:t,isSelected:o,setIsDraggable:A}),f?(0,g.jsx)(Dn,{id:n}):null]})})},Qn=n(65487);function Un(e){var r=e.name,n=e.id,t=e.isFile,i=e.isLinkedFile,o=t?"file":"doc",a=(0,an.mI)(n,o),l=a.isSelected,u=a.props;return(0,g.jsx)("li",{role:"treeitem",...u,"aria-label":r,tabIndex:"0",children:(0,g.jsx)(Ln,{id:n,name:r,type:o,isSelected:l,icons:(0,g.jsx)(Hn,{isLinkedFile:i,name:r})})})}Un.propTypes={name:G().string.isRequired,id:G().string.isRequired,isFile:G().bool,isLinkedFile:G().bool};var Hn=function(e){var r=e.isLinkedFile,n=e.name,t=(0,A.$G)().t,i=P()("spaced","file-tree-icon",{"linked-file-icon":r});return(0,g.jsxs)(g.Fragment,{children:[" ",(0,g.jsx)(h.Z,{type:(0,Qn.Z)(n),fw:!0,className:i}),r&&(0,g.jsx)(h.Z,{type:"external-link-square",modifier:"rotate-180",className:"linked-file-highlight",accessibilityLabel:t("linked_file")})]})};Hn.propTypes={name:G().string.isRequired,isLinkedFile:G().bool};var zn=Un,qn=n(18977);function Kn(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Gn(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function Vn(e){var r=e.name,n=e.id,t=e.folders,i=e.docs,o=e.files,a=(0,A.$G)().t,l=(0,an.mI)(n,"folder"),u=l.isSelected,c=l.props,s=(0,an.nF)(n).selectedEntityParentIds,f=Kn((0,qn.Z)("folder.".concat(n,".expanded"),!1),2),d=f[0],p=f[1];(0,m.useEffect)((function(){s.has(n)&&p(!0)}),[n,s,p]);var y=jn(n),v=y.isOver,b=y.dropRef,j=jn(n),w=j.isOver,x=j.dropRef,C=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{onClick:function(){p(!d)},"aria-label":a(d?"collapse":"expand"),children:(0,g.jsx)(h.Z,{type:d?"angle-down":"angle-right",fw:!0,className:"file-tree-expand-icon"})}),(0,g.jsx)(h.Z,{type:d?"folder-open":"folder",fw:!0,className:"file-tree-folder-icon"})]});return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("li",{role:"treeitem",...c,"aria-expanded":d,"aria-label":r,tabIndex:"0",ref:b,className:P()(c.className,{"dnd-droppable-hover":v||w}),children:(0,g.jsx)(Ln,{id:n,name:r,type:"folder",isSelected:u,icons:C})}),d?(0,g.jsx)(rt,{folders:t,docs:i,files:o,dropRef:x}):null]})}Vn.propTypes={name:G().string.isRequired,id:G().string.isRequired,folders:G().array.isRequired,docs:G().array.isRequired,files:G().array.isRequired};var Wn=Vn,Jn=n(50325);function Xn(e){return function(e){if(Array.isArray(e))return Yn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return Yn(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yn(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function $n(e){var r=e.folders,n=e.docs,t=e.files,i=e.classes,o=void 0===i?{}:i,a=e.dropRef,l=void 0===a?null:a,u=e.children,c=e.dataTestId;t=t.map((function(e){return{...e,isFile:!0}}));var s=[].concat(Xn(n),Xn(t));return(0,g.jsxs)("ul",{className:P()("list-unstyled",o.root),role:"tree",ref:l,"data-testid":c,children:[r.sort(et).map((function(e){return(0,g.jsx)(Wn,{name:e.name,id:e._id,folders:e.folders,docs:e.docs,files:e.fileRefs},e._id)})),s.sort(et).map((function(e){return(0,g.jsx)(zn,{name:e.name,id:e._id,isFile:e.isFile,isLinkedFile:e.linkedFileData&&!!e.linkedFileData.provider},e._id)})),u]})}function et(e,r){return Jn.W.compare(e.name,r.name)}$n.propTypes={folders:G().array.isRequired,docs:G().array.isRequired,files:G().array.isRequired,classes:G().exact({root:G().string}),dropRef:G().func,children:G().node,dataTestId:G().string};var rt=$n;function nt(){var e=(0,A.$G)().t,r=(0,on.Z)(),n=r.canCreate,t=r.startCreatingFolder,i=r.startCreatingDocOrFile,o=r.startUploadingDocOrFile;return n?(0,g.jsxs)("div",{className:"toolbar-left",children:[(0,g.jsx)(ke.Z,{id:"new-file",description:e("new_file"),overlayProps:{placement:"bottom"},children:(0,g.jsx)(y.Z,{onClick:function(){q.BZ("new-file-click",{location:"toolbar"}),i()},bsStyle:null,children:(0,g.jsx)(h.Z,{type:"file",fw:!0,accessibilityLabel:e("new_file")})})}),(0,g.jsx)(ke.Z,{id:"new-folder",description:e("new_folder"),overlayProps:{placement:"bottom"},children:(0,g.jsx)(y.Z,{onClick:t,bsStyle:null,children:(0,g.jsx)(h.Z,{type:"folder",fw:!0,accessibilityLabel:e("new_folder")})})}),(0,g.jsx)(ke.Z,{id:"upload",description:e("upload"),overlayProps:{placement:"bottom"},children:(0,g.jsx)(y.Z,{onClick:function(){q.BZ("upload-click",{location:"toolbar"}),o()},children:(0,g.jsx)(h.Z,{type:"upload",fw:!0,accessibilityLabel:e("upload")})})})]}):null}function tt(){var e=(0,A.$G)().t,r=(0,on.Z)(),n=r.canRename,t=r.canDelete,i=r.startRenaming,o=r.startDeleting;return n||t?(0,g.jsxs)("div",{className:"toolbar-right",children:[n?(0,g.jsx)(ke.Z,{id:"rename",description:e("rename"),overlayProps:{placement:"bottom"},children:(0,g.jsx)(y.Z,{onClick:i,children:(0,g.jsx)(h.Z,{type:"pencil",fw:!0,accessibilityLabel:e("rename")})})}):null,t?(0,g.jsx)(ke.Z,{id:"delete",description:e("delete"),overlayProps:{placement:"bottom"},children:(0,g.jsx)(y.Z,{onClick:o,children:(0,g.jsx)(h.Z,{type:"trash-o",fw:!0,accessibilityLabel:e("delete")})})}):null]}):null}var it=function(){return"readOnly"===(0,V._i)().permissionsLevel?null:(0,g.jsxs)("div",{className:"toolbar toolbar-filetree",children:[(0,g.jsx)(nt,{}),(0,g.jsx)(tt,{})]})};var ot=function(){var e=(0,A.$G)().t,r=(0,on.Z)(),n=r.isDeleting,t=r.inFlight,i=r.finishDeleting,o=r.actionedEntities,a=r.cancel,l=r.error;if(!n)return null;function u(){a()}return(0,g.jsxs)(le.Z,{show:!0,onHide:u,children:[(0,g.jsx)(ae.Z.Header,{children:(0,g.jsx)(ae.Z.Title,{children:e("delete")})}),(0,g.jsxs)(ae.Z.Body,{children:[(0,g.jsx)("p",{children:e("sure_you_want_to_delete")}),(0,g.jsx)("ul",{children:o.map((function(e){return(0,g.jsx)("li",{children:e.name},e._id)}))}),l&&(0,g.jsx)("div",{className:"alert alert-danger file-tree-modal-alert",children:e("generic_something_went_wrong")})]}),(0,g.jsx)(ae.Z.Footer,{children:t?(0,g.jsxs)(y.Z,{bsStyle:"danger",disabled:!0,children:[e("deleting"),"…"]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(y.Z,{bsStyle:null,className:"btn-secondary",onClick:u,children:e("cancel")}),(0,g.jsx)(y.Z,{bsStyle:"danger",onClick:function(){i()},children:e("delete")})]})})]})},at=(n(45794),n(17776)),lt=n(61416);function ut(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return ct(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function st(e){var r=e.name,n=e.setName,t=e.validName,i=e.setValidName,o=e.handleCreateFolder,a=(0,On.Z)().autoFocusedRef;return(0,g.jsx)("input",{ref:a,className:"form-control",type:"text",value:r,onKeyDown:function(e){"Enter"===e.key&&t&&o()},onChange:function(e){i((0,lt.AG)(e.target.value.trim())),n(e.target.value)},onFocus:function(e){e.target.setSelectionRange(0,-1)}})}st.propTypes={name:G().string.isRequired,setName:G().func.isRequired,validName:G().bool.isRequired,setValidName:G().func.isRequired,handleCreateFolder:G().func.isRequired};var ft=function(){var e=(0,A.$G)().t,r=ut((0,m.useState)(""),2),n=r[0],t=r[1],i=ut((0,m.useState)(!0),2),o=i[0],a=i[1],l=(0,on.Z)(),u=l.isCreatingFolder,c=l.inFlight,s=l.finishCreatingFolder,f=l.cancel,d=l.error;if((0,m.useEffect)((function(){u||t("")}),[u]),!u)return null;function p(){f()}function h(){s(n)}function v(){return d.constructor===at.w4?e("file_already_exists"):e("generic_something_went_wrong")}return(0,g.jsxs)(le.Z,{show:!0,onHide:p,children:[(0,g.jsx)(ae.Z.Header,{children:(0,g.jsx)(ae.Z.Title,{children:e("new_folder")})}),(0,g.jsxs)(ae.Z.Body,{children:[(0,g.jsx)(st,{name:n,setName:t,validName:o,setValidName:a,handleCreateFolder:h}),o?null:(0,g.jsx)("div",{role:"alert","aria-label":e("files_cannot_include_invalid_characters"),className:"alert alert-danger file-tree-modal-alert",children:e("files_cannot_include_invalid_characters")}),d?(0,g.jsx)("div",{role:"alert","aria-label":v(),className:"alert alert-danger file-tree-modal-alert",children:v()}):null]}),(0,g.jsx)(ae.Z.Footer,{children:c?(0,g.jsxs)(y.Z,{bsStyle:"primary",disabled:!0,children:[e("creating"),"…"]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(y.Z,{bsStyle:null,className:"btn-secondary",onClick:p,children:e("cancel")}),(0,g.jsx)(y.Z,{bsStyle:"primary",onClick:h,disabled:!o,children:e("create")})]})})]})};var dt=function FileTreeModalError(){var e=(0,A.$G)().t,r=(0,on.Z)(),n=r.isRenaming,t=r.isMoving,i=r.cancel,o=r.error;if(!o)return null;if(!n&&!t)return null;function a(){i()}function l(){switch(o.constructor){case at.w4:return e("file_already_exists");case at.d9:return(0,g.jsx)(A.cC,{i18nKey:"file_already_exists_in_this_location",components:[(0,g.jsx)("strong",{})],values:{fileName:o.entityName},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}});case at.I9:return e("files_cannot_include_invalid_characters");case at.Cr:return e("blocked_filename");default:return e("generic_something_went_wrong")}}return(0,g.jsxs)(ae.Z,{show:!0,onHide:a,children:[(0,g.jsx)(ae.Z.Header,{children:(0,g.jsx)(ae.Z.Title,{children:function(){switch(o.constructor){case at.w4:case at.d9:return e("duplicate_file");case at.I9:case at.Cr:return e("invalid_file_name");default:return e("error")}}()})}),(0,g.jsx)(ae.Z.Body,{children:(0,g.jsx)("div",{role:"alert","aria-label":l(),children:l()})}),(0,g.jsx)(ae.Z.Footer,{children:(0,g.jsx)(y.Z,{onClick:a,bsStyle:"primary",children:e("ok")})})]})};n(96708);var pt=function(){var e=(0,A.$G)().t,r=(0,on.Z)(),n=r.canRename,t=r.canDelete,i=r.canCreate,o=r.startRenaming,a=r.startDeleting,l=r.startCreatingFolder,u=r.startCreatingDocOrFile,c=r.startUploadingDocOrFile,s=r.downloadPath,f=r.selectedFileName,d=(0,Y.d)().owner,p=(0,m.useCallback)((function(){null!=f&&f.endsWith(".bib")&&q.BZ("download-bib-file",{projectOwner:d._id})}),[f,d]),h=(0,m.useCallback)((function(){q.BZ("new-file-click",{location:"file-menu"}),u()}),[u]),y=(0,m.useCallback)((function(){q.BZ("upload-click",{location:"file-menu"}),c()}),[c]);return(0,g.jsxs)(g.Fragment,{children:[n?(0,g.jsx)(Be.Z,{onClick:o,children:e("rename")}):null,s?(0,g.jsx)(Be.Z,{href:s,onClick:p,download:!0,children:e("download")}):null,t?(0,g.jsx)(Be.Z,{onClick:a,children:e("delete")}):null,i?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Be.Z,{divider:!0}),(0,g.jsx)(Be.Z,{onClick:h,children:e("new_file")}),(0,g.jsx)(Be.Z,{onClick:l,children:e("new_folder")}),(0,g.jsx)(Be.Z,{onClick:y,children:e("upload")})]}):null]})};var mt=m.forwardRef((function(e,r){e.bsRole;return null}));mt.displayName="FakeDropDownToggle";var At=function(){var e=(0,V._i)().permissionsLevel,r=(0,tn.e)(),n=r.contextMenuCoords,t=r.setContextMenuCoords;if("readOnly"===e||!n)return null;function i(e){e||t(null)}return p.createPortal((0,g.jsxs)(Ze.Z,{onClick:function(){i(!1)},open:!0,id:"dropdown-file-tree-context-menu",onToggle:i,children:[(0,g.jsx)(mt,{bsRole:"toggle"}),(0,g.jsx)(Ze.Z.Menu,{className:"context-menu",style:n,children:(0,g.jsx)(pt,{})})]}),document.body)};var ht=function FileTreeError(){var e=(0,A.$G)().t,r=(0,v.T)().reload;return(0,g.jsxs)("div",{className:"file-tree-error",children:[(0,g.jsx)("p",{children:e("generic_something_went_wrong")}),(0,g.jsx)("p",{children:e("please_refresh")}),(0,g.jsx)(y.Z,{bsStyle:"primary",onClick:r,children:e("refresh")})]})};n(39529),n(31235);function yt(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return vt(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var bt=(0,m.createContext)(void 0),gt=function(){var e=(0,m.useContext)(bt);if(!e)throw new Error("useFileTreeCreateForm is only available inside FileTreeCreateFormProvider");return e},jt=function(e){var r=e.children,n=yt((0,m.useState)(!1),2),t=n[0],i=n[1];return(0,g.jsx)(bt.Provider,{value:{valid:t,setValid:i},children:r})};function wt(e){var r=e.mode,n=e.icon,t=e.label,i=(0,on.Z)(),o=i.newFileCreateMode,a=i.startCreatingFile;return(0,g.jsx)("li",{className:P()({active:o===r}),children:(0,g.jsxs)(y.Z,{bsStyle:"link",block:!0,onClick:function(){a(r),q.BZ("file-modal-click",{method:r})},className:"modal-new-file-mode",children:[(0,g.jsx)(h.Z,{type:n,fw:!0})," ",t]})})}function xt(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Ct(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}wt.propTypes={mode:G().string.isRequired,icon:G().string.isRequired,label:G().string.isRequired};var St=(0,m.createContext)(void 0),Et=function(){var e=(0,m.useContext)(St);if(!e)throw new Error("useFileTreeCreateName is only available inside FileTreeCreateNameProvider");return e},It=function(e){var r=e.children,n=e.initialName,t=void 0===n?"":n,i=xt((0,m.useReducer)((function(e,r){return{name:r,touchedName:!0}}),{name:t,touchedName:!1}),2),o=i[0],a=i[1],l=(0,m.useMemo)((function(){return(0,lt.AG)(o.name.trim())}),[o]);return(0,g.jsx)(St.Provider,{value:{...o,setName:a,validName:l},children:r})},_t=n(99262),kt=n(72300),Ot=n(51854),Tt=(n(21515),n(30286));function Ft(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Rt(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Bt=n(10726),Zt=n.n(Bt),Pt=n(88664),Mt=n.n(Pt);function Dt(e){var r=e.label,n=e.focusName,t=void 0!==n&&n,i=e.classes,o=void 0===i?{}:i,a=e.placeholder,l=e.error,u=e.inFlight,c=(0,A.$G)().t,s=Et(),f=s.name,d=s.setName,p=s.touchedName,h=s.validName,y=(0,m.useCallback)((function(e){e&&t&&window.requestAnimationFrame((function(){e.focus(),e.setSelectionRange(0,e.value.lastIndexOf("."))}))}),[t]);return(0,g.jsxs)(Mt(),{controlId:"new-doc-name",className:o.formGroup,children:[(0,g.jsx)(Zt(),{children:r||c("file_name")}),(0,g.jsx)(Ot.Z,{type:"text",placeholder:a||c("file_name"),required:!0,value:f,onChange:function(e){return d(e.target.value)},inputRef:y,disabled:u}),(0,g.jsx)(Ot.Z.Feedback,{}),p&&!h&&(0,g.jsx)(x.Z,{bsStyle:"danger",className:"row-spaced-small",children:c("files_cannot_include_invalid_characters")}),l&&(0,g.jsx)(Nt,{error:l})]})}function Nt(e){var r=e.error,n=(0,A.$G)().t;switch(r.constructor){case at.w4:return(0,g.jsx)(x.Z,{bsStyle:"danger",className:"row-spaced-small",children:n("file_already_exists")});case at.I9:return(0,g.jsx)(x.Z,{bsStyle:"danger",className:"row-spaced-small",children:n("files_cannot_include_invalid_characters")});case at.Cr:return(0,g.jsx)(x.Z,{bsStyle:"danger",className:"row-spaced-small",children:n("blocked_filename")});default:return null}}Dt.propTypes={focusName:G().bool,label:G().string,classes:G().shape({formGroup:G().string}),placeholder:G().string,error:G().oneOfType([G().object,G().string]),inFlight:G().bool.isRequired},Nt.propTypes={error:G().oneOfType([G().object,G().string]).isRequired};var Lt=n(37087),Qt=n(36190),Ut=n(92910);function Ht(e){var r=e.provider,n=e.data,t=e.selectedGroupId,i=e.setSelectedGroupId,o=(0,A.$G)().t;switch(r){case"mendeley":return(0,g.jsxs)(_t.Z,{controlId:"group-select",children:[(0,g.jsx)(kt.Z,{children:o("select_a_group_optional")}),(0,g.jsxs)(Ot.Z,{className:"form-control",componentClass:"select",placeholder:o("select_a_group_optional"),value:t||"",onChange:function(e){return i(e.target.value)},children:[(0,g.jsxs)("option",{disabled:!0,value:"",children:["- ",o("select_a_group_optional")]}),n.map((function(e){return(0,g.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]});case"zotero":return(0,g.jsxs)(_t.Z,{controlId:"group-select",children:[(0,g.jsx)(kt.Z,{children:o("library")}),(0,g.jsxs)(Ot.Z,{className:"form-control",componentClass:"select",value:t||"",onChange:function(e){return i(e.target.value)},children:[(0,g.jsx)("option",{value:"",children:o("my_library")}),(0,g.jsx)("option",{disabled:!0,value:"_",children:o("group_libraries")}),n.map((function(e){return(0,g.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]});default:throw new Error('Unknown reference provider "'.concat(r,'"'))}}Ht.propTypes={provider:G().string.isRequired,data:G().arrayOf(G().object).isRequired,selectedGroupId:G().string,setSelectedGroupId:G().func.isRequired};var zt=n(70887),qt=n(22276);function Kt(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Gt(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function Vt(e){var r,n=e.provider,t=e.providerName,i=e.supportsGroups,o=void 0!==i&&i,a=e.supportsFormat,l=void 0!==a&&a,u=(0,A.$G)().t,c=Et(),s=c.name,f=c.validName,d=gt().setValid,p=(0,W.SE)().features,v=(0,tn.e)(),b=v.refProviders,j=v.setStartedFreeTrial,w=v.setRefProviderEnabled,C=(0,on.Z)(),S=C.error,E=C.finishCreatingLinkedFile,I=C.inFlight,_=(0,tn.e)().reindexReferences,k=Kt((0,m.useState)(""),2),O=k[0],T=k[1],F=Kt((0,m.useState)("bibtex"),2),R=F[0],B=F[1];(0,zt.K)((0,m.useCallback)((function(e){e.refProviders&&n in e.refProviders&&(w(n,!1),window.setTimeout((function(){w(n,e.refProviders[n])})))}),[n,w]));var Z=(null==p?void 0:p.references)||(null==p?void 0:p[n])||!1,P=Z&&b[n],M=(0,m.useCallback)((function(){q.BZ("link-integration-click",{integration:n,location:"Editor"}),window.open("/".concat(n,"/oauth"),"reference-auth","width=700,height=500")}),[n]),D=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ft((0,m.useState)(!1),2),t=n[0],i=n[1],o=Ft((0,m.useState)(null),2),a=o[0],l=o[1],u=Ft((0,m.useState)(null),2),c=u[0],s=u[1],f=(0,Tt.Z)().signal;return(0,m.useEffect)((function(){r&&(i(!0),s(null),l(null),(0,ee.xA)("/".concat(e,"/groups"),{signal:f}).then((function(e){l(e.groups)})).catch((function(e){400===e.response.status?e.data.relink&&s("relink"):s("loading_groups")})).finally((function(){i(!1)})))}),[r,e,f]),{loading:t,data:a,error:c}}(n,o&&P);(0,m.useEffect)((function(){d(f&&P&&!D.error)}),[d,f,P,D.error]);var N=(0,m.useCallback)((function(e){e.preventDefault();var r={};O&&(r.group_id=O),l&&(r.format=R),E({name:s,provider:n,data:r}).then(_),q.BZ("new-file-created",{method:n,extension:s.split(".").length>1?s.split(".").pop():""})}),[s,O,n,E,R,_,l]),L=(0,qt.ye)("paywall-cta");return Z?(0,g.jsxs)("div",{className:"referencesImportModal",children:[P?(0,g.jsxs)("div",{children:[D.loading?(0,g.jsx)("div",{children:(0,g.jsx)("h2",{className:"text-center",children:(0,g.jsxs)("small",{children:[(0,g.jsx)(h.Z,{type:"refresh",spin:!0,fw:!0})," ",u("loading"),"…"]})})}):(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{children:u("import_a_bibtex_file_from_your_provider_account",{provider:t})}),(0,g.jsxs)("form",{noValidate:!0,id:"create-file",onSubmit:N,children:[D.error&&(0,g.jsx)(Jt,{provider:n,error:D.error,linkAccount:M}),D.data&&D.data.length>0&&(0,g.jsx)("div",{className:"row-spaced-small",children:(0,g.jsx)(Ht,{provider:n,data:D.data,selectedGroupId:O,setSelectedGroupId:T})}),(0,g.jsx)("div",{className:"row-spaced-small",children:(0,g.jsx)(Dt,{label:u("file_name_in_this_project"),focusName:!0,error:S,inFlight:I})}),l&&(0,g.jsx)("div",{className:"row-spaced-small",children:(0,g.jsxs)(_t.Z,{controlId:"format",children:[(0,g.jsx)(kt.Z,{children:u("format")}),(0,g.jsxs)(Ot.Z,{className:"form-control",componentClass:"select",value:R,onChange:function(e){return B(e.target.value)},children:[(0,g.jsx)("option",{value:"bibtex",children:"BibTeX"}),(0,g.jsx)("option",{value:"biblatex",children:"BibLaTeX"})]})]})})]})]}),I&&(0,g.jsx)("h3",{className:"text-center",children:(0,g.jsxs)("small",{children:[(0,g.jsx)(h.Z,{type:"refresh",spin:!0,fw:!0})," ",u("importing"),"…"]})})]}):(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{children:Wt[n].sync_description(u)}),(0,g.jsx)("p",{children:(0,g.jsx)(y.Z,{bsStyle:"info",type:"button",onClick:M,children:Wt[n].link_to(u)})})]}),S&&(0,g.jsx)(g.Fragment,{children:"string"==typeof S?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("hr",{}),(0,g.jsx)(Jt,{error:S,provider:n,linkAccount:M})]}),(0,g.jsx)(Yt,{error:S,provider:n,linkAccount:M})]}):null!==(r=S.data)&&void 0!==r&&r.relink?(0,g.jsx)(Xt,{provider:n,linkAccount:M}):(0,g.jsx)(Lt.Z,{error:S})})]}):(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"small",children:Wt[n].sync_description(u)}),(0,g.jsxs)(x.Z,{bsStyle:"info",children:[(0,g.jsx)("p",{children:Wt[n].is_premium(u)}),(0,g.jsx)("p",{children:(0,g.jsx)(Ut.Z,{source:n,handleClick:function(){return j(!0)},children:L?Wt[n].cta(u):u("start_free_trial")})})]})]})}var Wt={mendeley:{default:function(e){return e("mendeley_reference_loading_error")},expired:function(e){return e("mendeley_reference_loading_error_expired")},forbidden:function(e){return e("mendeley_reference_loading_error_forbidden")},"refresh-failed":function(e){return e("mendeley_reference_loading_error_expired")},sync_description:function(e){return e("mendeley_sync_description")},link_to:function(e){return e("link_to_mendeley")},is_premium:function(e){return e("mendeley_is_premium")},loading_groups:function(e){return e("mendeley_groups_loading_error")},relink:function(e){return e("mendeley_groups_relink")},cta:function(e){return e("mendeley_cta")}},zotero:{default:function(e){return e("zotero_reference_loading_error")},expired:function(e){return e("zotero_reference_loading_error_expired")},forbidden:function(e){return e("zotero_reference_loading_error_forbidden")},"refresh-failed":function(e){return e("zotero_reference_loading_error_expired")},sync_description:function(e){return e("zotero_sync_description")},link_to:function(e){return e("link_to_zotero")},is_premium:function(e){return e("zotero_is_premium")},loading_groups:function(e){return e("zotero_groups_loading_error")},relink:function(e){return e("zotero_groups_relink")},cta:function(e){return e("zotero_cta")}}};function Jt(e){var r=e.provider,n=e.error,t=e.linkAccount,i=(0,A.$G)().t;return"relink"===n?(0,g.jsx)(Xt,{provider:r,linkAccount:t}):n in Wt[r]?(0,g.jsx)(Qt.Z,{children:Wt[r][n](i)}):(0,g.jsx)(Lt.Z,{error:n})}function Xt(e){var r=e.provider,n=e.linkAccount,t=(0,A.$G)().t;return(0,g.jsxs)(Qt.Z,{children:[(0,g.jsx)("div",{children:Wt[r].relink(t)}),(0,g.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:(0,g.jsx)(y.Z,{bsStyle:"danger",type:"button",onClick:n,children:t("relink_your_account")})})]})}function Yt(e){var r=e.error,n=e.provider,t=e.linkAccount,i=(0,A.$G)().t;switch(r){case"refresh-failed":return(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{children:Wt[n].sync_description(i)}),(0,g.jsx)("p",{children:(0,g.jsx)(y.Z,{bsStyle:"info",type:"button",onClick:t,children:Wt[n].link_to(i)})})]});case"default":case"expired":case"forbidden":return(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{children:[i("reference_error_relink_hint"),"  "]}),(0,g.jsx)("div",{children:(0,g.jsx)("a",{href:"/user/settings",target:"_blank",rel:"noopener",style:{fontWeight:"bold"},children:i("account_settings")})})]});default:return null}}function $t(){var e=(0,A.$G)().t;return(0,g.jsx)(wt,{mode:"mendeley",icon:"book",label:e("from_provider",{provider:"Mendeley"})})}function ei(){return"mendeley"!==(0,on.Z)().newFileCreateMode?null:(0,g.jsx)(It,{initialName:"references.bib",children:(0,g.jsx)(Vt,{provider:"mendeley",providerName:"Mendeley",supportsGroups:!0})})}function ri(){var e=(0,A.$G)().t;return(0,g.jsx)(wt,{mode:"zotero",icon:"book",label:e("from_provider",{provider:"Zotero"})})}function ni(){return"zotero"!==(0,on.Z)().newFileCreateMode?null:(0,g.jsx)(It,{initialName:"references.bib",children:(0,g.jsx)(Vt,{provider:"zotero",providerName:"Zotero",supportsGroups:!0,supportsFormat:!0})})}var ti=n(14204),ii=n(96480),oi=function(e){var r=e.onDismiss,n=e.handleLearnMore,t=e.handleFreeTrialClick,i=(0,A.$G)().t,o=(0,g.jsxs)("div",{children:[(0,g.jsx)(Ut.Z,{source:"create-bib-file-upgrade-prompt",handleClick:t,children:i("upgrade")}),(0,g.jsx)(y.Z,{bsStyle:null,className:"btn-bg-ghost",href:"/learn/how-to/How_to_link_your_Overleaf_account_to_Mendeley_and_Zotero",target:"blank",onClick:n,children:i("learn_more")})]}),a=(0,g.jsx)("div",{children:i("easily_import_and_sync_your_references")}),l=(0,g.jsx)("img",{src:"/img/third-party-references/book-illlustration.svg","aria-hidden":"true",alt:"better bibliographies",width:64,height:64});return(0,g.jsx)("div",{className:"tpr-file-promo-container tpr-bib-file-prompt hidden-sm",children:(0,g.jsx)(ii.Z,{type:"offer",action:o,isDismissible:!0,isActionBelowContent:!0,customIcon:l,title:i("adding_a_bibliography"),content:a,onDismiss:r})})},ai="bib-file-tpr-prompt",li={location:"create-bib-file-upgrade-prompt",name:ai},ui=function(){var e=(0,qt.yW)().splitTestVariants,r=(0,W.SE)(),n=r.allowedFreeTrial,t=r.features,i=(0,V._i)().inactiveTutorials,o=(0,ti.o)(ai,li),a=o.completeTutorial,l=o.dismissTutorial,u=o.tryShowingPopup,c=o.showPopup,s=o.clearAndShow;(0,m.useEffect)((function(){var r="new-bib-file"===e["bib-file-tpr-prompt"],o=i.includes(ai),a=!(null!=t&&t.mendeley||null!=t&&t.zotero);r&&(n&&a)&&!o&&(u("reference-manager-prompt-view")||s("reference-manager-prompt-view"))}),[s,u,n,t,i,e]);var f=(0,m.useCallback)((function(){return a({event:"promo-click",action:"complete",button:"Upgrade"})}),[a]),d=(0,m.useCallback)((function(){return q.BZ("promo-click",{...li,button:"Learn more"})}),[]);return c?(0,g.jsx)(oi,{handleFreeTrialClick:f,handleLearnMore:d,onDismiss:l}):null},ci=(0,m.memo)(ui),si=[{import:a,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/promotions/new-bib-file-prompt"}];function fi(){var e=Et(),r=e.name,n=e.validName,t=gt().setValid,i=(0,on.Z)(),o=i.error,a=i.finishCreatingDoc,l=i.inFlight;(0,m.useEffect)((function(){t(n)}),[t,n]);var u=(0,m.useCallback)((function(e){e.preventDefault(),a({name:r}),q.BZ("new-file-created",{method:"doc",extension:r.split(".").length>1?r.split(".").pop():""})}),[a,r]);return(0,g.jsxs)("form",{noValidate:!0,id:"create-file",onSubmit:u,children:[(0,g.jsx)(Dt,{focusName:!0,error:o,inFlight:l}),o&&(0,g.jsx)(Lt.Z,{error:o}),si.map((function(e){var r=e.import.default,n=e.path;return(0,g.jsx)(r,{},n)}))]})}n(74069);function di(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return pi(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pi(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pi(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function mi(){var e=(0,A.$G)().t,r=Et(),n=r.name,t=r.setName,i=r.validName,o=gt().setValid,a=(0,on.Z)(),l=a.finishCreatingLinkedFile,u=a.error,c=a.inFlight,s=di((0,m.useState)(""),2),f=s[0],d=s[1],p=(0,m.useCallback)((function(e){d(e.target.value)}),[]);(0,m.useEffect)((function(){if(f){var e=f.match(/^\s*https?:\/\/.+\/([^/]+\.(\w+))\s*$/);t(e?e[1]:"")}}),[t,f]),(0,m.useEffect)((function(){o(i&&!!f)}),[o,i,f]);return(0,g.jsxs)("form",{className:"form-controls",id:"create-file",noValidate:!0,onSubmit:function(e){e.preventDefault(),q.BZ("new-file-created",{method:"url",extension:n.split(".").length>1?n.split(".").pop():""}),l({name:n,provider:"url",data:{url:f.trim()}})},children:[(0,g.jsxs)(_t.Z,{controlId:"import-from-url",children:[(0,g.jsx)(kt.Z,{children:e("url_to_fetch_the_file_from")}),(0,g.jsx)(Ot.Z,{type:"url",placeholder:"https://example.com/my-file.png",required:!0,value:f,onChange:p})]}),(0,g.jsx)(Dt,{label:e("file_name_in_this_project"),placeholder:"my_file",error:u,inFlight:c}),u&&(0,g.jsx)(Lt.Z,{error:u})]})}n(49228);var Ai=n(87983),hi=n(15270),yi=n(25137);function vi(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return bi(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bi(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bi(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function gi(){var e=(0,A.$G)().t,r=(0,yr.Z)("ol-ExposedSettings"),n=r.hasLinkedProjectFileFeature,t=r.hasLinkedProjectOutputFileFeature,i=n&&t,o=Et(),a=o.name,l=o.setName,u=o.validName,c=gt().setValid,s=(0,on.Z)(),f=s.error,d=s.finishCreatingLinkedFile,p=s.inFlight,h=vi((0,m.useState)(),2),v=h[0],b=h[1],j=vi((0,m.useState)(),2),w=j[0],x=j[1],C=vi((0,m.useState)(),2),S=C[0],E=C[1],I=vi((0,m.useState)(!n),2),_=I[0],k=I[1],O=(0,m.useCallback)((function(e){var r=e.split("/").pop();r&&l(r)}),[l]);(0,m.useEffect)((function(){S&&("output.pdf"===S.path&&v.name?l("".concat(v.name,".pdf")):O(S.path))}),[v,S,l,O]),(0,m.useEffect)((function(){w&&O(w.path)}),[w,O]),(0,m.useEffect)((function(){var e=Boolean(_?S:w);c(u&&e)}),[c,u,_,w,S]);return(0,g.jsxs)("form",{className:"form-controls",id:"create-file",onSubmit:function(e){e.preventDefault(),q.BZ("new-file-created",{method:"project",extension:a.split(".").length>1?a.split(".").pop():""}),d(_?{name:a,provider:"project_output_file",data:{source_project_id:v._id,source_output_file_path:S.path,build_id:S.build,clsiServerId:S.clsiServerId}}:{name:a,provider:"project_file",data:{source_project_id:v._id,source_entity_path:w.path}})},children:[(0,g.jsx)(ji,{selectedProject:v,setSelectedProject:b}),_?(0,g.jsx)(wi,{selectedProjectId:null==v?void 0:v._id,selectedProjectOutputFile:S,setSelectedProjectOutputFile:E}):(0,g.jsx)(xi,{selectedProjectId:null==v?void 0:v._id,selectedProjectEntity:w,setSelectedProjectEntity:x}),i&&(0,g.jsxs)("div",{className:"toggle-file-type-button",children:["or ",(0,g.jsx)(y.Z,{bsStyle:"link",type:"button",onClick:function(){return k((function(e){return!e}))},children:(0,g.jsx)("span",{children:e(_?"select_from_source_files":"select_from_output_files")})})]}),(0,g.jsx)(Dt,{label:e("file_name_in_this_project"),classes:{formGroup:"form-controls row-spaced-small"},placeholder:"example.tex",error:f,inFlight:p}),f&&(0,g.jsx)(Lt.Z,{error:f})]})}function ji(e){var r=e.selectedProject,n=e.setSelectedProject,t=(0,A.$G)().t,i=(0,Y.d)()._id,o=(0,Ai.Z)(),a=o.data,l=o.error,u=o.loading,c=(0,m.useMemo)((function(){return a?a.filter((function(e){return e._id!==i})):null}),[a,i]);return l?(0,g.jsx)(Lt.Z,{error:l}):(0,g.jsxs)(_t.Z,{className:"form-controls",controlId:"project-select",children:[(0,g.jsx)(kt.Z,{children:t("select_a_project")}),u&&(0,g.jsxs)("span",{children:[" ",(0,g.jsx)(h.Z,{type:"spinner",spin:!0})]}),(0,g.jsxs)(Ot.Z,{componentClass:"select",disabled:!a,value:r?r._id:"",onChange:function(e){var r=e.target.value,t=a.find((function(e){return e._id===r}));n(t)},children:[(0,g.jsxs)("option",{disabled:!0,value:"",children:["- ",t("please_select_a_project")]}),c&&c.map((function(e){return(0,g.jsx)("option",{value:e._id,children:e.name},e._id)}))]}),c&&!c.length&&(0,g.jsx)("small",{children:t("no_other_projects_found")})]})}function wi(e){var r=e.selectedProjectId,n=e.selectedProjectOutputFile,t=e.setSelectedProjectOutputFile,i=(0,A.$G)().t,o=(0,yi.h)(r),a=o.data,l=o.error,u=o.loading;return l?(0,g.jsx)(Lt.Z,{error:l}):(0,g.jsxs)(_t.Z,{className:"form-controls row-spaced-small",controlId:"project-output-file-select",children:[(0,g.jsx)(kt.Z,{children:i("select_an_output_file")}),u&&(0,g.jsxs)("span",{children:[" ",(0,g.jsx)(h.Z,{type:"spinner",spin:!0})]}),(0,g.jsxs)(Ot.Z,{componentClass:"select",disabled:!a,value:(null==n?void 0:n.path)||"",onChange:function(e){var r=e.target.value,n=null==a?void 0:a.find((function(e){return e.path===r}));t(n)},children:[(0,g.jsxs)("option",{disabled:!0,value:"",children:["- ",i("please_select_an_output_file")]}),a&&a.map((function(e){return(0,g.jsx)("option",{value:e.path,children:e.path},e.path)}))]})]})}function xi(e){var r=e.selectedProjectId,n=e.selectedProjectEntity,t=e.setSelectedProjectEntity,i=(0,A.$G)().t,o=(0,hi.t)(r),a=o.data,l=o.error,u=o.loading;return l?(0,g.jsx)(Lt.Z,{error:l}):(0,g.jsxs)(_t.Z,{className:"form-controls row-spaced-small",controlId:"project-entity-select",children:[(0,g.jsx)(kt.Z,{children:i("select_a_file")}),u&&(0,g.jsxs)("span",{children:[" ",(0,g.jsx)(h.Z,{type:"spinner",spin:!0})]}),(0,g.jsxs)(Ot.Z,{componentClass:"select",disabled:!a,value:(null==n?void 0:n.path)||"",onChange:function(e){var r=e.target.value,n=a.find((function(e){return e.path===r}));t(n)},children:[(0,g.jsxs)("option",{disabled:!0,value:"",children:["- ",i("please_select_a_file")]}),a&&a.map((function(e){return(0,g.jsx)("option",{value:e.path,children:e.path.slice(1)},e.path)}))]})]})}var Ci=[{import:i,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/create-file-mode-mendeley"},{import:o,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/create-file-mode-zotero"}],Si=(0,m.lazy)((function(){return Promise.all([n.e(2385),n.e(1220),n.e(7583)]).then(n.bind(n,19319))}));function Ei(){var e=(0,A.$G)().t,r=(0,on.Z)().newFileCreateMode,n=(0,$.O)().fileCount,t=(0,yr.Z)("ol-ExposedSettings"),i=t.hasLinkedProjectFileFeature,o=t.hasLinkedProjectOutputFileFeature,a=t.hasLinkUrlFeature;return n&&"error"!==n.status?(0,g.jsx)("table",{children:(0,g.jsx)("tbody",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"modal-new-file--list",children:(0,g.jsxs)("ul",{className:"list-unstyled",children:[(0,g.jsx)(wt,{mode:"doc",icon:"file",label:e("new_file")}),(0,g.jsx)(wt,{mode:"upload",icon:"upload",label:e("upload")}),(i||o)&&(0,g.jsx)(wt,{mode:"project",icon:"folder-open",label:e("from_another_project")}),a&&(0,g.jsx)(wt,{mode:"url",icon:"globe",label:e("from_external_url")}),Ci.map((function(e){var r=e.import.CreateFileMode,n=e.path;return(0,g.jsx)(r,{},n)}))]})}),(0,g.jsxs)("td",{className:"modal-new-file--body modal-new-file--body-".concat(r),children:["doc"===r&&(0,g.jsx)(It,{initialName:"name.tex",children:(0,g.jsx)(fi,{})}),"url"===r&&(0,g.jsx)(It,{children:(0,g.jsx)(mi,{})}),"project"===r&&(0,g.jsx)(It,{children:(0,g.jsx)(gi,{})}),"upload"===r&&(0,g.jsx)(m.Suspense,{fallback:(0,g.jsx)(qr.w,{delay:500}),children:(0,g.jsx)(Si,{})}),Ci.map((function(e){var r=e.import.CreateFilePane,n=e.path;return(0,g.jsx)(r,{},n)}))]})]})})}):null}function Ii(){var e=gt().valid,r=(0,on.Z)(),n=r.newFileCreateMode,t=r.inFlight,i=r.cancel,o=(0,$.O)().fileCount;return(0,g.jsx)(_i,{valid:e,cancel:i,newFileCreateMode:n,inFlight:t,fileCount:o})}function _i(e){var r=e.valid,n=e.fileCount,t=e.inFlight,i=e.newFileCreateMode,o=e.cancel,a=(0,A.$G)().t;return(0,g.jsxs)(g.Fragment,{children:["warning"===n.status&&(0,g.jsxs)("div",{className:"modal-footer-left approaching-file-limit",children:[a("project_approaching_file_limit")," (",n.value,"/",n.limit,")"]}),"error"===n.status&&(0,g.jsx)(x.Z,{bsStyle:"warning",className:"at-file-limit",children:a("project_has_too_many_files")}),(0,g.jsx)(y.Z,{bsStyle:null,className:"btn-secondary",type:"button",disabled:t,onClick:o,children:a("cancel")}),"upload"!==i&&(0,g.jsx)(y.Z,{bsStyle:"primary",type:"submit",form:"create-file",disabled:t||!r,children:(0,g.jsx)("span",{children:t?"".concat(a("creating"),"…"):a("create")})})]})}function ki(){var e=(0,A.$G)().t,r=(0,on.Z)(),n=r.isCreatingFile,t=r.cancel;return n?(0,g.jsx)(jt,{children:(0,g.jsxs)(le.Z,{bsSize:"large",onHide:t,show:!0,children:[(0,g.jsx)(ae.Z.Header,{closeButton:!0,children:(0,g.jsx)(ae.Z.Title,{children:e("add_files")})}),(0,g.jsx)(ae.Z.Body,{className:"modal-new-file",children:(0,g.jsx)(Ei,{})}),(0,g.jsx)(ae.Z.Footer,{children:(0,g.jsx)(Ii,{})})]})}):null}_i.propTypes={cancel:G().func.isRequired,fileCount:G().shape({limit:G().number.isRequired,status:G().string.isRequired,value:G().number.isRequired}).isRequired,inFlight:G().bool.isRequired,newFileCreateMode:G().string,valid:G().bool.isRequired};var Oi=function(e){var r=e.children,n=(0,an.nF)(),t=n.setIsRootFolderSelected,i=n.selectedEntityIds,o=n.select,a=(0,m.useCallback)((function(){t(!0),i.size>1&&o([])}),[o,i.size,t]);return(0,g.jsx)("div",{className:"file-tree-inner",onClick:a,"data-testid":"file-tree-inner",children:r})},Ti=n(22396),Fi=n(22110);function Ri(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Bi(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bi(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bi(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Zi=m.memo((function(e){var r=e.refProviders,n=e.reindexReferences,t=e.setRefProviderEnabled,i=e.setStartedFreeTrial,o=e.onSelect,a=e.onInit,l=e.onDelete,u=e.isConnected,c=Ri((0,m.useState)(null),2),s=c[0],f=c[1],d=(0,Y.d)()._id,p=(0,$.O)().fileTreeData,A=Boolean(d&&p);return(0,m.useEffect)((function(){if(s){var e=function(e){if(e.dataTransfer){var r=e.target.dataset;if(r.fileId&&r.fileType&&"folder"!==r.fileType){e.dataTransfer.setData("application/x-overleaf-file-id",r.fileId);var n=(0,Fi.Te)(p,r.fileId);n&&e.dataTransfer.setData("application/x-overleaf-file-path",n)}}};return s.addEventListener("dragstart",e),function(){s.removeEventListener("dragstart",e)}}}),[s,p]),(0,m.useEffect)((function(){A&&a()}),[A,a]),A?(0,g.jsx)("div",{className:"file-tree","data-testid":"file-tree",ref:f,children:s&&(0,g.jsxs)(Cn,{refProviders:r,setRefProviderEnabled:t,setStartedFreeTrial:i,reindexReferences:n,onSelect:o,fileTreeContainer:s,children:[u?null:(0,g.jsx)("div",{className:"disconnected-overlay"}),(0,g.jsx)(it,{}),(0,g.jsx)(At,{}),(0,g.jsx)(Oi,{children:(0,g.jsx)(Pi,{onDelete:l})}),(0,g.jsx)(ot,{}),(0,g.jsx)(ki,{}),(0,g.jsx)(ft,{}),(0,g.jsx)(dt,{})]})}):null}));function Pi(e){!function(e){var r=(0,W.SE)(),n=(0,$.O)(),t=n.dispatchRename,i=n.dispatchDelete,o=n.dispatchMove,a=n.dispatchCreateFolder,l=n.dispatchCreateDoc,u=n.dispatchCreateFile,c=n.fileTreeData,s=(0,an.nF)(),f=s.selectedEntityIds,d=s.selectedEntityParentIds,p=s.select,A=s.unselect,h=(0,re.IM)().socket,y=(0,m.useCallback)((function(e,n,t){t&&(null==r?void 0:r.id)===t&&window.expectingLinkedFileRefreshedSocketFor===n&&(p(e),window.expectingLinkedFileRefreshedSocketFor=null)}),[r,p]);(0,m.useEffect)((function(){function e(e,r){t(e,r)}return h&&h.on("reciveEntityRename",e),function(){h&&h.removeListener("reciveEntityRename",e)}}),[h,t]),(0,m.useEffect)((function(){function r(r){var n=(0,mn.Z7)(c,r);if(A(r),d.has(r))for(var t of f)(0,mn.we)(c,t).path.includes(r)&&A(t);i(r),e&&e(n)}return h&&h.on("removeEntity",r),function(){h&&h.removeListener("removeEntity",r)}}),[h,A,i,c,f,d,e]),(0,m.useEffect)((function(){function e(e,r){o(e,r)}return h&&h.on("reciveEntityMove",e),function(){h&&h.removeListener("reciveEntityMove",e)}}),[h,o]),(0,m.useEffect)((function(){function e(e,r){a(e,r)}return h&&h.on("reciveNewFolder",e),function(){h&&h.removeListener("reciveNewFolder",e)}}),[h,a]),(0,m.useEffect)((function(){function e(e,r,n){l(e,r)}return h&&h.on("reciveNewDoc",e),function(){h&&h.removeListener("reciveNewDoc",e)}}),[h,l]),(0,m.useEffect)((function(){function e(e,r,n,t,i){u(e,r),t&&y(r._id,r.name,i)}return h&&h.on("reciveNewFile",e),function(){h&&h.removeListener("reciveNewFile",e)}}),[h,u,y])}(e.onDelete);var r=(0,$.O)().fileTreeData,n=jn(r._id),t=n.isOver,i=n.dropRef,o=(0,Ti.f)((function(e){return{isDragging:e.isDragging(),item:e.getItem(),clientOffset:e.getClientOffset()}}));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(_n,{isOver:t,...o}),(0,g.jsx)(rt,{folders:r.folders,docs:r.docs,files:r.fileRefs,classes:{root:P()("file-tree-list",{"file-tree-dragging":o.isDragging})},dropRef:i,dataTestId:"file-tree-list-root"})]})}var Mi=(0,j.Z)(Zi,ht),Di=n(7242);function Ni(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Li(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Li(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Qi=(0,m.memo)((function(){var e=(0,W.SE)(),r=(0,rn.a4)().indexAllReferences,n=(0,nn.I)().setStartedFreeTrial,t=(0,I.Km)(),i=t.isConnected,o=t.connectionState,a=(0,Di.z)(),l=a.handleFileTreeInit,u=a.handleFileTreeSelect,c=a.handleFileTreeDelete,s=Ni((0,m.useState)((function(){return e.refProviders||{}})),2),f=s[0],d=s[1];var p=(0,m.useCallback)((function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d((function(n){return{...n,[e]:r}}))}),[]);return(0,g.jsx)(Mi,{refProviders:f,reindexReferences:function(){r(!0)},setRefProviderEnabled:p,setStartedFreeTrial:n,isConnected:i||null!==o.reconnectAt,onInit:l,onSelect:u,onDelete:c})})),Ui=(n(27072),n(67694),(0,m.memo)((function(e){var r=e.expanded,n=e.setExpanded,t=(0,A.$G)().t;return(0,g.jsx)("button",{className:"outline-item-expand-collapse-btn",onClick:function(){return n((function(e){return!e}))},"aria-label":t(r?"collapse":"expand"),children:(0,g.jsx)(h.Z,{type:r?"angle-down":"angle-right",className:"outline-caret-icon"})})})));function Hi(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return zi(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zi(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}Ui.displayName="OutlineItemToggleButton";var qi=(0,m.memo)((function(e){var r=e.outlineItem,n=e.jumpToLine,t=e.highlightedLine,i=e.matchesHighlightedLine,o=e.containsHighlightedLine,a=Hi((0,m.useState)(!0),2),l=a[0],u=a[1],c=(0,m.useRef)(),s=(0,m.useRef)(!1),f=P()("outline-item",{"outline-item-no-children":!r.children}),d=i||!l&&o,p=P()("outline-item-link",{"outline-item-link-highlight":d});(0,m.useEffect)((function(){var e=s.current;s.current=d,!e&&d&&(0,kn.Z)(c.current,{scrollMode:"if-needed",block:"center"})}),[d,c,s]);var A=r.children?l:void 0;return(0,g.jsxs)("li",{className:f,"aria-expanded":A,role:"treeitem","aria-current":d,"aria-label":r.title,children:[(0,g.jsxs)("div",{className:"outline-item-row",children:[!!r.children&&(0,g.jsx)(Ui,{expanded:l,setExpanded:u}),(0,g.jsx)("button",{className:p,onClick:function(e){var t=2===e.detail;n(r.line,t)},ref:c,children:r.title})]}),l&&r.children?(0,g.jsx)(Wi,{outline:r.children,jumpToLine:n,isRoot:!1,highlightedLine:o?t:null,containsHighlightedLine:o}):null]})}));qi.propTypes={outlineItem:G().exact({line:G().number.isRequired,title:G().string.isRequired,level:G().number,children:G().array,from:G().number,to:G().number}).isRequired,jumpToLine:G().func.isRequired,highlightedLine:G().number,matchesHighlightedLine:G().bool,containsHighlightedLine:G().bool};var Ki=qi;function Gi(e){return(e||[]).map((function(e){return Gi(e.children).concat(e.line)})).flat()}var Vi=(0,m.memo)((function(e){var r=e.outline,n=e.jumpToLine,t=e.isRoot,i=e.highlightedLine,o=e.containsHighlightedLine,a=P()("outline-item-list",{"outline-item-list-root":t});return(0,g.jsx)("ul",{className:a,role:t?"tree":"group",children:r.map((function(e,r){var t=o&&i===e.line,a=o&&Gi(e.children).includes(i);return(0,g.jsx)(Ki,{outlineItem:e,jumpToLine:n,highlightedLine:t||a?i:null,matchesHighlightedLine:t,containsHighlightedLine:a},"".concat(e.level,"-").concat(r))}))})}));Vi.propTypes={outline:G().array.isRequired,jumpToLine:G().func.isRequired,isRoot:G().bool,highlightedLine:G().number,containsHighlightedLine:G().bool};var Wi=Vi;function Ji(e){var r=e.outline,n=e.jumpToLine,t=e.highlightedLine,i=(0,A.$G)().t;return(0,g.jsx)("div",{children:r.length?(0,g.jsx)(Wi,{outline:r,jumpToLine:n,isRoot:!0,highlightedLine:t,containsHighlightedLine:!0}):(0,g.jsxs)("div",{className:"outline-body-no-elements",children:[i("we_cant_find_any_sections_or_subsections_in_this_file"),"."," ",(0,g.jsx)("a",{href:"/learn/how-to/Using_the_File_Outline_feature",className:"outline-body-link",target:"_blank",rel:"noopener noreferrer",children:i("find_out_more_about_the_file_outline")})]})})}Ji.propTypes={outline:G().array.isRequired,jumpToLine:G().func.isRequired,highlightedLine:G().number};var Xi=Ji,Yi=(0,m.memo)((function(e){var r=e.isTexFile,n=e.toggleExpanded,t=e.expanded,i=e.isOpen,o=e.isPartial,a=(0,A.$G)().t;return(0,g.jsxs)("button",{className:"outline-header-expand-collapse-btn",disabled:!r,onClick:n,"aria-label":a(t?"hide_outline":"show_outline"),children:[(0,g.jsx)(h.Z,{type:i?"angle-down":"angle-right",className:"outline-caret-icon"}),(0,g.jsx)("h4",{className:"outline-header-name",children:a("file_outline")}),o&&(0,g.jsx)(ke.Z,{id:"partial-outline",description:a("partial_outline_warning"),overlayProps:{placement:"top"},children:(0,g.jsx)("span",{role:"status",children:(0,g.jsx)(h.Z,{type:"exclamation-triangle","aria-label":a("partial_outline_warning")})})})]})}));Yi.displayName="OutlineToggleButton";var $i=m.memo((function(e){var r=e.isTexFile,n=e.outline,t=e.jumpToLine,i=e.onToggle,o=e.highlightedLine,a=e.isPartial,l=void 0!==a&&a,u=e.expanded,c=e.toggleExpanded,s=Boolean(r&&u);(0,m.useEffect)((function(){i(s)}),[s,i]);var f=P()("outline-pane",{"outline-pane-disabled":!r});return(0,g.jsxs)("div",{className:f,children:[(0,g.jsx)("header",{className:"outline-header",children:(0,g.jsx)(Yi,{toggleExpanded:c,expanded:u,isOpen:s,isPartial:l,isTexFile:r})}),s&&(0,g.jsx)("div",{className:"outline-body",children:(0,g.jsx)(Xi,{outline:n,jumpToLine:t,highlightedLine:o})})]})})),eo=(0,j.Z)($i),ro=n(19816),no=n(85209),to=n(44466);function io(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return oo(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oo(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oo(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var ao=(0,m.memo)((function(){var e=(0,ro.k)(),r=e.flatOutline,n=e.highlightedLine,t=e.canShowOutline,i=e.jumpToLine,o=e.outlineExpanded,a=e.toggleOutlineExpanded,l=(0,to.Z)("outline-toggled"),u=io((0,m.useState)((function(){return{items:[],partial:!1}})),2),c=u[0],s=u[1],f=(0,m.useRef)(void 0);return(0,m.useEffect)((function(){var e=f.current;f.current=r,r?lo(null==e?void 0:e.items,r.items)&&(_.c.log("Rebuilding changed outline"),s({items:(0,no.zz)(r.items),partial:r.partial})):s({items:[],partial:!1})}),[r]),(0,g.jsx)("div",{className:"outline-container",children:(0,g.jsx)(eo,{outline:c.items,onToggle:l,isTexFile:t,jumpToLine:i,highlightedLine:n,isPartial:c.partial,expanded:o,toggleExpanded:a})})}));ao.displayName="OutlineContainer";var lo=function(e,r){if(!e)return!0;if(e.length!==r.length)return!0;for(var n=0;n<e.length;n++){var t=e[n],i=r[n];if(t.level!==i.level||t.line!==i.line||t.title!==i.title)return!0}return!1};function uo(e,r){(0,m.useEffect)((function(){var n=r.current;n&&(e?n.expand():n.collapse())}),[e,r])}function co(){var e=(0,U.l5)().view,r=function(){var e=(0,ro.k)(),r=e.canShowOutline,n=e.outlineExpanded,t=(0,m.useRef)(null),i=r&&n;return uo(i,t),{outlineEnabled:i,outlinePanelRef:t}}(),n=r.outlineEnabled,t=r.outlinePanelRef;return(0,g.jsx)("aside",{className:P()("ide-react-editor-sidebar",{hidden:"history"===e}),children:(0,g.jsxs)(B.eh,{autoSaveId:"ide-editor-sidebar-layout",direction:"vertical",children:[(0,g.jsx)(B.s_,{defaultSize:50,minSize:25,className:"ide-react-file-tree-panel",id:"panel-file-tree",order:1,children:(0,g.jsx)(Qi,{})}),(0,g.jsx)(en,{disabled:!n}),(0,g.jsx)(B.s_,{defaultSize:50,maxSize:75,id:"panel-outline",order:2,collapsible:!0,ref:t,style:{minHeight:32},children:(0,g.jsx)(ao,{})})]})})}function so(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return fo(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fo(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fo(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function po(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return mo(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mo(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mo(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function Ao(){var e=(0,A.$G)().t;return(0,g.jsx)("div",{className:"no-file-selection",children:(0,g.jsx)("div",{className:"no-file-selection-message",children:(0,g.jsx)("h3",{children:e("no_selection_select_file")})})})}var ho=function(e,r){var n;return(null===(n=e.linkedFileData)||void 0===n?void 0:n.provider)===r};function yo(e){var r=e.file,n=(0,A.$G)().t,t=(0,W.SE)().id;return ho(r,"mendeley")||ho(r,"zotero")?r.linkedFileData.importer_id===t?null:(0,g.jsx)("div",{className:"row",children:(0,g.jsx)("div",{className:"alert",children:n("only_importer_can_refresh",{provider:(0,Lr.capitalize)(r.linkedFileData.provider)})})}):null}var vo=n(7585),bo=function(e){return(0,g.jsx)(h.Z,{type:"external-link-square",modifier:"rotate-180",className:"linked-file-icon",...e})};function go(e){var r=e.file,n=(0,A.$G)().t;return"mendeley"===r.linkedFileData.provider?(0,g.jsx)("div",{children:(0,g.jsxs)("p",{children:[(0,g.jsx)(bo,{fw:!0}),n("imported_from_mendeley_at_date",{formattedDate:(0,vo.mr)(r.created),relativeDate:(0,vo.K8)(r.created)})]})}):"zotero"===r.linkedFileData.provider?(0,g.jsx)("div",{children:(0,g.jsxs)("p",{children:[(0,g.jsx)(bo,{fw:!0}),n("imported_from_zotero_at_date",{formattedDate:(0,vo.mr)(r.created),relativeDate:(0,vo.K8)(r.created)})]})}):null}go.propTypes={file:G().shape({created:G().string,linkedFileData:G().shape({provider:G().string})})};var jo=function(e,r){var n;return(null===(n=e.linkedFileData)||void 0===n?void 0:n.provider)===r};function wo(e){var r,n=e.file,t=e.refreshing,i=e.refreshFile,o=(0,A.$G)().t,a=(0,W.SE)().id,l=ho(n,"mendeley")||ho(n,"zotero");l&&(r=n.linkedFileData.importer_id===a);var u=!l||r;return(0,g.jsxs)("button",{className:P()("btn",{"btn-primary":u,"btn-secondary":!u}),onClick:function(){return i(l)},disabled:t||!u,children:[(0,g.jsx)(h.Z,{type:"refresh",spin:t,fw:!0}),(0,g.jsx)("span",{children:t?"".concat(o("refreshing"),"…"):o("refresh")})]})}function xo(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Co(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Co(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Co(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var So=[{import:c,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-refresh-button"}];function Eo(e){var r=e.setRefreshError,n=e.file,t=(0,Y.d)()._id,i=(0,Tt.Z)().signal,o=xo((0,m.useState)(!1),2),a=o[0],l=o[1],u=(0,m.useCallback)((function(e){l(!0),window.expectingLinkedFileRefreshedSocketFor=n.name;var o={shouldReindexReferences:e||/\.bib$/.test(n.name)};(0,ee.ty)("/project/".concat(t,"/linked_file/").concat(n.id,"/refresh"),{signal:i,body:o}).then((function(){l(!1)})).catch((function(e){var n;l(!1),r((null===(n=e.data)||void 0===n?void 0:n.message)||e.message)}))}),[n,t,i,r]);return So.length>0?So.map((function(e){var r=e.import.TPRFileViewRefreshButton,t=e.path;return(0,g.jsx)(r,{file:n,refreshFile:u,refreshing:a},t)}))[0]:(0,g.jsx)(Io,{refreshFile:u,refreshing:a})}function Io(e){var r=e.refreshFile,n=e.refreshing,t=(0,A.$G)().t;return(0,g.jsxs)("button",{className:"btn btn-primary",onClick:function(){return r(null)},disabled:n,children:[(0,g.jsx)(h.Z,{type:"refresh",spin:n,fw:!0}),(0,g.jsx)("span",{children:n?"".concat(t("refreshing"),"…"):t("refresh")})]})}function TPRFileViewRefreshError(e){var r=e.file,n=e.refreshError,t=ho(r,"mendeley")||ho(r,"zotero");return(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("br",{}),t?(0,g.jsx)(FileViewMendeleyOrZoteroRefreshError,{file:r}):(0,g.jsx)(FileViewDefaultRefreshError,{refreshError:n})]})}function FileViewMendeleyOrZoteroRefreshError(e){var r=e.file,n=(0,A.$G)().t;return(0,g.jsxs)("div",{className:"alert alert-danger col-md-10 col-md-offset-1",style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,g.jsxs)("div",{children:[n("something_not_right"),"! ",(0,g.jsx)("span",{children:r.linkedFileData&&n("try_relinking_provider",{provider:(0,Lr.capitalize)(r.linkedFileData.provider)})})]}),(0,g.jsx)("div",{className:"text-center",children:(0,g.jsx)("button",{className:"btn btn-danger",children:(0,g.jsx)("a",{href:"/user/settings",target:"_blank",style:{fontWeight:"bold",textDecoration:"none"},children:n("go_to_settings")})})})]})}function FileViewDefaultRefreshError(e){var r=e.refreshError,n=(0,A.$G)().t;return(0,g.jsxs)("div",{className:"alert alert-danger col-md-6 col-md-offset-3",children:[n("access_denied"),": ",r]})}var _o=[{import:s,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-refresh-error"}];function FileViewRefreshError(e){var r=e.file,n=e.refreshError,t=(0,A.$G)().t;return _o.length>0?_o.map((function(e){var t=e.import.TPRFileViewRefreshError,i=e.path;return(0,g.jsx)(t,{file:r,refreshError:n},i)}))[0]:(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("br",{}),(0,g.jsxs)("div",{className:"alert alert-danger col-md-6 col-md-offset-3",children:[t("access_denied"),": ",n]})]})}function ko(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Oo(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oo(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var To=[{import:u,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-info"}],Fo=[{import:l,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-not-original-importer"}],Ro=60,Bo=35,Zo="...",Po=Ro-Bo-Zo.length;function Mo(e){if(e){if(e.length>Ro){var r=e.slice(0,Bo),n=e.slice(e.length-Po);return r+Zo+n}return e}}function Do(e){var r,n=e.file,t=(0,Y.d)()._id,i=(0,V._i)().permissionsLevel,o=(0,A.$G)().t,a=ko((0,m.useState)(null),2),l=a[0],u=a[1];return n.linkedFileData&&(jo(n,"url")?r=(0,g.jsx)("div",{children:(0,g.jsx)(No,{file:n})}):jo(n,"project_file")?r=(0,g.jsx)("div",{children:(0,g.jsx)(Lo,{file:n})}):jo(n,"project_output_file")&&(r=(0,g.jsx)("div",{children:(0,g.jsx)(Qo,{file:n})}))),(0,g.jsxs)("div",{children:[n.linkedFileData&&r,n.linkedFileData&&To.map((function(e){var r=e.import.TPRFileViewInfo,t=e.path;return(0,g.jsx)(r,{file:n},t)})),n.linkedFileData&&"readOnly"!==i&&(0,g.jsx)(Eo,{file:n,setRefreshError:u})," ",(0,g.jsxs)("a",{download:!0,href:"/project/".concat(t,"/file/").concat(n.id),className:"btn btn-secondary-info btn-secondary",children:[(0,g.jsx)(h.Z,{type:"download",fw:!0})," ",(0,g.jsx)("span",{children:o("download")})]}),n.linkedFileData&&Fo.map((function(e){var r=e.import.TPRFileViewNotOriginalImporter,t=e.path;return(0,g.jsx)(r,{file:n},t)}))[0],l&&(0,g.jsx)(FileViewRefreshError,{file:n,refreshError:l})]})}function No(e){var r=e.file;return(0,g.jsxs)("p",{children:[(0,g.jsx)(bo,{})," ",(0,g.jsx)(A.cC,{i18nKey:"imported_from_external_provider_at_date",components:[(0,g.jsx)("a",{href:r.linkedFileData.url})],values:{shortenedUrl:Mo(r.linkedFileData.url),formattedDate:(0,vo.mr)(r.created),relativeDate:(0,vo.K8)(r.created)},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}})]})}function Lo(e){var r=e.file;return(0,g.jsxs)("p",{children:[(0,g.jsx)(bo,{}),(0,g.jsx)(A.cC,{i18nKey:"imported_from_another_project_at_date",components:r.linkedFileData.v1_source_doc_id?[(0,g.jsx)("span",{})]:[(0,g.jsx)("a",{href:"/project/".concat(r.linkedFileData.source_project_id),target:"_blank",rel:"noopener"})],values:{sourceEntityPath:r.linkedFileData.source_entity_path.slice(1),formattedDate:(0,vo.mr)(r.created),relativeDate:(0,vo.K8)(r.created)},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}})]})}function Qo(e){var r=e.file;return(0,g.jsxs)("p",{children:[(0,g.jsx)(bo,{})," ",(0,g.jsx)(A.cC,{i18nKey:"imported_from_the_output_of_another_project_at_date",components:r.linkedFileData.v1_source_doc_id?[(0,g.jsx)("span",{})]:[(0,g.jsx)("a",{href:"/project/".concat(r.linkedFileData.source_project_id),target:"_blank",rel:"noopener"})],values:{sourceOutputFilePath:r.linkedFileData.source_output_file_path,formattedDate:(0,vo.mr)(r.created),relativeDate:(0,vo.K8)(r.created)},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}})]})}function Uo(e){var r=e.fileName,n=e.fileId,t=e.onLoad,i=e.onError,o=(0,Y.d)()._id;return(0,g.jsx)("img",{src:"/project/".concat(o,"/file/").concat(n),onLoad:t,onError:i,alt:r})}var Ho=n(97502),zo=function(e){var r=e.fileId,t=e.onLoad,i=e.onError,o=(0,X.Z)(),a=(0,Ho.Yt)(),l=a.previewByPath,u=a.pathInFolder,c=(0,m.useCallback)((async function(e){if(e){var a=(await n.e(7960).then(n.bind(n,17960)).then((function(e){return e.default}))).PDFJS;if(!o.current)return void i();var c=u(r),s=c?l(c):null;if(!s)return void i();var f=await a.getDocument({url:s.url,isEvalSupported:!1}).promise;if(!o.current)return void i();e.textContent="";for(var d=window.devicePixelRatio||1,p=1;p<=f.numPages;p++){var m=await f.getPage(p),A=m.getViewport({scale:d}),h=document.createElement("canvas");h.classList.add("pdf-page"),h.width=A.width,h.height=A.height,h.style.width="".concat(A.width/d,"px"),h.style.height="".concat(A.height/d,"px"),e.append(h),m.render({canvasContext:h.getContext("2d"),viewport:A})}return t(),function(){f.cleanup().catch(_.c.error),f.destroy()}}}),[o,u,r,l,t,i]);return(0,g.jsx)("div",{className:"file-view-pdf",ref:c})};n(85940);function qo(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Ko(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ko(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ko(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Go=2097152;function Vo(e){var r=e.file,n=e.onLoad,t=e.onError,i=(0,Y.d)()._id,o=qo((0,m.useState)(""),2),a=o[0],l=o[1],u=qo((0,m.useState)(!1),2),c=u[0],s=u[1],f=qo((0,m.useState)(!1),2),d=f[0],p=f[1],A=(0,Tt.Z)(),h=(0,Tt.Z)();return(0,m.useEffect)((function(){if(!d){var e,o="/project/".concat(i,"/file/").concat(r.id),a=setTimeout((function(){return A.abort()}),1e4);fetch(o,{method:"HEAD",signal:A.signal}).then((function(e){if(!e.ok)throw new Error("HTTP Error Code: "+e.status);return e.headers.get("Content-Length")})).then((function(r){var t=!1,i=null;return r&&Number(r)>Go&&(t=!0,i=Go),null!=i&&(o+="?range=0-".concat(i)),e=window.setTimeout((function(){return h.abort()}),6e4),fetch(o,{signal:h.signal}).then((function(e){return e.text().then((function(e){t&&(e=e.replace(/\n.*$/,"")),l(e),n(),s(t)}))}))})).catch((function(e){_.c.error("Error fetching file contents",e),t()})).finally((function(){p(!1),clearTimeout(a),clearTimeout(e)}))}}),[i,r.id,t,n,d,A,h]),(0,g.jsx)("div",{children:a&&(0,g.jsx)("div",{className:"text-preview",children:(0,g.jsxs)("div",{className:"scroll-container",children:[(0,g.jsx)("p",{children:a}),c&&(0,g.jsx)("p",{children:"..."})]})})})}function Wo(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Jo(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jo(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Xo=["png","jpg","jpeg","gif"];function Yo(e){var r=e.file,n=Wo((0,m.useState)(!0),2),t=n[0],i=n[1],o=Wo((0,m.useState)(!1),2),a=o[0],l=o[1],u=(0,A.$G)().t,c=(0,yr.Z)("ol-ExposedSettings"),s=c.textExtensions,f=c.editableFilenames,d=r.name.split(".").pop().toLowerCase(),p=s.includes(d)||f.includes(r.name.toLowerCase()),h=Xo.includes(d),y="pdf"===d,v=!p&&!h&&!y,b=(0,m.useCallback)((function(){i(!1)}),[]),j=(0,m.useCallback)((function(){a||(i(!1),l(!0))}),[a]),w=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Do,{file:r}),h&&(0,g.jsx)(Uo,{fileName:r.name,fileId:r.id,onLoad:b,onError:j}),p&&(0,g.jsx)(Vo,{file:r,onLoad:b,onError:j}),y&&(0,g.jsx)(zo,{fileId:r.id,onLoad:b,onError:j})]});return(0,g.jsxs)("div",{className:"file-view full-size",children:[!a&&w,!v&&t&&(0,g.jsx)($o,{}),(v||a)&&(0,g.jsx)("p",{className:"no-preview",children:u("no_preview_available")})]})}function $o(){var e=(0,A.$G)().t;return(0,g.jsx)("div",{className:"loading-panel loading-panel-file-view",children:(0,g.jsxs)("span",{children:[(0,g.jsx)(h.Z,{type:"refresh",spin:!0}),"  ",e("loading"),"…"]})})}function ea(e){var r=e.selectedEntityCount,n=(0,A.$G)().t;return(0,g.jsx)("div",{className:"multi-selection-ongoing",children:(0,g.jsx)("div",{className:"multi-selection-message",children:(0,g.jsx)("h4",{children:"".concat(r," ").concat(n("files_selected"))})})})}Yo.propTypes={file:G().shape({id:G().string,name:G().string}).isRequired};var ra=n(14185),na=n(31638),ta=n(32755);var ia=function(e){var r=e.width,n=void 0===r?"40":r,t=e.height,i=void 0===t?"40":t,o=e.background,a=void 0===o?"none":o;return(0,g.jsxs)("svg",{width:n,height:i,viewBox:"0 0 40 40",fill:a,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{verticalAlign:"middle"},children:[(0,g.jsx)("rect",{x:"1.6665",y:"1.66666",width:"36.6667",height:"36.6667",fill:"url(#writefull-pattern)"}),(0,g.jsxs)("defs",{children:[(0,g.jsx)("pattern",{id:"writefull-pattern",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,g.jsx)("use",{xlinkHref:"#writefull-image",transform:"scale(0.00195312)"})}),(0,g.jsx)("image",{id:"writefull-image",width:"512",height:"512",xlinkHref:"data:image/png;base64,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c+bq7ZQuAgAACIC6hwMH57Iyz6I4ZUE7ChcBAAAEQP0vEupfy8pEABAAAEAAEAAEgMJFAAAAAUAAEACCAAAAAoAAIAAEAQAABAABQAAIAgAACAACgAAQBAAAEAAEAAEgCAAAIAAIAAJAEAAABIAgAAgAQQAAEACCACAABAEAQAAIAoAAEAQAAAEgCAACgACwOgEQAIIAIAAIAAAgAAQBQAAQAABAAAgCgAAgAACAABAEAAFAAAAAASAIAAKAAAAAAoAAIAAIAAIAAAgAAoAAIAAIAAAgAAgAAkAQAABAABAABIAgAACAACAACABBAAAAAUAAEACCAAAAAoAAIAAEAQAABAABQAAIAgCAABAEAAEgCAAAAkAQAASAIAAACABBABAAggAAIAAEAUAAEAAEAAABIAgAAoAAAAACQBAABAABAAAEgCAACAACAAAIAEEAEAAEAAAQAIIAIAAIAAAgAAQBQAAQAABAABAAQAAQAABAABAABIAgAACAACAACABBAAAAAUAAEACCAAAAAoAAIAAEAQAABAABQAAIAgAACAACgAAQBAAAAaB0EQAEgCAAAAgAQQAQAIIAACAABAFAAAgCAIAAEAQAASAIAAACQBAABAABAAAEgCAACAACAAAIAEEAEAAEAAAQAIIAIAAIAAAgAAQBQAAQAABAAAgCgAAgAACAACAAgAAgAACAACAACABBAAAAAUAAEACCAAAAAoAAIAAEAQAABAABQAAIAgAACAACgAAQBAAAEAAEAAEgCAAAAoAAIAAIAEEAABAAggAgAAQBAEAACAKAABAEAAABIAgAAkAQAAAEgCAACAACAAAIAEEAEAAEAAAQAIIAIAAIAAAgAAQBQAAQAABAAAgCgAAgAACAABAEAAFAAAAAAUAAAAFAAAAAAUAAEABKFwEAAAQAAUAACAIAAAgAAoAAEAQAABAABAABIAgAACAACAACQBAAAEAAEAAEgCAAAIAAIAAIAEEAABAAggAgAAQBAEAACAKAABAEAAABIAgAAkAQAAAEgCAACAACAGp97nYsnGDLHFtzaNviuVwNBIAgAAgAQQA0QEnqnDWurEivK/MJqeF/v0tZ8BlXBQEgCAACQBAAlWIwhLUtS5te0Fj8ZyfrCW9JalShwWC4nKuEABAEAAFAABAAFbFv+5w77BnPun5U/melOmNcTc43b97J1UIA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"})]})]})},oa=function(e){var r=e.onDismiss,n=(0,A.$G)().t;return(0,g.jsx)(ii.Z,{ariaLive:"polite",className:"editor-notification ol-overlay hidden-xs-container",content:(0,g.jsx)("div",{children:(0,g.jsx)("p",{children:n("writefull_disable_prompt_body")})}),customIcon:(0,g.jsx)("div",{className:"writefull-logo-bg",children:(0,g.jsx)(ia,{width:"50",height:"50",background:"#fff"})}),isDismissible:!0,onDismiss:r,title:n("writefull_prompt_title"),type:"offer"})};function aa(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return la(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return la(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function la(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var ua="writefull-oauth-promotion",ca={location:"notification",name:ua};function sa(){var e=aa((0,m.useState)(!1),2),r=e[0],n=e[1],t=aa((0,m.useState)(!1),2),i=t[0],o=t[1],a=(0,W.SE)().writefull,l=(0,V._i)(),u=l.inactiveTutorials,c=l.setWritefullAdClicked,s=(0,A.$G)().t,f=(0,ti.Z)(ua,ca),d=f.completeTutorial,p=f.dismissTutorial,h=f.maybeLater,v=f.showPopup,b=f.tryShowingPopup,j=f.clearPopup,w=(0,qt.ye)(ua),x=u.includes(ua),C=(0,m.useMemo)((function(){var e,r="extension"===(null===(e=window.writefull)||void 0===e?void 0:e.type);return w&&!r&&!(null!=a&&a.enabled)&&!x}),[a,x,w]);(0,m.useEffect)((function(){C?b():j()}),[C,b,j]);var S=(0,m.useCallback)((async function(e){try{await(0,ee.BS)("/writefull/enabled",{body:{enabled:!0}})}catch(e){_.c.error(e)}n(!0),await d({event:"promo-click",action:"complete",button:e}),c(e)}),[d,c]),E=(0,m.useCallback)((function(){n(!1)}),[n]),I=s("try_writefull"),k=(0,g.jsxs)("div",{children:[(0,g.jsx)(y.Z,{bsStyle:null,className:"btn-secondary","data-testid":"try-writefull-button",onClick:function(){return S("try-it")},children:I}),(0,g.jsx)(y.Z,{className:"btn-bg-ghost",bsStyle:null,onClick:h,"data-cy":"maybe-later",children:s("maybe_later")})]}),O=(0,g.jsx)(ii.Z,{action:k,ariaLive:"polite",className:"editor-notification ol-overlay hidden-xs-container",content:(0,g.jsx)("div",{children:(0,g.jsx)("p",{children:s("writefull_prompt_body")})}),customIcon:(0,g.jsx)("div",{className:"writefull-logo-bg",children:(0,g.jsx)(ia,{width:"50",height:"50",background:"#fff"})}),disclaimer:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(A.cC,{i18nKey:"writefull_alternate_login_prompt",components:[(0,g.jsx)(y.Z,{className:"btn-inline-link",onClick:function(){return S("log-in")},bsStyle:null},"log-in"),(0,g.jsx)("a",{href:"https://www.writefull.com/terms",className:"wf-promotion-link",target:"_blank",rel:"noopener"},"terms-of-service"),(0,g.jsx)("a",{href:"https://www.writefull.com/privacy",className:"wf-promotion-link",target:"_blank",rel:"noopener"},"privacy-policy")]}),(0,g.jsxs)("details",{onToggle:function(e){o(e.target.open)},children:[(0,g.jsxs)("summary",{className:"writefull-disclosure-summary my-1",children:[s("writefull_prompt_terms_title"),(0,g.jsx)(Ar.Z,{type:i?"expand_more":"keyboard_arrow_right"})]}),(0,g.jsx)(A.cC,{i18nKey:"writefull_prompt_terms",components:[(0,g.jsx)("b",{},"command"),(0,g.jsx)("p",{},"spacing"),(0,g.jsx)("a",{href:"/learn/how-to/Writefull_integration",className:"wf-promotion-link",target:"_blank",rel:"noopener"},"learn-more")]})]})]}),isActionBelowContent:!0,isDismissible:!0,onDismiss:p,title:s("writefull_prompt_title"),type:"offer"});return v||r?x?(0,g.jsx)(oa,{onDismiss:E}):O:null}var fa=sa,da=function(e){var r=e.onDismiss,n=e.handleLearnMore,t=e.handleFreeTrialClick,i=(0,A.$G)().t,o=(0,g.jsxs)("div",{children:[(0,g.jsx)(Ut.Z,{source:"open-bib-file-upgrade-prompt",buttonProps:{variant:"secondary"},handleClick:t,children:i("upgrade")}),(0,g.jsx)(y.Z,{bsStyle:null,className:"btn-bg-ghost",href:"/learn/how-to/How_to_link_your_Overleaf_account_to_Mendeley_and_Zotero",target:"blank",onClick:n,children:i("learn_more")})]}),a=(0,g.jsx)("div",{children:i("easily_import_and_sync_your_references")}),l=(0,g.jsx)("img",{src:"/img/third-party-references/book-illlustration.svg","aria-hidden":"true",alt:"better bibliographies",width:64,height:64});return(0,g.jsx)("div",{className:"tpr-editor-prompt-container tpr-bib-file-prompt hidden-xs-container fade-slide-in",children:(0,g.jsx)(ii.Z,{type:"offer",action:o,isDismissible:!0,isActionBelowContent:!0,customIcon:l,title:i("better_bibliographies"),content:a,onDismiss:r})})};function pa(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return ma(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ma(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Aa="bib-file-tpr-prompt",ha={location:"open-bib-file-upgrade-prompt",name:Aa},ya=function(){var e=(0,qt.yW)().splitTestVariants,r=(0,W.SE)(),n=r.allowedFreeTrial,t=r.features,i=(0,V._i)().inactiveTutorials,o=pa((0,k.Z)("editor"),1)[0],a=(0,ti.o)(Aa,ha),l=a.completeTutorial,u=a.dismissTutorial,c=a.tryShowingPopup,s=a.showPopup,f=a.clearPopup;(0,m.useEffect)((function(){var r="edit-bib-file"===e["bib-file-tpr-prompt"],a=i.includes(Aa),l=!(null!=t&&t.mendeley||null!=t&&t.zotero),u=n&&l,s=null==o?void 0:o.open_doc_name,d=s&&(null==s?void 0:s.endsWith(".bib"));r&&u&&d&&!a?c("reference-manager-prompt-view"):r&&f()}),[n,t,o,i,c,u,e,f]);var d=(0,m.useCallback)((function(){return l({event:"promo-click",action:"complete",button:"Upgrade"})}),[l]),p=(0,m.useCallback)((function(){return q.BZ("promo-click",{...ha,button:"Learn more"})}),[]);return s?(0,g.jsx)(da,{handleFreeTrialClick:d,handleLearnMore:p,onDismiss:u}):null},va=(0,m.memo)(ya),ba=n(48755),ga=[{import:f,path:"/overleaf/services/web/modules/writefull/frontend/js/components/writefull-promotion"},{import:d,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/promotions/edit-bib-file-prompt"}],ja=(0,m.lazy)((function(){return Promise.all([n.e(7198),n.e(5069),n.e(4287),n.e(3539),n.e(2187),n.e(3546),n.e(7042),n.e(9706),n.e(7029),n.e(6511),n.e(9516)]).then(n.bind(n,84538))}));function wa(){return(0,g.jsxs)(m.Suspense,{fallback:(0,g.jsx)(qr.w,{delay:500}),children:[ga.map((function(e){var r=e.import.default,n=e.path;return(0,g.jsx)(r,{},n)})),(0,g.jsx)(ja,{})]})}var xa=(0,j.Z)((0,m.memo)(wa),ba.l),Ca=function(){var e=(0,A.$G)().t;return(0,g.jsx)("div",{className:"loading-panel",children:(0,g.jsxs)("span",{children:[(0,g.jsx)("i",{className:"fa fa-spin fa-refresh"}),"  ",e("loading"),"…"]})})};function Sa(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Ea(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ea(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ea(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Ia=(0,m.lazy)((function(){return n.e(7483).then(n.bind(n,27483))})),_a=function(){var e=Sa((0,k.Z)("editor"),1)[0],r=(0,Di.z)(),n=r.selectedEntityCount,t=r.openEntity;if(!(0,z.QA)().currentDocumentId)return null;var i=Boolean((!e.sharejs_doc||e.opening)&&!e.error_state&&e.open_doc_id);return(0,g.jsx)("div",{className:P()("ide-react-editor-content","full-size",{hidden:"doc"!==(null==t?void 0:t.type)||1!==n}),children:(0,g.jsxs)(B.eh,{autoSaveId:"ide-editor-layout",direction:"vertical",children:[(0,g.jsxs)(B.s_,{id:"panel-source-editor",order:1,className:"ide-react-editor-panel",children:[(0,g.jsx)(xa,{}),i&&(0,g.jsx)(Ca,{})]}),e.showSymbolPalette&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(en,{id:"editor-symbol-palette"}),(0,g.jsx)(B.s_,{id:"panel-symbol-palette",order:2,defaultSize:25,minSize:10,maxSize:50,children:(0,g.jsx)(m.Suspense,{fallback:(0,g.jsx)(qr.w,{delay:500}),children:(0,g.jsx)(Ia,{})})})]})]})})};function ka(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Oa(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oa(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oa(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Ta=function(){var e=ka((0,m.useState)(!1),2),r=e[0],n=e[1],t=(0,A.$G)().t,i=function(){var e=(0,U.l5)(),r=e.view,n=e.pdfLayout,t=e.changeLayout,i=e.detachRole,o=e.reattach,a=(0,m.useRef)(null),l="sideBySide"===n||"pdf"===r;uo(l,a);var u=(0,m.useCallback)((function(){l?t("flat","editor"):t("sideBySide")}),[t,l]),c=(0,m.useCallback)((function(e){e?("detacher"===i&&o(),t("sideBySide")):t("flat","editor")}),[t,i,o]);return{togglePdfPane:u,handlePdfPaneExpand:(0,m.useCallback)((function(){"flat"===n&&"editor"===r&&t("sideBySide","editor")}),[t,n,r]),handlePdfPaneCollapse:(0,m.useCallback)((function(){"sideBySide"===n&&t("flat","editor")}),[t,n]),setPdfIsOpen:c,pdfIsOpen:l,pdfPanelRef:a}}(),o=i.togglePdfPane,a=i.handlePdfPaneExpand,l=i.handlePdfPaneCollapse,u=i.setPdfIsOpen,c=i.pdfIsOpen,s=i.pdfPanelRef,f=(0,U.l5)(),d=f.view,p=f.pdfLayout,h=(0,Di.z)(),y=h.selectedEntityCount,v=h.openEntity,b="editor"===d||"file"===d||"sideBySide"===p;return(0,g.jsxs)(B.eh,{autoSaveId:"ide-editor-pdf-layout",direction:"horizontal",className:P()({"ide-panel-group-resizing":r,hidden:"history"===d}),children:[(0,g.jsxs)(B.s_,{id:"panel-main",order:1,defaultSize:50,minSize:5,className:P()("ide-react-panel",{"ide-panel-group-resizing":r,hidden:!b}),children:[0===y&&(0,g.jsx)(Ao,{}),1===y&&"fileRef"===(null==v?void 0:v.type)&&(0,g.jsx)(Yo,{file:(0,ta.P)(v.entity)}),y>1&&(0,g.jsx)(ea,{selectedEntityCount:y}),(0,g.jsx)(_a,{})]}),(0,g.jsxs)(Q,{resizable:"sideBySide"===p,onDoubleClick:o,onDragging:n,className:P()({hidden:!b}),children:[(0,g.jsx)(Yr,{id:"editor-pdf",togglerType:"east",isOpen:c,setIsOpen:u,tooltipWhenOpen:t("tooltip_hide_pdf"),tooltipWhenClosed:t("tooltip_show_pdf")}),"sideBySide"===p&&(0,g.jsx)("div",{className:"synctex-controls",children:(0,g.jsx)(ra.bx,{})})]}),(0,g.jsxs)(B.s_,{ref:s,id:"panel-pdf",order:2,defaultSize:50,minSize:5,collapsible:!0,onCollapse:l,onExpand:a,className:"ide-react-panel",children:[c&&(0,g.jsx)(na.Z,{}),"flat"===p&&"pdf"===d&&(0,g.jsx)("div",{className:"synctex-controls",hidden:!0,children:(0,g.jsx)(ra.bx,{})})]})]})},Fa=(0,m.lazy)((function(){return Promise.all([n.e(7198),n.e(5069),n.e(4287),n.e(3539),n.e(2187),n.e(3546),n.e(7042),n.e(9706),n.e(7029),n.e(6511),n.e(9516),n.e(7296)]).then(n.bind(n,87296))}));var Ra=(0,j.Z)((function(){return"history"!==(0,U.l5)().view?null:(0,g.jsx)(m.Suspense,{fallback:(0,g.jsx)(qr.w,{delay:500}),children:(0,g.jsx)(Fa,{})})}),ba.l),Ba=function(){var e=(0,U.l5)().view,r=function(){var e=so((0,m.useState)(!0),2),r=e[0],n=e[1],t=so((0,m.useState)(!1),2),i=t[0],o=t[1],a=(0,m.useRef)(null);uo(r,a);var l=(0,m.useCallback)((function(){n((function(e){return!e}))}),[]),u=(0,m.useCallback)((function(){n(!0)}),[]),c=(0,m.useCallback)((function(){n(!1)}),[]);return{isOpen:r,setIsOpen:n,panelRef:a,togglePane:l,handlePaneExpand:u,handlePaneCollapse:c,resizing:i,setResizing:o}}(),n=r.isOpen,t=r.setIsOpen,i=r.panelRef,o=r.togglePane,a=r.handlePaneExpand,l=r.handlePaneCollapse,u=r.resizing,c=r.setResizing,s=function(){var e=(0,U.l5)(),r=e.chatIsOpen,n=e.setChatIsOpen,t=po((0,m.useState)(!1),2),i=t[0],o=t[1],a=(0,m.useRef)(null);return uo(r,a),{isOpen:r,panelRef:a,resizing:i,setResizing:o,togglePane:(0,m.useCallback)((function(){n((function(e){return!e}))}),[n]),handlePaneExpand:(0,m.useCallback)((function(){n(!0)}),[n]),handlePaneCollapse:(0,m.useCallback)((function(){n(!1)}),[n])}}(),f=s.isOpen,d=s.panelRef,p=s.togglePane,h=s.resizing,y=s.setResizing,v=s.handlePaneCollapse,b=s.handlePaneExpand,j=(0,A.$G)().t;return(0,g.jsxs)("div",{className:"ide-react-main",children:[(0,g.jsx)(Dr,{}),(0,g.jsx)("div",{className:"ide-react-body",children:(0,g.jsxs)(B.eh,{autoSaveId:"ide-outer-layout",direction:"horizontal",className:P()({"ide-panel-group-resizing":u||h}),children:[(0,g.jsxs)(B.s_,{ref:i,id:"panel-sidebar",order:1,defaultSize:15,minSize:5,maxSize:80,collapsible:!0,onCollapse:l,onExpand:a,children:[(0,g.jsx)(co,{}),"history"===e&&(0,g.jsx)($r,{})]}),(0,g.jsx)(Q,{onDoubleClick:o,resizable:n,onDragging:c,children:(0,g.jsx)(Yr,{id:"panel-sidebar",togglerType:"west",isOpen:n,setIsOpen:t,tooltipWhenOpen:j("tooltip_hide_filetree"),tooltipWhenClosed:j("tooltip_show_filetree")})}),(0,g.jsx)(B.s_,{id:"panel-outer-main",order:2,children:(0,g.jsxs)(B.eh,{autoSaveId:"ide-inner-layout",direction:"horizontal",children:[(0,g.jsxs)(B.s_,{className:"ide-react-panel",id:"panel-main",order:1,children:[(0,g.jsx)(Ra,{}),(0,g.jsx)(Ta,{})]}),(0,g.jsx)(Q,{onDoubleClick:p,resizable:f,onDragging:y}),(0,g.jsx)(B.s_,{ref:d,id:"panel-chat",order:2,defaultSize:20,minSize:5,maxSize:30,collapsible:!0,onCollapse:v,onExpand:b,children:(0,g.jsx)(Xr,{})})]})})]})})]})},Za=n(72309);function Pa(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Ma(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ma(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ma(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Da=(0,m.memo)((function(){var e=(0,U.l5)().setLeftMenuShown,r=(0,Za.cq)().userSettings,n=r.editorTheme,t=r.overallTheme,i=Pa((0,m.useState)({editorTheme:n,overallTheme:t}),1)[0],o=(0,m.useRef)(null);return(0,m.useEffect)((function(){o.current&&(n===i.editorTheme&&t===i.overallTheme||(o.current.style.opacity="0"))}),[n,t,i]),(0,g.jsx)("div",{id:"left-menu-mask",ref:o,onClick:function(){return e(!1)}})})),Na=(0,m.lazy)((function(){return Promise.all([n.e(7198),n.e(5069),n.e(4287),n.e(6960)]).then(n.bind(n,34822))}));function La(){var e=(0,U.l5)(),r=e.leftMenuShown,n=e.setLeftMenuShown;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(le.Z,{backdropClassName:"left-menu-modal-backdrop",keyboard:!0,onHide:function(){n(!1)},id:"left-menu-modal",show:r,children:(0,g.jsx)(ae.Z.Body,{className:P()("full-size",{shown:r}),id:"left-menu",children:(0,g.jsx)(m.Suspense,{fallback:(0,g.jsx)(qr.w,{delay:500}),children:(0,g.jsx)(Na,{})})})}),r&&(0,g.jsx)(Da,{})]})}var Qa=(0,m.memo)(La);var Ua=n(65403),Ha=n(66123),za=n(50066);function qa(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Ka(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ka(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ka(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Ga=function(){var e=(0,A.$G)().t,r=(0,I.Km)().socket,n=(0,nn.I)().projectId,t=(0,za.a)().showGenericMessageModal,i=qa((0,k.Z)("project.publicAccesLevel"),2)[1],o=qa((0,k.Z)("project.members"),2)[1],a=qa((0,k.Z)("project.invites"),2)[1],l=(0,v.T)();(0,Ua.Z)(r,"project:access:revoked",(0,m.useCallback)((function(){t(e("removed_from_project"),e("you_have_been_removed_from_this_project_and_will_be_redirected_to_project_dashboard"));var r=window.setTimeout((function(){l.assign("/project")}),5e3);return function(){window.clearTimeout(r)}}),[t,e,l])),(0,Ua.Z)(r,"project:publicAccessLevel:changed",(0,m.useCallback)((function(e){e.newAccessLevel&&i(e.newAccessLevel)}),[i])),(0,Ua.Z)(r,"project:collaboratorAccessLevel:changed",(0,m.useCallback)((function(){(0,Ha.eH)(n).then((function(e){var r=e.members;r&&o(r)})).catch((function(e){_.c.error("Error fetching members for project",e)}))}),[n,o])),(0,Ua.Z)(r,"project:membership:changed",(0,m.useCallback)((function(e){e.members&&(0,Ha.eH)(n).then((function(e){var r=e.members;r&&o(r)})).catch((function(e){_.c.error("Error fetching members for project",e)})),e.invites&&(0,Ha.bh)(n).then((function(e){var r=e.invites;r&&a(r)})).catch((function(e){_.c.error("Error fetching invites for project",e)}))}),[n,a,o]))};n(35883);var Va=n(43363),Wa=n(19034),Ja=n.n(Wa);function Xa(e,r,n){(0,m.useEffect)((function(){return e.addEventListener(r,n),function(){e.removeEventListener(r,n)}}),[e,r,n])}function Ya(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return $a(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $a(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function el(){var e=(0,nn.I)().projectId,r=(0,z.QA)().getEditorType,n=Ya((0,m.useState)(0),2),t=n[0],i=n[1],o=Ya((0,m.useState)((function(){return new Date})),2),a=o[0],l=o[1],u=(0,m.useCallback)((function(){_.c.log("[Event] heartbeat trigger");var n=r();if(null!==n&&!(a>new Date)){var o=function(e){var r={editorType:e},n=(0,Va.N)();if(n.numberOfEntries>0)for(var t of Object.entries(n)){var i=Ya(t,2),o=i[0],a=i[1],l="cm6Perf"+o.charAt(0).toUpperCase()+o.slice(1);null!==a&&(r[l]=a)}return r}(n);_.c.log("[Event] send heartbeat request",o),function(e,r){(0,ee.BS)("/editingSession/".concat(e),{body:{segmentation:r}}).catch(_.c.error)}(e,o),i((function(e){return e+1}));var u=t<=2?30:t<=6?60*(t-2):300;l(Ja()().add(u,"seconds").toDate())}}),[r,t,a,e]);(0,De.Z)("cursor:editor:update",u),(0,De.Z)("scroll:editor:update",u),Xa(document,"click",u)}var rl=n(87828);function nl(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return tl(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tl(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tl(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function il(){var e=(0,I.Km)().connectionState,r=(0,A.$G)().t,n=nl((0,m.useState)(0),2),t=n[0],i=n[1],o=nl((0,m.useState)(!1),2),a=o[0],l=o[1];return(0,m.useEffect)((function(){e.forceDisconnected&&l(!0)}),[e.forceDisconnected]),(0,m.useEffect)((function(){e.forceDisconnected&&i(e.forcedDisconnectDelay)}),[e.forceDisconnected,e.forcedDisconnectDelay]),(0,m.useEffect)((function(){if(a){var e=window.setInterval((function(){i((function(e){return Math.max(0,e-1)}))}),1e3);return function(){window.clearInterval(e)}}}),[a]),a?(0,g.jsxs)(le.Z,{show:!0,onHide:function(){},className:"lock-editor-modal",backdrop:!1,keyboard:!1,children:[(0,g.jsx)(ae.Z.Header,{children:(0,g.jsx)(ae.Z.Title,{children:r("please_wait")})}),(0,g.jsx)(ae.Z.Body,{children:r("were_performing_maintenance",{seconds:t})})]}):null}var ol=(0,m.memo)(il),al=(n(79321),function(){var e=(0,A.$G)().t;return(0,g.jsxs)(le.Z,{show:!0,onHide:function(){},className:"lock-editor-modal",backdrop:!1,keyboard:!1,children:[(0,g.jsx)(ae.Z.Header,{children:(0,g.jsx)(ae.Z.Title,{children:e("connection_lost")})}),(0,g.jsx)(ae.Z.Body,{children:e("sorry_the_connection_to_the_server_is_down")})]})});function ll(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||cl(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ul(e){return function(e){if(Array.isArray(e))return sl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cl(e,r){if(e){if("string"==typeof e)return sl(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sl(e,r):void 0}}function sl(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var fl=function(e){var r=e.unsavedDocs;return(0,g.jsx)(g.Fragment,{children:ul(r.entries()).map((function(e){var r=ll(e,2),n=r[0],t=r[1];return t>8&&(0,g.jsx)(dl,{docId:n,seconds:t},n)}))})},dl=function(e){var r=e.docId,n=e.seconds,t=(0,Ho.Yt)(),i=t.pathInFolder,o=t.findEntityByPath,a=(0,A.$G)().t,l=(0,m.useMemo)((function(){var e=i(r);return e?o(e):null}),[r,o,i]);return l?(0,g.jsx)(x.Z,{bsStyle:"warning",bsSize:"small",children:a("saving_notification_with_seconds",{docname:l.entity.name,seconds:n})}):null};function pl(e){return function(e){if(Array.isArray(e))return hl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Al(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ml(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||Al(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Al(e,r){if(e){if("string"==typeof e)return hl(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hl(e,r):void 0}}function hl(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var yl=function(){var e=(0,z.QA)(),r=e.openDocs,n=e.debugTimers,t=(0,V._i)(),i=t.permissionsLevel,o=t.setPermissionsLevel,a=ml((0,m.useState)(!1),2),l=a[0],u=a[1],c=ml((0,m.useState)(new Map),2),s=c[0],f=c[1],d=(0,O.I)(),A=(0,m.useRef)(s);(0,m.useEffect)((function(){A.current=s}),[s]);var h=(0,m.useRef)(i);(0,m.useEffect)((function(){h.current=i}),[i]),(0,De.Z)("beforeunload",(0,m.useCallback)((function(e){r.hasUnsavedChanges()&&e.preventDefault()}),[r])),(0,m.useEffect)((function(){var e=window.setInterval((function(){n.current.CheckUnsavedDocs=Date.now();var e=new Map,t=r.unsavedDocIds();for(var i of t){var o,a=(null!==(o=A.current.get(i))&&void 0!==o?o:0)+1;e.set(i,a)}(e.size>0||A.current.size>0)&&(A.current=e,f(e))}),1e3);return function(){window.clearInterval(e)}}),[r,n]);var y=Math.max.apply(Math,[0].concat(pl(s.values())));(0,m.useEffect)((function(){u(y>15)}),[y]);var v=(0,m.useRef)(null);return(0,m.useEffect)((function(){l?(v.current=h.current,o("readOnly"),u(!0)):v.current&&o(v.current)}),[l,o]),(0,m.useEffect)((function(){0===s.size&&"readOnly"===h.current&&u(!1)}),[s]),(0,g.jsxs)(g.Fragment,{children:[l&&(0,g.jsx)(al,{}),s.size>0&&d&&(0,p.createPortal)((0,g.jsx)(fl,{unsavedDocs:s}),d)]})},vl=n(39675);function bl(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return gl(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gl(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gl(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var jl=function(e){var r=e.id,n=e.children,t=bl((0,qn.Z)("systemMessage.hide.".concat(r),!1),2),i=t[0],o=t[1];return i?null:(0,g.jsxs)("li",{className:"system-message",children:["protected"!==r?(0,g.jsx)(vl.Z,{onDismiss:function(){return o(!0)}}):null,n]})};function wl(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return xl(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xl(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xl(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Cl=function(){var e=(0,A.$G)().t,r=wl((0,qn.Z)("hide-i18n-notification",!1),2),n=r[0],t=r[1],i=(0,yr.Z)("ol-suggestedLanguage"),o=(0,yr.Z)("ol-currentUrl");return n?null:(0,g.jsxs)("li",{className:"system-message",children:[(0,g.jsx)(vl.Z,{onDismiss:function(){return t(!0)}}),(0,g.jsx)("div",{className:"text-center",children:(0,g.jsxs)("a",{href:i.url+o,children:[(0,g.jsx)(A.cC,{i18nKey:"click_here_to_view_sl_in_lng",components:[(0,g.jsx)("strong",{})],values:{lngName:i.lngName},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}}),(0,g.jsx)("img",{className:"ms-1",src:i.imgUrl,alt:e("country_flag",{country:i.lngName}),"aria-hidden":!0})]})})]})},Sl=n(18695);var El=function(){var e=(0,Sl.Z)(),r=e.data,n=e.runAsync,t=(0,yr.Z)("ol-suggestedLanguage");return(0,m.useEffect)((function(){var e=function(){!document.hidden&&navigator.onLine&&n((0,ee.xA)("/system/messages")).catch(_.c.error)};e();var r=setInterval(e,9e5);return function(){clearInterval(r)}}),[n]),null!=r&&r.length||t?(0,g.jsxs)("ul",{className:"system-messages",children:[null==r?void 0:r.map((function(e,r){return(0,g.jsx)(jl,{id:e._id,children:e.content},r)})),t?(0,g.jsx)(Cl,{}):null]}):null},Il=(0,m.memo)((function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ol,{}),(0,g.jsx)(yl,{}),(0,g.jsx)(El,{})]})}));function _l(){var e,r,n,t,i,o,a,l;return e=(0,U.l5)(),r=e.view,n=e.leftMenuShown,t=e.chatIsOpen,(0,m.useEffect)((function(){"editor"!==r&&"pdf"!==r&&(0,q.xQ)("ide-open-view-".concat(r,"-once"))}),[r]),(0,m.useEffect)((function(){n&&(0,q.xQ)("ide-open-left-menu-once")}),[n]),(0,m.useEffect)((function(){t&&(0,q.xQ)("ide-open-chat-once")}),[t]),Ga(),el(),i=(0,I.Km)().registerUserActivity,(0,De.Z)("cursor:editor:update",i),Xa(document.body,"click",i),function useHasLintingError(){var e=(0,rl.A3)().setHasLintingError;(0,De.Z)("editor:lint",(function(r){e(r.detail.hasLintingError)}))}(),o=(0,re.IM)(),a=(0,$.O)().fileTreeData,l=(0,m.useCallback)((function(e){var r=(0,mn.Z7)(a,e);"fileRef"===(null==r?void 0:r.type)&&window.dispatchEvent(new CustomEvent("editor.openDoc",{detail:e}))}),[a]),o.binaryFilesManager={openFileWithId:l},(0,g.jsxs)(O.f,{children:[(0,g.jsx)(R,{}),(0,g.jsx)(Il,{}),(0,g.jsx)(Qa,{}),(0,g.jsx)(Ba,{})]})}Il.displayName="Modals";var kl=n(35324);function Ol(e){var r=e.loadProgress,n=e.label,t=e.hasError,i=void 0!==t&&t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"loading-screen-brand-container",children:(0,g.jsx)("div",{className:"loading-screen-brand",style:{height:"".concat(r,"%")}})}),!i&&(0,g.jsxs)("div",{className:"h3 loading-screen-label","aria-live":"polite",children:[n,(0,g.jsx)("span",{className:"loading-screen-ellip","aria-hidden":"true",children:"."}),(0,g.jsx)("span",{className:"loading-screen-ellip","aria-hidden":"true",children:"."}),(0,g.jsx)("span",{className:"loading-screen-ellip","aria-hidden":"true",children:"."})]})]})}var Tl=n(29246);function Fl(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Rl(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rl(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rl(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Bl=new Set(["initial"]),Zl=new Set(["initial","render","connection","translations","project"]),Pl=function(e){var r=e.setLoaded,n=Fl((0,m.useState)(Bl),2),t=n[0],i=n[1],o=t.size/Zl.size*100;(0,m.useEffect)((function(){r(100===o)}),[o,r]);var a=(0,I.Km)(),l=a.connectionState,u=a.isConnected,c=(0,Tl.Z)(),s=(0,nn.I)().projectJoined;(0,m.useEffect)((function(){i((function(e){return new Set(e).add("render")}))}),[]),(0,m.useEffect)((function(){u&&i((function(e){return new Set(e).add("connection")}))}),[u]),(0,m.useEffect)((function(){c.isReady&&i((function(e){return new Set(e).add("translations")}))}),[c.isReady]),(0,m.useEffect)((function(){s&&i((function(e){return new Set(e).add("project")}))}),[s]);var f=(0,yr.Z)("ol-loadingText"),d=Boolean(l.error||c.error);return(0,g.jsxs)("div",{className:"loading-screen",children:[(0,g.jsx)(Ol,{loadProgress:o,label:f,hasError:d}),d&&(0,g.jsx)("p",{className:"loading-screen-error",children:function getLoadingScreenError(){return l.error?"io-not-loaded"===l.error?"Could not connect to websocket server :(":l.error:c.error?(0,yr.Z)("ol-translationLoadErrorMessage"):""}()})]})};function Ml(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Dl(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dl(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dl(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Nl=function(){var e=Ml((0,m.useState)(!1),2),r=e[0],n=e[1];return(0,g.jsx)(kl.u,{children:r?(0,g.jsx)(_l,{}):(0,g.jsx)(Pl,{setLoaded:n})})},Ll=(0,j.Z)((0,m.memo)(Nl),(function(e){var r=e.children,n=(0,A.$G)().t,t=(0,v.T)().reload;return(0,g.jsxs)("div",{className:"error-boundary-container",children:[(0,g.jsx)("div",{className:"icon-error-boundary-container",children:(0,g.jsx)(h.Z,{accessibilityLabel:"".concat(n("generic_something_went_wrong")," ").concat(n("please_refresh")),type:"exclamation-triangle fa-2x",fw:!0})}),r||(0,g.jsx)("div",{className:"error-message-container",children:(0,g.jsx)(b.O,{className:"small",style:{fontWeight:"bold"}})}),(0,g.jsx)(y.Z,{bsStyle:"primary",onClick:t,children:n("refresh")})]})}));p.render((0,g.jsx)(Ll,{}),document.getElementById("ide-root"))},44872:function(e,r,n){n.d(r,{Z:function(){return s}});n(34769),n(34115);var t=n(2784),i=n(52322),o=["as"];function a(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=function(e){var r=e.as,n=a(e,o),t=r||"div";return(0,i.jsx)(t,{...n})},u=["onClick","onMouseDown","offset"];function c(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=function(e){var r=e.onClick,n=e.onMouseDown,o=e.offset,a=void 0===o?50:o,s=c(e,u),f=(0,t.useRef)(!1),d=(0,t.useRef)(),p=s;return(0,t.useEffect)((function(){var e=function(e){if(f.current){if(f.current=!1,!d.current)return;var n=d.current.width/2,t=d.current.height/2,i=d.current.x+n,o=d.current.y+t,l=Math.abs(e.clientX-i),u=Math.abs(e.clientY-o);l<n+a&&u<t+a&&r()}};return document.addEventListener("mouseup",e),function(){document.removeEventListener("mouseup",e)}}),[r,a]),(0,i.jsx)(l,{onMouseDown:function(e){f.current=!0,d.current=e.target.getBoundingClientRect(),null==n||n(e)},...p})}},39675:function(e,r,n){var t=n(75234),i=n(52322);r.Z=function(e){var r=e.onDismiss,n=e.variant,o=void 0===n?"light":n,a=(0,t.$G)().t;return(0,i.jsxs)("button",{type:"button",className:"close pull-right ".concat(o),onClick:r,children:[(0,i.jsx)("span",{"aria-hidden":"true",children:"×"}),(0,i.jsx)("span",{className:"sr-only",children:a("close")})]})}},28500:function(e,r,n){n.d(r,{w:function(){return s}});n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850),n(71372);var t=n(75234),i=n(10280),o=n(2784),a=n(52322);function l(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function c(e){var r=e.delay,n=void 0===r?0:r,u=e.loadingText,c=(0,t.$G)().t,s=l((0,o.useState)(!1),2),f=s[0],d=s[1];return(0,o.useEffect)((function(){var e=window.setTimeout((function(){d(!0)}),n);return function(){window.clearTimeout(e)}}),[n]),f?(0,a.jsxs)("div",{className:"loading",children:[(0,a.jsx)(i.Z,{type:"refresh",fw:!0,spin:!0})," ",u||c("loading"),"…"]}):null}function s(e){var r=e.delay,n=void 0===r?0:r,t=e.minHeight,i=e.loadingText;return(0,a.jsx)("div",{className:"full-size-loading-spinner-container",style:{minHeight:t},children:(0,a.jsx)(c,{loadingText:i,delay:n})})}r.Z=c},84050:function(e,r,n){n.d(r,{KU:function(){return b},_i:function(){return g}});n(26936),n(18178),n(16781),n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(27233),n(77950),n(21850);var t=n(2784),i=n(37246),o=n(73091),a=n(96931),l=n(72526),u=n(99834),c=n(66041),s=n(63290),f=n(2982),d=n(50066),p=n(52322);function m(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||h(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,r){if(e){if("string"==typeof e)return y(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,r):void 0}}function y(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var v=(0,t.createContext)(void 0),b=function(e){var r=e.children,n=(0,a.IM)(),h=(0,s.SE)().id,y=(0,u.JY)().role,b=(0,d.a)().showGenericMessageModal,g=(0,l.d)(),j=g.owner,w=g.features,x=g._id,C=(0,t.useMemo)((function(){var e=(0,c.Z)("ol-brandVariation");return e&&{logoImgUrl:e.logo_url,brandVariationName:e.name,brandVariationId:e.id,brandId:e.brand_id,brandVariationHomeUrl:e.home_url,publishGuideHtml:e.publish_guide_html,partner:e.partner,brandedMenu:e.branded_menu,submitBtnHtml:e.submit_button_html}}),[]),S=A((0,i.Z)("state.loading"),1)[0],E=A((0,i.Z)("project.name"),2),I=E[0],_=E[1],k=A((0,i.Z)("permissionsLevel"),2),O=k[0],T=k[1],F=A((0,t.useState)(!1),2),R=F[0],B=F[1],Z=A((0,i.Z)("editor.showSymbolPalette"),1)[0],P=A((0,i.Z)("editor.toggleSymbolPalette"),1)[0],M=A((0,t.useState)((function(){return(0,c.Z)("ol-inactiveTutorials")||[]})),2),D=M[0],N=M[1],L=A((0,t.useState)(""),2),Q=L[0],U=L[1],H=A((0,t.useState)(null),2),z=H[0],q=H[1],K=(0,t.useCallback)((function(e){N([].concat(m(D),[e]))}),[D]);(0,t.useEffect)((function(){if(null!=n&&n.socket)return n.socket.on("projectNameUpdated",_),function(){return n.socket.removeListener("projectNameUpdated",_)}}),[null==n?void 0:n.socket,_]);var G=(0,t.useCallback)((function(e){_((function(r){return r!==e&&(0,f.W)(x,{name:e}).catch((function(e){_(r);var n=e.data,t=e.status;b("Error renaming project",400===t?n:"Please try again in a moment")})),e}))}),[_,x,b]),V=(0,o.Z)().setTitle;(0,t.useEffect)((function(){var e=[];"detached"===y&&e.push("[PDF]"),I&&(e.push(I),e.push("-")),e.push("Online LaTeX Editor"),e.push((0,c.Z)("ol-ExposedSettings").appName);var r=e.join(" ");V(r)}),[I,V,y]);var W=(0,t.useCallback)((function(e){window.dispatchEvent(new CustomEvent("editor:insert-symbol",{detail:e}))}),[]),J=(0,t.useMemo)((function(){return{cobranding:C,hasPremiumCompile:"priority"===(null==w?void 0:w.compileGroup),loading:S,renameProject:G,permissionsLevel:R?"readOnly":O,setPermissionsLevel:T,isProjectOwner:(null==j?void 0:j._id)===h,isRestrictedTokenMember:(0,c.Z)("ol-isRestrictedTokenMember"),showSymbolPalette:Z,toggleSymbolPalette:P,insertSymbol:W,inactiveTutorials:D,deactivateTutorial:K,currentPopup:z,setCurrentPopup:q,writefullAdClicked:Q,setWritefullAdClicked:U,setOutOfSync:B}}),[C,null==w?void 0:w.compileGroup,j,h,S,G,O,T,Z,P,W,D,K,z,q,Q,U,R,B]);return(0,p.jsx)(v.Provider,{value:J,children:r})};function g(){var e=(0,t.useContext)(v);if(!e)throw new Error("useEditorContext is only available inside EditorProvider");return e}},47481:function(e,r,n){n.d(r,{O:function(){return y},T:function(){return v}});n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var t=n(2784),i=n(37246),o=n(20681),a=n(53687),l=n(92242),u=n(55108),c=n(32967),s=n(52322);function f(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return d(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var p=(0,t.createContext)(void 0),m=function(e){return e.RENAME="RENAME",e.RESET="RESET",e.DELETE="DELETE",e.MOVE="MOVE",e.CREATE="CREATE",e}(m||{});function A(e,r){var n=e.fileTreeData;switch(r.type){case m.RESET:var t=r.fileTreeData;return{fileTreeData:t,fileCount:(0,a.y)(t)};case m.RENAME:var i=(0,o.Gd)(n,r.id,{newName:r.newName});return{fileTreeData:i,fileCount:(0,a.y)(i)};case m.DELETE:var l=(0,o.xv)(n,r.id);return{fileTreeData:l,fileCount:(0,a.y)(l)};case m.MOVE:var u=(0,o.RB)(n,r.entityId,r.toFolderId);return{fileTreeData:u,fileCount:(0,a.y)(u)};case m.CREATE:var c=(0,o.$O)(n,r.parentFolderId,r.entity);return{fileTreeData:c,fileCount:(0,a.y)(c)};default:throw new Error("Unknown mutable file tree action type: ".concat(r.type))}}var h=function(e){var r=null==e?void 0:e[0];return{fileTreeData:r,fileCount:(0,a.y)(r)}};function y(){var e=(0,t.useContext)(p);if(!e)throw new Error("useFileTreeData is only available inside FileTreeDataProvider");return e}var v=function(e){var r=e.children,n=f((0,i.Z)("project"),1)[0],o=f((0,i.Z)("editor.open_doc_id"),1)[0],a=f((0,c.Z)("editor.open_doc_name"),2)[1],d=(n||{}).rootFolder,y=f((0,t.useReducer)(A,d,h),2),v=y[0],b=v.fileTreeData,g=v.fileCount,j=y[1],w=f((0,t.useState)([]),2),x=w[0],C=w[1],S=(0,t.useMemo)((function(){return b?(0,u.m)(b):void 0}),[b]);(0,l.Z)((function(){j({type:m.RESET,fileTreeData:null==d?void 0:d[0]})}),[d]);var E=(0,t.useCallback)((function(e,r){r.type="folder",j({type:m.CREATE,parentFolderId:e,entity:r})}),[]),I=(0,t.useCallback)((function(e,r){r.type="doc",j({type:m.CREATE,parentFolderId:e,entity:r})}),[]),_=(0,t.useCallback)((function(e,r){r.type="fileRef",j({type:m.CREATE,parentFolderId:e,entity:r})}),[]),k=(0,t.useCallback)((function(e,r){j({type:m.RENAME,newName:r,id:e}),e===o&&a(r)}),[o,a]),O=(0,t.useCallback)((function(e){j({type:m.DELETE,id:e})}),[]),T=(0,t.useCallback)((function(e,r){j({type:m.MOVE,entityId:e,toFolderId:r})}),[]),F=(0,t.useMemo)((function(){return{dispatchCreateDoc:I,dispatchCreateFile:_,dispatchCreateFolder:E,dispatchDelete:O,dispatchMove:T,dispatchRename:k,fileCount:g,fileTreeData:b,hasFolders:(null==b?void 0:b.folders.length)>0,selectedEntities:x,setSelectedEntities:C,docs:S}}),[I,_,E,O,T,k,g,b,x,C,S]);return(0,s.jsx)(p.Provider,{value:F,children:r})}},39493:function(e,r,n){n.d(r,{aM:function(){return A},l5:function(){return h}});n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850);var t=n(2784),i=n(37246),o=n(41740),a=n(76066),l=n(66041),u=n(45177),c=n(44466),s=n(52322);function f(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return d(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var p=(0,l.Z)("ol-debugPdfDetach"),m=(0,t.createContext)(void 0);var A=function(e){var r=e.children,n=f((0,i.Z)("ui.view"),2),l=n[0],d=n[1],A=f((0,i.Z)("openFile"),1)[0],h=(0,c.Z)("history:toggle",!0),y=(0,t.useCallback)((function(e){d((function(r){return"history"!==e&&"history"!==r||h(),"editor"===e&&A?"file":e}))}),[d,A,h]),v=f((0,i.Z)("ui.chatOpen"),2),b=v[0],g=v[1],j=f((0,i.Z)("ui.reviewPanelOpen"),2),w=j[0],x=j[1],C=f((0,i.Z)("ui.miniReviewPanelVisible"),2),S=C[0],E=C[1],I=f((0,i.Z)("ui.leftMenuShown"),2),_=I[0],k=I[1],O=f((0,i.Z)("ui.pdfLayout"),2),T=O[0],F=O[1],R=f((0,i.Z)("ui.loadingStyleSheet"),2),B=R[0],Z=R[1],P=(0,t.useCallback)((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"editor";F(e),y("sideBySide"===e?"editor":r),function(e){a.Z.setItem("pdf.layout","sideBySide"===e?"split":"flat")}(e)}),[F,y]),M=(0,o.Z)(),D=M.reattach,N=M.detach,L=M.isLinking,Q=M.isLinked,U=M.role,H=M.isRedundant,z="sideBySide"===T||"pdf"===l||"detacher"===U;(0,t.useEffect)((function(){p&&u.c.warn("Layout Effect",{detachIsRedundant:H,detachRole:U,detachIsLinking:L,detachIsLinked:Q}),"detacher"===U&&(H?P("sideBySide"):(L||Q)&&P("flat","editor"))}),[H,U,L,Q,P]);var q=(0,t.useMemo)((function(){return{reattach:D,detach:N,detachIsLinked:Q,detachRole:U,changeLayout:P,chatIsOpen:b,leftMenuShown:_,pdfLayout:T,pdfPreviewOpen:z,reviewPanelOpen:w,miniReviewPanelVisible:S,loadingStyleSheet:B,setChatIsOpen:g,setLeftMenuShown:k,setPdfLayout:F,setReviewPanelOpen:x,setMiniReviewPanelVisible:E,setLoadingStyleSheet:Z,setView:y,view:l}}),[D,N,Q,U,P,b,_,T,z,w,S,B,g,k,F,x,E,Z,y,l]);return(0,s.jsx)(m.Provider,{value:q,children:r})};function h(){var e=(0,t.useContext)(m);if(!e)throw new Error("useLayoutContext is only available inside LayoutProvider");return e}},14204:function(e,r,n){n.d(r,{o:function(){return d}});n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850),n(71372),n(34769),n(58188),n(73439),n(18178);var t=n(2784),i=n(96227),o=n(28684),a=n(45177),l=n(84050),u=["event","action"];function c(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return f(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var d=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s((0,t.useState)(!1),2),f=n[0],d=n[1],p=(0,l._i)(),m=p.deactivateTutorial,A=p.currentPopup,h=p.setCurrentPopup,y=(0,t.useCallback)((async function(n){var t=n.event,l=void 0===t?"promo-click":t,s=n.action,f=void 0===s?"complete":s,p=c(n,u);i.BZ(l,{...r,...p});try{await(0,o.ty)("/tutorial/".concat(e,"/").concat(f))}catch(e){a.c.error(e)}d(!1),m(e)}),[m,r,e]),v=(0,t.useCallback)((async function(){await y({event:"promo-dismiss",action:"complete"})}),[y]),b=(0,t.useCallback)((async function(){await y({event:"promo-click",action:"postpone",button:"maybe-later"})}),[y]),g=(0,t.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"promo-prompt";return null===A&&(h(e),d(!0),i.BZ(n,r),!0)}),[A,h,e,r]),j=(0,t.useCallback)((function(){A===e&&(h(null),d(!1))}),[h,d,A,e]),w=(0,t.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"promo-prompt";h(e),d(!0),i.BZ(n,r)}),[h,d,e,r]);return{completeTutorial:y,dismissTutorial:v,maybeLater:b,tryShowingPopup:g,clearPopup:j,clearAndShow:w,showPopup:f}};r.Z=d},18695:function(e,r,n){n(58188),n(73439),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850),n(71372);var t=n(2784),i=n(40222);function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var l={status:"idle",data:null,error:null};r.Z=function(e){var r=t.useRef({...l,...e}),n=o(t.useReducer((function(e,r){return{...e,...r}}),r.current),2),a=n[0],u=a.status,c=a.data,s=a.error,f=n[1],d=(0,i.Z)(f),p=t.useCallback((function(e){return d({data:e,status:"resolved"})}),[d]),m=t.useCallback((function(e){return d({error:e,status:"rejected"})}),[d]),A=t.useCallback((function(){return d(r.current)}),[d]),h=t.useCallback((function(e){return d({status:"pending"}),e.then((function(e){return p(e),e}),(function(e){return m(e),Promise.reject(e)}))}),[d,p,m]);return{isIdle:"idle"===u,isLoading:"pending"===u,isError:"rejected"===u,isSuccess:"resolved"===u,setData:p,setError:m,error:s,status:u,data:c,runAsync:h,reset:A}}},41061:function(e,r,n){n.d(r,{Z:function(){return a}});n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(88233),n(26936),n(27233),n(77950),n(21850),n(71372);var t=n(2784);function i(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function a(){var e=(0,t.useRef)(null),r=i((0,t.useState)(!1),2),n=r[0],o=r[1],a=(0,t.useCallback)((function(){return o(!1)}),[]);return(0,t.useEffect)((function(){if(!n){var r=null;return e.current&&(r=window.requestAnimationFrame((function(){e.current&&(e.current.focus(),o(!0),r=null)}))),function(){null!==r&&window.cancelAnimationFrame(r)}}})),{autoFocusedRef:e,resetAutoFocus:a}}},40222:function(e,r,n){var t=n(2784),i=n(49169);r.Z=function(e){var r=(0,i.Z)();return t.useCallback((function(n){r.current&&e(n)}),[e,r])}},70887:function(e,r,n){n.d(r,{K:function(){return i}});var t=n(2784),i=function(e){var r,n=(null===(r=(0,t.useRef)(null)).current&&"BroadcastChannel"in window&&(r.current=new BroadcastChannel("user")),(0,t.useEffect)((function(){return function(){var e;return null===(e=r.current)||void 0===e?void 0:e.close()}}),[]),r.current);(0,t.useEffect)((function(){var r=new AbortController;return null==n||n.addEventListener("message",(function(r){var n=r.data;return e(n)}),{signal:r.signal}),function(){return r.abort()}}),[n,e])}},56556:function(e,r,n){n.d(r,{V:function(){return u}});n(32501),n(58188),n(88233);var t=n(92193),i=100,o=200,a=20,l=360;function u(e,r){if(null==e||"anonymous-user"===e)return i;if(r===e)return o;var n=function(e){var r=(0,t.M)(e),n=parseInt(r.toString().slice(0,8),16)%(l-2*a);return n}(e);return n>o-a&&n<o+a&&(n=(n-=o)+l-a),n}},34097:function(e,r,n){function t(){return!!document.querySelector("grammarly-desktop-integration")}n.d(r,{Z:function(){return t}})}},s={};function f(e){var r=s[e];if(void 0!==r)return r.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return c[e].call(n.exports,n,n.exports,f),n.loaded=!0,n.exports}f.m=c,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",r="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",t=function(e){e&&e.d<1&&(e.d=1,e.forEach((function(e){e.r--})),e.forEach((function(e){e.r--?e.r++:e()})))},f.a=function(i,o,a){var l;a&&((l=[]).d=-1);var u,c,s,f=new Set,d=i.exports,p=new Promise((function(e,r){s=r,c=e}));p[r]=d,p[e]=function(e){l&&e(l),f.forEach(e),p.catch((function(){}))},i.exports=p,o((function(i){var o;u=function(i){return i.map((function(i){if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var o=[];o.d=0,i.then((function(e){a[r]=e,t(o)}),(function(e){a[n]=e,t(o)}));var a={};return a[e]=function(e){e(o)},a}}var l={};return l[e]=function(){},l[r]=i,l}))}(i);var a=function(){return u.map((function(e){if(e[n])throw e[n];return e[r]}))},c=new Promise((function(r){(o=function(){r(a)}).r=0;var n=function(e){e!==l&&!f.has(e)&&(f.add(e),e&&!e.d&&(o.r++,e.push(o)))};u.map((function(r){r[e](n)}))}));return o.r?c:a()}),(function(e){e?s(p[n]=e):c(d),t(l)})),l&&l.d<0&&(l.d=0)},i=[],f.O=function(e,r,n,t){if(!r){var o=1/0;for(c=0;c<i.length;c++){r=i[c][0],n=i[c][1],t=i[c][2];for(var a=!0,l=0;l<r.length;l++)(!1&t||o>=t)&&Object.keys(f.O).every((function(e){return f.O[e](r[l])}))?r.splice(l--,1):(a=!1,t<o&&(o=t));if(a){i.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}t=t||0;for(var c=i.length;c>0&&i[c-1][2]>t;c--)i[c]=i[c-1];i[c]=[r,n,t]},f.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(r,{a:r}),r},a=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},f.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);f.r(n);var t={};o=o||[null,a({}),a([]),a(a)];for(var i=2&r&&e;"object"==typeof i&&!~o.indexOf(i);i=a(i))Object.getOwnPropertyNames(i).forEach((function(r){t[r]=function(){return e[r]}}));return t.default=function(){return e},f.d(n,t),n},f.d=function(e,r){for(var n in r)f.o(r,n)&&!f.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},f.f={},f.e=function(e){return Promise.all(Object.keys(f.f).reduce((function(r,n){return f.f[n](e,r),r}),[]))},f.u=function(e){return"js/"+({46:"zh-CN-json",123:"ru-json",320:"en-json",395:"tr-json",562:"cm6-theme8",588:"cm6-theme26",809:"cm6-theme1",929:"cm6-theme17",1312:"ja-json",1333:"cm6-theme4",1369:"cm6-theme27",1377:"ko-json",1787:"cm6-theme19",1897:"cm6-theme36",1921:"cm6-theme22",1949:"cm6-theme39",2231:"cm6-theme3",2268:"cm6-theme11",2461:"codemirror-emacs",2671:"nl-json",2834:"cm6-theme18",3340:"pt-json",3359:"cm6-theme6",3506:"cm6-theme9",3552:"cm6-theme32",3778:"cm6-theme0",4288:"cm6-theme16",4412:"cm6-theme31",4507:"no-json",4608:"cm6-theme13",4701:"cm6-theme2",4934:"cm6-theme20",5277:"pdf-js-viewer",5777:"cm6-theme15",5806:"da-json",5848:"cm6-theme12",6108:"cm6-theme5",6144:"cm6-theme35",6817:"it-json",6901:"de-json",6975:"cm6-theme33",7157:"cm6-theme10",7223:"cm6-theme25",7479:"cm6-theme7",7519:"cs-json",7530:"cm6-theme37",7846:"pl-json",7895:"cm6-theme14",8006:"fr-json",8166:"cm6-theme24",8244:"cm6-theme28",8367:"es-json",8671:"fi-json",8812:"cm6-theme23",8863:"cm6-theme34",8895:"cm6-theme30",8967:"cm6-theme38",9190:"cm6-theme29",9192:"cm6-theme21",9303:"sv-json",9516:"codemirror-editor"}[e]||e)+"-"+{46:"8615bf64f91cf8fda9f8",50:"9404ec35722e1713d48d",123:"f0dbc375f596e1a384a2",191:"0b8d58a07f7392cb609b",320:"62e09e66dfc131056e2d",375:"c8895ba8fcd0b0d6f80c",395:"63ee7cdb2d1124c8dd8f",551:"ee5868b2904b7d7d9e3d",562:"1f528507e3cf66b4a3a2",588:"4d6d8c9a0c56f670ad18",809:"f6afc861f6f71dc8a046",915:"19a2e54a9b3a40d7623b",929:"b3179f416508ddb8e803",1148:"db76b5d5d4b2cc80d01a",1220:"3681130f1b7ce4517a31",1312:"902fcbef103944e61ecd",1333:"1ed03e1ac162feb781d8",1365:"6a1b3025e71e20a3a9d7",1369:"83fb3cbb7deddec367e9",1377:"2f27018882788991631f",1787:"77eddc04c3dc45c226ca",1897:"396b52df86a364fa80dc",1921:"c9201aa47642cff4a79d",1949:"657755e5eb289dcecccf",2187:"30b1ebabf292561315bf",2231:"b0828f37548b7cd9a5e7",2268:"d8c0eac4a234ad18cd79",2307:"262b578dafe1bf733e11",2385:"d350d9ef6dc573a8914b",2461:"945e1fb1fe15291891a0",2495:"2637145ccc6d757ab8f1",2671:"7843e744730579214a87",2834:"3ce23cff17c541f0169b",3148:"74f59966bdaea20c49f1",3229:"a489aca71a6b9986fba4",3340:"a27dcd3af30848ba81e2",3359:"1c878b33067a3c96e906",3506:"7e697b05655f5c319a31",3539:"d9f9ded3df8a3f136ed2",3546:"5477ff54ecb0d2bbbf4c",3552:"c11aca6a63c79c02f780",3568:"ce1cc9ac610ce40a6038",3778:"846e23fef6e212b77aec",3888:"847f338c5d0d6e2ec74a",3911:"9e45d99daae520c371b3",3976:"55de7c478fbeff95c220",4287:"d647e0008e787b75cbc7",4288:"06f87a6cc0c84070cf2a",4412:"073b484afda9b373b3fd",4507:"094aaeac283874fd66be",4542:"465fda8296fabc95ab44",4608:"82779acab146d190138a",4701:"0caef38351691c6d968b",4934:"2b655579ac69b618952d",5069:"42e686d0c2b8ede02ff6",5277:"4454cde57c8a2759af47",5303:"ab5ef84dc6a7a2a07ea9",5593:"37ec7e9629e43e283d3a",5777:"d56558c5f17e2a14dfcb",5806:"f229239c2e94b9410026",5848:"3231276d88db380fb420",5963:"2964a1dcf9b181bc33f4",6071:"5377976f5ffb017fdcb4",6108:"ca7f2a550497fe425f46",6144:"5aa1a05537326290c46f",6219:"8e5f703480d328881fc6",6511:"74998cd6ff74bd54a025",6817:"ded4a767424337d3d5a3",6849:"20ec8f5961bdb4d8542d",6901:"062307c8d7e875cda056",6960:"f6ecbf0de8b60ede3031",6975:"3d6ce9297448ca9dbee4",7029:"abb144adf23cf3f70af0",7042:"043faf7200096156882e",7157:"31d40809844c4d00b806",7198:"6d35542769ee3e70c6b8",7223:"a3db98b7b9571c6d74ce",7296:"bea5cb6b714df2384015",7329:"938c74f1aa39fdecbc59",7479:"70186a97c19ade699b6a",7483:"b08f63aa601813ead720",7504:"13f7b7fe7ef91fcd7f12",7519:"efade3ab4eef4983c3f6",7530:"37b0e7a0abdee7ca66e8",7544:"d3e42547e781d57bd024",7583:"875c6bf333c4861d98fe",7710:"f7a3b6d191f945f02cc9",7846:"545ba303dac8e93d8447",7895:"068f5bcfe8422e85581e",7956:"ef4b1b003367b333c22b",7960:"fdf3cb216f32e4e11402",8006:"f136ffb1ac74a896b9e3",8166:"b05bba741081d97d6dce",8244:"3e4eae5dc817067c218b",8367:"41a0ad6dd561513ff181",8404:"a13f0621b828f75c8992",8458:"963bd92ec7b4202708b6",8522:"37b18465e7372422e73e",8671:"9b5cb618acf84ba29ad9",8812:"f625176b8ee1ab30a1e0",8863:"70e849c3b4934a1e597f",8895:"66f6715df3a63774e9ce",8967:"8d5471ee59a209cff20e",9136:"406422a42655fd4cd9dc",9190:"692a22ec5ef0f93073f2",9192:"7974ac05e98ae4ceb922",9303:"a2160721b5decf045819",9516:"93653054cea02b2c820b",9706:"a9889db5a9c2898e09c6"}[e]+".js"},f.miniCssF=function(e){return"stylesheets/"+e+"-"+{1148:"674a60b9694abb4702b7",1220:"e3fdc0daf303563a226a",2495:"1c8e5837b40e9b464544",6219:"e88824631fea5aac4685"}[e]+".css"},f.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),f.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},f.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},l={},u="Frontend:",f.l=function(e,r,n,t){if(l[e])l[e].push(r);else{var i,o;if(void 0!==n)for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++){var s=a[c];if(s.getAttribute("src")==e||s.getAttribute("data-webpack")==u+n){i=s;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,f.nc&&i.setAttribute("nonce",f.nc),i.setAttribute("data-webpack",u+n),i.src=e),l[e]=[r];var d=function(r,n){i.onerror=i.onload=null,clearTimeout(p);var t=l[e];if(delete l[e],i.parentNode&&i.parentNode.removeChild(i),t&&t.forEach((function(e){return e(n)})),r)return r(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),o&&document.head.appendChild(i)}},f.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},f.j=1072,f.p="/",function(){if("undefined"!=typeof document){var e=function(e){return new Promise((function(r,n){var t=f.miniCssF(e),i=f.p+t;if(function(e,r){for(var n=document.getElementsByTagName("link"),t=0;t<n.length;t++){var i=(a=n[t]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===r))return a}var o=document.getElementsByTagName("style");for(t=0;t<o.length;t++){var a;if((i=(a=o[t]).getAttribute("data-href"))===e||i===r)return a}}(t,i))return r();!function(e,r,n,t,i){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=function(n){if(o.onerror=o.onload=null,"load"===n.type)t();else{var a=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.href||r,u=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=a,u.request=l,o.parentNode&&o.parentNode.removeChild(o),i(u)}},o.href=r,n?n.parentNode.insertBefore(o,n.nextSibling):document.head.appendChild(o)}(e,i,null,r,n)}))},r={1072:0};f.f.miniCss=function(n,t){r[n]?t.push(r[n]):0!==r[n]&&{1148:1,1220:1,2495:1,6219:1}[n]&&t.push(r[n]=e(n).then((function(){r[n]=0}),(function(e){throw delete r[n],e})))}}}(),function(){f.b=document.baseURI||self.location.href;var e={1072:0};f.f.j=function(r,n){var t=f.o(e,r)?e[r]:void 0;if(0!==t)if(t)n.push(t[2]);else if(1148!=r){var i=new Promise((function(n,i){t=e[r]=[n,i]}));n.push(t[2]=i);var o=f.p+f.u(r),a=new Error;f.l(o,(function(n){if(f.o(e,r)&&(0!==(t=e[r])&&(e[r]=void 0),t)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+r+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,t[1](a)}}),"chunk-"+r,r)}else e[r]=0},f.O.j=function(r){return 0===e[r]};var r=function(r,n){var t,i,o=n[0],a=n[1],l=n[2],u=0;if(o.some((function(r){return 0!==e[r]}))){for(t in a)f.o(a,t)&&(f.m[t]=a[t]);if(l)var c=l(f)}for(r&&r(n);u<o.length;u++)i=o[u],f.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return f.O(c)},n=self.webpackChunkFrontend=self.webpackChunkFrontend||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))}();var d=f.O(void 0,[6708,7094,9002,4382,8988,2933,427,8815,8126,6840,2697,3433,5143,65,9034,471,7797,3731,4121,1202,3167,9278,8723,9253,6893,273,2856],(function(){return f(73047)}));return d=f.O(d)}()}));